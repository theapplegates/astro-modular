/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Dt=Object.create;var ae=Object.defineProperty,Mt=Object.defineProperties,At=Object.getOwnPropertyDescriptor,It=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertyNames,qe=Object.getOwnPropertySymbols,_t=Object.getPrototypeOf,je=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable;var Xe=(t,e,s)=>e in t?ae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,U=(t,e)=>{for(var s in e||(e={}))je.call(e,s)&&Xe(t,s,e[s]);if(qe)for(var s of qe(e))Ht.call(e,s)&&Xe(t,s,e[s]);return t},Oe=(t,e)=>Mt(t,It(e)),Ze=t=>ae(t,"__esModule",{value:!0});var Nt=(t,e)=>{Ze(t);for(var s in e)ae(t,s,{get:e[s],enumerable:!0})},$t=(t,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ot(e))!je.call(t,i)&&i!=="default"&&ae(t,i,{get:()=>e[i],enumerable:!(s=At(e,i))||s.enumerable});return t},A=t=>$t(Ze(ae(t!=null?Dt(_t(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var I=(t,e,s)=>new Promise((i,o)=>{var n=d=>{try{l(s.next(d))}catch(r){o(r)}},a=d=>{try{l(s.throw(d))}catch(r){o(r)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(n,a);l((s=s.apply(t,e)).next())});Nt(exports,{default:()=>Je});var kt=A(require("obsidian"));var _e={lightStyle:"minimal-light",darkStyle:"minimal-dark",lightScheme:"minimal-oxygen-light",darkScheme:"minimal-oxygen-dark",editorFont:"",lineHeight:1.5,lineWidth:40,lineWidthWide:50,maxWidth:88,textNormal:16,textSmall:13,imgGrid:!1,imgWidth:"img-default-width",tableWidth:"table-default-width",iframeWidth:"iframe-default-width",mapWidth:"map-default-width",chartWidth:"chart-default-width",colorfulHeadings:!1,colorfulFrame:!1,colorfulActiveStates:!1,trimNames:!0,labeledNav:!1,fullWidthMedia:!0,hideTitleBarOnHover:!0,bordersToggle:!0,minimalStatus:!0,focusMode:!1,underlineInternal:!0,underlineExternal:!0,folding:!0,lineNumbers:!1,readableLineLength:!1,devBlockWidth:!1,customPresets:[],enableCustomPresets:!0};var ct=A(require("obsidian"));var oe=A(require("obsidian"));function Qe(t,e){let i=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});i.createEl("div",{text:"Color scheme",cls:"setting-item-name"});let o=i.createEl("div",{cls:"setting-item-description"});o.appendChild(createEl("span",{text:"To create a custom color scheme use the "})),o.appendChild(createEl("a",{text:"Style Settings",href:"obsidian://show-plugin?id=obsidian-style-settings"})),o.appendText(" plugin. See "),o.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide/features/color-schemes"})),o.appendText(" for details."),new oe.Setting(t).setName("Light mode color scheme").setDesc("Preset color options for light mode.").addDropdown(n=>{n.addOption("minimal-oxygen-light","Oxygen").addOption("minimal-minimal-light","Minimal").addOption("minimal-atom-light","Atom").addOption("minimal-ayu-light","Ayu").addOption("minimal-catppuccin-light","Catppuccin").addOption("minimal-eink-light","E-ink (beta)").addOption("minimal-everforest-light","Everforest").addOption("minimal-flexoki-light","Flexoki").addOption("minimal-gruvbox-light","Gruvbox").addOption("minimal-macos-light","macOS").addOption("minimal-nord-light","Nord").addOption("minimal-rose-pine-light","Ros\xE9 Pine").addOption("minimal-notion-light","Sky").addOption("minimal-solarized-light","Solarized").addOption("minimal-things-light","Things"),e.settings.enableCustomPresets&&e.settings.customPresets.length>0&&(n.addOption("","\u2500\u2500\u2500\u2500\u2500\u2500 Custom Presets \u2500\u2500\u2500\u2500\u2500\u2500"),e.settings.customPresets.sort((a,l)=>a.name.localeCompare(l.name)).forEach(a=>{n.addOption(`minimal-custom-${a.id}`,a.name)})),n.setValue(e.settings.lightScheme).onChange(a=>{e.settings.lightScheme=a,e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()})}),new oe.Setting(t).setName("Light mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(n=>n.addOption("minimal-light","Default").addOption("minimal-light-white","All white").addOption("minimal-light-tonal","Low contrast").addOption("minimal-light-contrast","High contrast").setValue(e.settings.lightStyle).onChange(a=>{e.settings.lightStyle=a,e.saveData(e.settings),document.body.classList.contains("theme-light")&&e.updateLightStyle()})),new oe.Setting(t).setName("Dark mode color scheme").setDesc("Preset colors options for dark mode.").addDropdown(n=>{n.addOption("minimal-oxygen-dark","Oxygen").addOption("minimal-minimal-dark","Minimal").addOption("minimal-atom-dark","Atom").addOption("minimal-ayu-dark","Ayu").addOption("minimal-catppuccin-dark","Catppuccin").addOption("minimal-dracula-dark","Dracula").addOption("minimal-eink-dark","E-ink (beta)").addOption("minimal-everforest-dark","Everforest").addOption("minimal-flexoki-dark","Flexoki").addOption("minimal-gruvbox-dark","Gruvbox").addOption("minimal-macos-dark","macOS").addOption("minimal-nord-dark","Nord").addOption("minimal-rose-pine-dark","Ros\xE9 Pine").addOption("minimal-notion-dark","Sky").addOption("minimal-solarized-dark","Solarized").addOption("minimal-things-dark","Things"),e.settings.enableCustomPresets&&e.settings.customPresets.length>0&&(n.addOption("","\u2500\u2500\u2500\u2500\u2500\u2500 Custom Presets \u2500\u2500\u2500\u2500\u2500\u2500"),e.settings.customPresets.sort((a,l)=>a.name.localeCompare(l.name)).forEach(a=>{n.addOption(`minimal-custom-${a.id}`,a.name)})),n.setValue(e.settings.darkScheme).onChange(a=>{e.settings.darkScheme=a,e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()})}),new oe.Setting(t).setName("Dark mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(n=>n.addOption("minimal-dark","Default").addOption("minimal-dark-tonal","Low contrast").addOption("minimal-dark-black","True black").setValue(e.settings.darkStyle).onChange(a=>{e.settings.darkStyle=a,e.saveData(e.settings),document.body.classList.contains("theme-dark")&&e.updateDarkStyle()}))}var T=A(require("obsidian"));function et(t,e){t.createEl("br");let i=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});i.createEl("div",{text:"Features",cls:"setting-item-name"});let o=i.createEl("div",{cls:"setting-item-description"});o.appendChild(createEl("span",{text:"See "})),o.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide"})),o.appendText(" for details."),new T.Setting(t).setName("Text labels for primary navigation").setDesc("Navigation items in the left sidebar uses text labels.").addToggle(n=>n.setValue(e.settings.labeledNav).onChange(a=>{e.settings.labeledNav=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Colorful window frame").setDesc("The top area of the app uses your accent color.").addToggle(n=>n.setValue(e.settings.colorfulFrame).onChange(a=>{e.settings.colorfulFrame=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Colorful active states").setDesc("Active file and menu items use your accent color.").addToggle(n=>n.setValue(e.settings.colorfulActiveStates).onChange(a=>{e.settings.colorfulActiveStates=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Colorful headings").setDesc("Headings use a different color for each size.").addToggle(n=>n.setValue(e.settings.colorfulHeadings).onChange(a=>{e.settings.colorfulHeadings=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Minimal status bar").setDesc("Turn off to use full-width status bar.").addToggle(n=>n.setValue(e.settings.minimalStatus).onChange(a=>{e.settings.minimalStatus=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Trim file names in sidebars").setDesc("Use ellipses to fit file names on a single line.").addToggle(n=>n.setValue(e.settings.trimNames).onChange(a=>{e.settings.trimNames=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Workspace borders").setDesc("Display divider lines between workspace elements.").addToggle(n=>n.setValue(e.settings.bordersToggle).onChange(a=>{e.settings.bordersToggle=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Focus mode").setDesc("Hide tab bar and status bar, hover to display. Can be toggled via hotkey.").addToggle(n=>n.setValue(e.settings.focusMode).onChange(a=>{e.settings.focusMode=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Underline internal links").setDesc("Show underlines on internal links.").addToggle(n=>n.setValue(e.settings.underlineInternal).onChange(a=>{e.settings.underlineInternal=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Underline external links").setDesc("Show underlines on external links.").addToggle(n=>n.setValue(e.settings.underlineExternal).onChange(a=>{e.settings.underlineExternal=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Maximize media").setDesc("Images and videos fill the width of the line.").addToggle(n=>n.setValue(e.settings.fullWidthMedia).onChange(a=>{e.settings.fullWidthMedia=a,e.saveData(e.settings),e.refresh()})),new T.Setting(t).setName("Auto-hide title bar").setDesc("Hide title bar until hover. Turn off to always show.").addToggle(n=>n.setValue(e.settings.hideTitleBarOnHover).onChange(a=>{e.settings.hideTitleBarOnHover=a,e.saveData(e.settings),e.refresh()}))}var Y=A(require("obsidian"));function tt(t,e){t.createEl("br");let i=t.createEl("div",{cls:"setting-item setting-item-heading"}).createEl("div",{cls:"setting-item-info"});i.createEl("div",{text:"Layout",cls:"setting-item-name"});let o=i.createEl("div",{cls:"setting-item-description"});o.appendChild(createEl("span",{text:"These options can also be defined on a per-file basis, see "})),o.appendChild(createEl("a",{text:"documentation",href:"https://minimal.guide/features/block-width"})),o.appendText(" for details."),new Y.Setting(t).setName("Image grids").setDesc("Turn consecutive images into columns \u2014 to make a new row, add an extra line break between images.").addToggle(n=>n.setValue(e.settings.imgGrid).onChange(a=>{e.settings.imgGrid=a,e.saveData(e.settings),e.refresh()})),new Y.Setting(t).setName("Chart width").setDesc("Default width for chart blocks.").addDropdown(n=>n.addOption("chart-default-width","Default").addOption("chart-wide","Wide line width").addOption("chart-max","Maximum line width").addOption("chart-100","100% pane width").setValue(e.settings.chartWidth).onChange(a=>{e.settings.chartWidth=a,e.saveData(e.settings),e.refresh()})),new Y.Setting(t).setName("Iframe width").setDesc("Default width for iframe blocks.").addDropdown(n=>n.addOption("iframe-default-width","Default").addOption("iframe-wide","Wide line width").addOption("iframe-max","Maximum line width").addOption("iframe-100","100% pane width").setValue(e.settings.iframeWidth).onChange(a=>{e.settings.iframeWidth=a,e.saveData(e.settings),e.refresh()})),new Y.Setting(t).setName("Image width").setDesc("Default width for image blocks.").addDropdown(n=>n.addOption("img-default-width","Default").addOption("img-wide","Wide line width").addOption("img-max","Maximum line width").addOption("img-100","100% pane width").setValue(e.settings.imgWidth).onChange(a=>{e.settings.imgWidth=a,e.saveData(e.settings),e.refresh()})),new Y.Setting(t).setName("Map width").setDesc("Default width for map blocks.").addDropdown(n=>n.addOption("map-default-width","Default").addOption("map-wide","Wide line width").addOption("map-max","Maximum line width").addOption("map-100","100% pane width").setValue(e.settings.mapWidth).onChange(a=>{e.settings.mapWidth=a,e.saveData(e.settings),e.refresh()})),new Y.Setting(t).setName("Table width").setDesc("Default width for table and Dataview blocks.").addDropdown(n=>n.addOption("table-default-width","Default").addOption("table-wide","Wide line width").addOption("table-max","Maximum line width").addOption("table-100","100% pane width").setValue(e.settings.tableWidth).onChange(a=>{e.settings.tableWidth=a,e.saveData(e.settings),e.refresh()}))}var F=A(require("obsidian"));function st(t,e){t.createEl("br"),t.createEl("div",{text:"Typography",cls:"setting-item setting-item-heading"}),new F.Setting(t).setName("Text font size").setDesc("Used for the main text (default 16).").addText(s=>s.setPlaceholder("16").setValue((e.settings.textNormal||"")+"").onChange(i=>{e.settings.textNormal=parseFloat(i),e.saveData(e.settings),e.setFontSize()})),new F.Setting(t).setName("Small font size").setDesc("Used for text in the sidebars and tabs (default 13).").addText(s=>s.setPlaceholder("13").setValue((e.settings.textSmall||"")+"").onChange(i=>{e.settings.textSmall=parseFloat(i),e.saveData(e.settings),e.refresh()})),new F.Setting(t).setName("Line height").setDesc("Line height of text (default 1.5).").addText(s=>s.setPlaceholder("1.5").setValue((e.settings.lineHeight||"")+"").onChange(i=>{e.settings.lineHeight=parseFloat(i),e.saveData(e.settings),e.refresh()})),new F.Setting(t).setName("Normal line width").setDesc("Number of characters per line (default 40).").addText(s=>s.setPlaceholder("40").setValue((e.settings.lineWidth||"")+"").onChange(i=>{e.settings.lineWidth=parseInt(i.trim()),e.saveData(e.settings),e.refresh()})),new F.Setting(t).setName("Wide line width").setDesc("Number of characters per line for wide elements (default 50).").addText(s=>s.setPlaceholder("50").setValue((e.settings.lineWidthWide||"")+"").onChange(i=>{e.settings.lineWidthWide=parseInt(i.trim()),e.saveData(e.settings),e.refresh()})),new F.Setting(t).setName("Maximum line width %").setDesc("Percentage of space inside a pane that a line can fill (default 88).").addText(s=>s.setPlaceholder("88").setValue((e.settings.maxWidth||"")+"").onChange(i=>{e.settings.maxWidth=parseInt(i.trim()),e.saveData(e.settings),e.refresh()})),new F.Setting(t).setName("Editor font").setDesc("Overrides the text font defined in Obsidian Appearance settings when in edit mode.").addText(s=>s.setPlaceholder("").setValue((e.settings.editorFont||"")+"").onChange(i=>{e.settings.editorFont=i,e.saveData(e.settings),e.refresh()}))}var de=A(require("obsidian"));var He=class{static generateCSS(e,s){let i=s==="light"?e.light:e.dark,o=s==="light"?"theme-light":"theme-dark",n=`minimal-custom-${e.id}`,a=`.${o}.${n} {
`,l=i.base.h,d=i.base.s,r=i.base.l,c=i.accent.h,m=i.accent.s,u=i.accent.l,v=s==="light",h=r>50,w=`hsl(${l}, ${d}%, ${r}%)`,C=`hsl(${l}, ${d}%, ${h?Math.max(0,r-5):Math.min(100,r+5)}%)`,L=`hsl(${l}, ${d}%, ${h?Math.max(0,r-10):Math.min(100,r+10)}%)`,S=h?Math.max(0,r-15):Math.min(100,r+15),N=h?Math.max(0,r-10):Math.min(100,r+10),$=h?Math.max(0,r-5):Math.min(100,r+5),G=`hsl(${l}, ${d}%, ${S}%)`,_=`hsl(${l}, ${d}%, ${N}%)`,f=`hsl(${l}, ${d}%, ${$}%)`,x=h?15:85,B=h?25:75,Q=h?35:65,ue=h?30:70,pe=`hsl(${l}, ${Math.max(0,d-10)}%, ${x}%)`,ee=`hsl(${l}, ${Math.max(0,d-20)}%, ${B}%)`,te=`hsl(${l}, ${Math.max(0,d-10)}%, ${Q}%)`,fe=`hsl(${l}, ${Math.max(0,d-10)}%, ${ue}%)`,ve=`hsla(${c}, 50%, 40%, 30%)`,se="rgba(255, 177, 80, 0.3)",be=v?"white":"black",Ce=(z,D,k)=>{z=z/360,D=D/100,k=k/100;let q=(ie,Ie,H)=>(H<0&&(H+=1),H>1&&(H-=1),H<1/6?ie+(Ie-ie)*6*H:H<1/2?Ie:H<2/3?ie+(Ie-ie)*(2/3-H)*6:ie);if(D===0)return[k,k,k];let Se=k<.5?k*(1+D):k+D-k*D,Ae=2*k-Se,Tt=q(Ae,Se,z+1/3),Pt=q(Ae,Se,z),Lt=q(Ae,Se,z-1/3);return[Tt,Pt,Lt]},[K,J,V]=Ce(c,m,u),wt=.2126*(K<=.03928?K/12.92:Math.pow((K+.055)/1.055,2.4))+.7152*(J<=.03928?J/12.92:Math.pow((J+.055)/1.055,2.4))+.0722*(V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4))>.5?"black":"white";a+=`  --base-h: ${l};
`,a+=`  --base-s: ${d}%;
`,a+=`  --base-l: ${r}%;
`,a+=`
`,a+=`  --accent-h: ${c};
`,a+=`  --accent-s: ${m}%;
`,a+=`  --accent-l: ${u}%;
`,a+=`
`,a+=`  --bg1: ${w};
`,a+=`  --bg2: ${C};
`,a+=`  --bg-tab: ${C};
`,a+=`  --bg3: ${L};
`,a+=`
`,a+=`  --ui1: ${G};
`,a+=`  --ui2: ${_};
`,a+=`  --ui3: ${f};
`,a+=`
`,a+=`  --tx1: ${pe};
`,a+=`  --tx2: ${ee};
`,a+=`  --tx3: ${te};
`,a+=`  --tx4: ${fe};
`,a+=`
`,a+=`  --hl1: ${ve};
`,a+=`  --hl2: ${se};
`,a+=`
`,a+=`  --sp1: ${be};
`,a+=`
`,a+=`  --text-on-accent: ${wt};
`,a+=`
`;let W=m,R=h?55:65;return a+=`  --color-red: hsl(0, ${W}%, ${R}%);
`,a+=`  --color-orange: hsl(25, ${W}%, ${R}%);
`,a+=`  --color-yellow: hsl(50, ${W}%, ${R}%);
`,a+=`  --color-green: hsl(130, ${W}%, ${R}%);
`,a+=`  --color-cyan: hsl(180, ${W}%, ${R}%);
`,a+=`  --color-blue: hsl(220, ${W}%, ${R}%);
`,a+=`  --color-purple: hsl(280, ${W}%, ${R}%);
`,a+=`  --color-pink: hsl(330, ${W}%, ${R}%);
`,a+=`
`,i.frameLightnessOffset!==void 0&&(a+=`  --frame-background-l: ${u+i.frameLightnessOffset}%;
`,a+=`
`),i.colors&&["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2","red","orange","yellow","green","cyan","blue","purple","pink"].forEach(D=>{var q;let k=(q=i.colors)==null?void 0:q[D];if(k)switch(D){case"bg1":case"bg2":case"bg3":case"ui1":case"ui2":case"ui3":case"tx1":case"tx2":case"tx3":case"tx4":case"hl1":case"hl2":a+=`  --${D}: ${k};
`;break;default:a+=`  --color-${D}: ${k};
`;break}}),a+=`}
`,a}};function it(t){t=t.replace("#","");let e=parseInt(t.substring(0,2),16)/255,s=parseInt(t.substring(2,4),16)/255,i=parseInt(t.substring(4,6),16)/255,o=Math.max(e,s,i),n=Math.min(e,s,i),a=0,l=0,d=(o+n)/2;if(o!==n){let r=o-n;switch(l=d>.5?r/(2-o-n):r/(o+n),o){case e:a=(s-i)/r+(s<i?6:0);break;case s:a=(i-e)/r+2;break;case i:a=(e-s)/r+4;break}a/=6}return{h:Math.round(a*360),s:Math.round(l*100),l:Math.round(d*100)}}function g(t){let e=t.h/360,s=t.s/100,i=t.l/100,o=(r,c,m)=>(m<0&&(m+=1),m>1&&(m-=1),m<1/6?r+(c-r)*6*m:m<1/2?c:m<2/3?r+(c-r)*(2/3-m)*6:r),n,a,l;if(s===0)n=a=l=i;else{let r=i<.5?i*(1+s):i+s-i*s,c=2*i-r;n=o(c,r,e+1/3),a=o(c,r,e),l=o(c,r,e-1/3)}let d=r=>{let c=Math.round(r*255).toString(16);return c.length===1?"0"+c:c};return`#${d(n)}${d(a)}${d(l)}`}function Ne(t){return/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/.test(t)}function at(t){let e=document.createElement("div");e.className="custom-preset-swatch";let s=g(t.light.base),i=g(t.light.accent),o=g(t.dark.base);return e.style.setProperty("--swatch-gradient-start",s),e.style.setProperty("--swatch-gradient-mid",i),e.style.setProperty("--swatch-gradient-end",o),e}function $e(t){return t.trim().replace(/[<>:"/\\|?*]/g,"")}function We(t){return $e(t).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").substring(0,50)}function ot(t){return/^[a-z0-9-]+$/.test(t)&&t.length>0&&t.length<=50}function nt(t,e,s){return!e.some(i=>i.id===t&&i.id!==s)}var P=class{static generatePresetCSS(e,s){return He.generateCSS(e,s)}static validatePresetId(e,s,i){return ot(e)&&nt(e,s,i)}static sanitizePresetName(e){return $e(e)}static createPreset(e,s="",i=[]){let o=this.sanitizePresetName(e);if(!o)throw new Error("Preset name cannot be empty");let n=We(o),a=1;for(;!this.validatePresetId(n,i);)n=`${We(o)}-${a}`,a++;return{id:n,name:o,author:s.trim(),version:"1.0.0",light:{base:{h:210,s:2,l:96},accent:{h:200,s:80,l:50},colors:{}},dark:{base:{h:210,s:2,l:13},accent:{h:200,s:80,l:50},colors:{}}}}static updatePreset(e,s,i){let o=i.find(a=>a.id===e);if(!o)throw new Error(`Preset with ID "${e}" not found`);let n=U(U({},o),s);if(s.id&&s.id!==e&&!this.validatePresetId(s.id,i,e))throw new Error(`Preset ID "${s.id}" is invalid or already exists`);if(s.name&&(n.name=this.sanitizePresetName(s.name),!n.name))throw new Error("Preset name cannot be empty");return n}static deletePreset(e,s){return s.filter(i=>i.id!==e)}static exportPresetAsJSON(e){return JSON.stringify(e,null,2)}static importPresetFromJSON(e){try{let s=JSON.parse(e);if(!s.id||!s.name||!s.light||!s.dark)throw new Error("Invalid preset format: missing required fields");if(!s.light.base||!s.light.accent||!s.dark.base||!s.dark.accent)throw new Error("Invalid preset format: missing base or accent colors");let i=n=>n&&typeof n.h=="number"&&n.h>=0&&n.h<=360&&typeof n.s=="number"&&n.s>=0&&n.s<=100&&typeof n.l=="number"&&n.l>=0&&n.l<=100;if(!i(s.light.base)||!i(s.light.accent)||!i(s.dark.base)||!i(s.dark.accent))throw new Error("Invalid preset format: HSL values out of range");let o={id:this.sanitizePresetName(s.id),name:this.sanitizePresetName(s.name),author:s.author||"",version:s.version||"1.0.0",light:{base:s.light.base,accent:s.light.accent,colors:s.light.colors||{},frameLightnessOffset:s.light.frameLightnessOffset},dark:{base:s.dark.base,accent:s.dark.accent,colors:s.dark.colors||{},frameLightnessOffset:s.dark.frameLightnessOffset}};if(!o.id||!o.name)throw new Error("Invalid preset format: ID or name is empty after sanitization");return o}catch(s){throw s instanceof SyntaxError?new Error("Invalid JSON format"):s}}static getPresetById(e,s){return s.find(i=>i.id===e)}static isPresetActive(e,s,i){return s===`minimal-custom-${e}`||i===`minimal-custom-${e}`}static generatePresetPreview(e){var s,i,o,n;return{light:[g(e.light.base),g(e.light.accent),((s=e.light.colors)==null?void 0:s.bg1)||g(e.light.base),((i=e.light.colors)==null?void 0:i.tx1)||g(Oe(U({},e.light.base),{l:Math.max(0,e.light.base.l-30)}))],dark:[g(e.dark.base),g(e.dark.accent),((o=e.dark.colors)==null?void 0:o.bg1)||g(e.dark.base),((n=e.dark.colors)==null?void 0:n.tx1)||g(Oe(U({},e.dark.base),{l:Math.min(100,e.dark.base.l+30)}))]}}};var O=A(require("obsidian"));function xe(t,e){let s=e.base.h,i=e.base.s,o=e.base.l,n=e.accent.h,a=e.accent.l,l=o>50,d={red:"#e74c3c",orange:"#e67e22",yellow:"#f39c12",green:"#27ae60",cyan:"#16a085",blue:"#3498db",purple:"#9b59b6",pink:"#e91e63"};if(d[t])return d[t];let r,c;switch(t){case"bg1":return g({h:s,s:i,l:o});case"bg2":return c=l?Math.max(0,o-5):Math.min(100,o+5),g({h:s,s:i,l:c});case"bg3":return c=l?Math.max(0,o-10):Math.min(100,o+10),g({h:s,s:i,l:c});case"ui1":return c=l?Math.max(0,o-15):Math.min(100,o+15),g({h:s,s:i,l:c});case"ui2":return c=l?Math.max(0,o-10):Math.min(100,o+10),g({h:s,s:i,l:c});case"ui3":return c=l?Math.max(0,o-5):Math.min(100,o+5),g({h:s,s:i,l:c});case"tx1":return r=Math.max(0,i-10),c=l?Math.max(0,o-87):Math.min(100,o+77),g({h:s,s:r,l:c});case"tx2":return r=Math.max(0,i-20),c=l?Math.max(0,o-53):Math.min(100,o+45),g({h:s,s:r,l:c});case"tx3":return r=Math.max(0,i-10),c=l?Math.max(0,o-78):Math.min(100,o+30),g({h:s,s:r,l:c});case"tx4":return r=Math.max(0,i-10),c=l?Math.max(0,o-48):Math.min(100,o+40),g({h:s,s:r,l:c});case"hl1":return g({h:n,s:50,l:40});case"hl2":return"#ffb150";default:return"#000000"}}function Re(t,e,s){let i=t.createEl("div",{cls:"hsl-controls"}),o=U({},e),n=i.createEl("div",{cls:"color-preview-wrapper"}),a=n.createEl("div",{cls:"color-preview"});a.style.setProperty("--preview-color",g(o)),a.title="Click to pick a color with hex input";let l=n.createEl("input",{type:"color",cls:"hsl-color-input-overlay"});l.value=g(o);let d=()=>{let S=g(o);a.style.setProperty("--preview-color",S),l.value=S};l.onchange=()=>{let S=it(l.value);o.h=S.h,o.s=S.s,o.l=S.l,c.value=S.h.toString(),m.textContent=S.h.toString(),v.value=S.s.toString(),h.textContent=S.s.toString(),C.value=S.l.toString(),L.textContent=S.l.toString(),d(),s(o)};let r=i.createEl("div",{cls:"hsl-control"});r.createEl("label",{text:"Hue"});let c=r.createEl("input",{type:"range"});c.min="0",c.max="360";let m=r.createEl("span",{text:e.h.toString()});c.value=e.h.toString(),c.oninput=()=>{o.h=parseInt(c.value),m.textContent=o.h.toString(),d(),s(o)};let u=i.createEl("div",{cls:"hsl-control"});u.createEl("label",{text:"Saturation"});let v=u.createEl("input",{type:"range"});v.min="0",v.max="100";let h=u.createEl("span",{text:e.s.toString()});v.value=e.s.toString(),v.oninput=()=>{o.s=parseInt(v.value),h.textContent=o.s.toString(),d(),s(o)};let w=i.createEl("div",{cls:"hsl-control"});w.createEl("label",{text:"Lightness"});let C=w.createEl("input",{type:"range"});C.min="0",C.max="100";let L=w.createEl("span",{text:e.l.toString()});C.value=e.l.toString(),C.oninput=()=>{o.l=parseInt(C.value),L.textContent=o.l.toString(),d(),s(o)}}function Fe(t,e,s,i,o,n){let a=t.createEl("div",{cls:"color-override collapsible-item"}),l=a.createEl("div",{cls:"override-header"}),d=l.createEl("input",{type:"checkbox"});l.createEl("label",{text:e});let r=l.createEl("div",{cls:"color-input-wrapper"}),c=r.createEl("div",{cls:"color-preview-swatch"}),m=r.createEl("input",{type:"color",cls:"hsl-color-input-overlay"});m.disabled=!0;let u=null,v=h=>{c.style.setProperty("--preview-color",h),m.value=h};if(i[s])d.checked=!0,m.disabled=!1,v(i[s]),u=i[s];else{let h=xe(s,o);v(h),u=h}return m.onclick=()=>{if(!d.checked){d.checked=!0,m.disabled=!1;let h=u||i[s]||xe(s,o);i[s]=h,v(h),u=h,n()}},d.onchange=()=>{if(d.checked){m.disabled=!1;let h=u||i[s]||xe(s,o);i[s]=h,v(h),u=h}else m.disabled=!0,u=i[s]||u,delete i[s];n()},m.onchange=()=>{Ne(m.value)&&(i[s]=m.value,u=m.value,v(m.value),n())},m.oninput=()=>{Ne(m.value)&&(i[s]=m.value,u=m.value,v(m.value),n())},a}var ne=class extends O.Modal{constructor(e,s,i,o){super(e);this.plugin=s,this.isEditing=i!==null,this.preset=i||this.createDefaultPreset(),this.onSave=o}createDefaultPreset(){return P.createPreset("New Preset","",this.plugin.settings.customPresets)}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-editor-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:this.isEditing?"Edit preset":"Create new preset"});let i=e.createEl("div",{cls:"modal-section"});new O.Setting(i).setName("Preset name").setDesc("A unique name for your color preset").addText(m=>{this.nameInput=m.inputEl,m.setValue(this.preset.name).setPlaceholder("Enter preset name").onChange(u=>{this.preset.name=u,this.updatePreview()})}),new O.Setting(i).setName("Author (optional)").setDesc("Your name or the creator of this preset").addText(m=>{this.authorInput=m.inputEl,m.setValue(this.preset.author||"").setPlaceholder("Enter author name").onChange(u=>{this.preset.author=u})});let o=e.createEl("div",{cls:"modes-container"}),n=o.createEl("div",{cls:"mode-section"});n.createEl("h3",{text:"Light Mode"}),this.buildModeContent(n,"light");let a=o.createEl("div",{cls:"mode-section"});a.createEl("h3",{text:"Dark Mode"}),this.buildModeContent(a,"dark");let l=e.createEl("div",{cls:"modal-section"});l.createEl("h3",{text:"Preview"}),this.previewSwatch=l.createEl("div",{cls:"preview-swatch"}),this.updatePreview();let d=e.createEl("div",{cls:"modal-footer"}),r=d.createEl("button",{text:"Cancel",cls:"mod-cta"});r.onclick=()=>this.close();let c=d.createEl("button",{text:this.isEditing?"Update":"Create",cls:"mod-cta"});c.onclick=()=>this.savePreset()}buildModeContent(e,s){e.empty();let i=s==="light"?this.preset.light:this.preset.dark,o=e.createEl("div",{cls:"color-section"}),n=s==="light"?"Light theme colors":"Dark theme colors";o.createEl("h3",{text:n});let a=o.createEl("div",{cls:"color-group"});a.createEl("label",{text:"Base color"}),Re(a,i.base,f=>{s==="light"?this.preset.light.base=f:this.preset.dark.base=f,this.updatePreview()});let l=o.createEl("div",{cls:"color-group"});l.createEl("label",{text:"Accent color"}),Re(l,i.accent,f=>{s==="light"?this.preset.light.accent=f:this.preset.dark.accent=f,this.updatePreview()});let d=o.createEl("div",{cls:"color-group"});d.createEl("label",{text:"Colorful frame lightness override (optional)",cls:"frame-label"});let r=d.createEl("div",{cls:"setting-item-description frame-description"});r.textContent=s==="dark"?"Offset from accent lightness for colorful frame. Default: -25 (darkens by 25%). Leave empty for default.":"Offset from accent lightness for colorful frame. Default: +30 (brightens by 30%). Leave empty for default.";let c=d.createEl("input",{type:"number",cls:"frame-input"});c.placeholder=s==="dark"?"-25":"+30",c.min="-100",c.max="100",c.step="5",i.frameLightnessOffset!==void 0&&(c.value=i.frameLightnessOffset.toString()),c.oninput=()=>{let f=c.value.trim();if(f==="")s==="light"?delete this.preset.light.frameLightnessOffset:delete this.preset.dark.frameLightnessOffset;else{let x=parseInt(f);isNaN(x)||(s==="light"?this.preset.light.frameLightnessOffset=x:this.preset.dark.frameLightnessOffset=x)}this.updatePreview()};let m=e.createEl("div",{cls:"color-section"}),u=m.createEl("div",{cls:"collapsible-header"});u.createEl("h4",{text:"Advanced overrides (optional)"});let v=u.createEl("button",{cls:"collapse-toggle"});(0,O.setIcon)(v,"chevron-down"),i.colors||(i.colors={});let h=[],w=["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2"],C=["Background 1","Background 2","Background 3","UI 1","UI 2","UI 3","Text 1","Text 2","Text 3","Text 4","Highlight 1","Highlight 2"],L=i.colors;w.forEach((f,x)=>{let B=Fe(m,C[x],f,L,i,()=>this.updatePreview());h.push(B),B.addClass("collapsible-content-item")}),v.onclick=()=>{let f=!h[0].classList.contains("expanded");h.forEach(x=>{f?x.addClass("expanded"):x.removeClass("expanded")}),(0,O.setIcon)(v,f?"chevron-up":"chevron-down")};let S=e.createEl("div",{cls:"color-section"}),N=S.createEl("div",{cls:"collapsible-header"});N.createEl("h4",{text:"Syntax colors (optional)"});let $=N.createEl("button",{cls:"collapse-toggle"});(0,O.setIcon)($,"chevron-down");let G=["red","orange","yellow","green","cyan","blue","purple","pink"],_=[];G.forEach(f=>{let x=Fe(S,f.charAt(0).toUpperCase()+f.slice(1),f,L,i,()=>this.updatePreview());_.push(x),x.addClass("collapsible-content-item")}),$.onclick=()=>{let f=!_[0].classList.contains("expanded");_.forEach(x=>{f?x.addClass("expanded"):x.removeClass("expanded")}),(0,O.setIcon)($,f?"chevron-up":"chevron-down")}}updatePreview(){this.previewSwatch.empty();let e=this.plugin.settings.customPresets.findIndex(C=>C.id===this.preset.id);if(e!==-1){this.plugin.settings.customPresets[e]=this.preset;let C=`minimal-custom-${this.preset.id}`;(this.plugin.settings.lightScheme===C||this.plugin.settings.darkScheme===C)&&(this.plugin.updateStyle(),this.plugin.updateCustomPresetCSS())}let s=this.preset.light,i=this.preset.dark,o=g(s.base),n=g(s.accent),a=g(i.base),l=g(i.accent),d=this.previewSwatch.createEl("div",{cls:"preview-row"});d.createEl("div",{text:"Light mode",cls:"preview-label"});let r=d.createEl("div",{cls:"preview-colors"}),c=r.createEl("div",{cls:"preview-color"});c.setAttribute("data-color",o),c.style.setProperty("--preview-color",o);let m=r.createEl("div",{cls:"preview-color"});m.setAttribute("data-color",n),m.style.setProperty("--preview-color",n);let u=this.previewSwatch.createEl("div",{cls:"preview-row"});u.createEl("div",{text:"Dark mode",cls:"preview-label"});let v=u.createEl("div",{cls:"preview-colors"}),h=v.createEl("div",{cls:"preview-color"});h.setAttribute("data-color",a),h.style.setProperty("--preview-color",a);let w=v.createEl("div",{cls:"preview-color"});w.setAttribute("data-color",l),w.style.setProperty("--preview-color",l)}savePreset(){try{if(!this.preset.name.trim())throw new Error("Preset name is required");this.isEditing||(this.preset.id=P.createPreset(this.preset.name,this.preset.author||"",this.plugin.settings.customPresets).id),this.onSave(this.preset),this.close()}catch(e){console.error("Error saving preset:",e)}}onClose(){let{contentEl:e}=this;e.empty()}};var ye=A(require("obsidian"));var re=class extends ye.Modal{constructor(e,s,i){super(e);this.parsedPreset=null;this.plugin=s,this.onImport=i}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-import-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:"Import custom preset"}),e.createEl("div",{cls:"modal-section"}).createEl("p",{text:"Paste a JSON preset below. You can export presets from this plugin or create them manually following the correct format."});let o=e.createEl("div",{cls:"modal-section"});o.createEl("h3",{text:"JSON preset data"}),new ye.Setting(o).setName("Preset JSON").setDesc("Paste the complete JSON preset data here").addTextArea(r=>{this.textArea=r.inputEl,this.textArea.addClass("preset-json-input"),r.setPlaceholder("Paste JSON preset data here...").onChange(c=>this.parseJSON(c))});let n=e.createEl("div",{cls:"modal-section"});n.createEl("h3",{text:"Preview"}),this.previewContainer=n.createEl("div",{cls:"preview-container"}),this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"}),e.createEl("div",{cls:"modal-section error-section hidden"}).createEl("div",{cls:"error-message"});let l=e.createEl("div",{cls:"modal-footer"}),d=l.createEl("button",{text:"Cancel",cls:"mod-cta"});d.onclick=()=>this.close(),this.importButton=l.createEl("button",{text:"Import Preset",cls:"mod-cta"}),this.importButton.disabled=!0,this.importButton.onclick=()=>this.importPreset()}parseJSON(e){let s=this.contentEl.querySelector(".error-section"),i=this.contentEl.querySelector(".error-message");if(this.parsedPreset=null,this.importButton.disabled=!0,s.addClass("hidden"),this.previewContainer.empty(),!e.trim()){this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"});return}try{if(this.parsedPreset=P.importPresetFromJSON(e),this.plugin.settings.customPresets.find(n=>n.id===this.parsedPreset.id))throw new Error(`A preset with ID "${this.parsedPreset.id}" already exists. Please rename the preset.`);this.showPreview(this.parsedPreset),this.importButton.disabled=!1}catch(o){i.textContent=o instanceof Error?o.message:"Invalid JSON format",s.removeClass("hidden"),this.previewContainer.createEl("p",{text:"Fix the JSON errors above to see a preview",cls:"preview-error"})}}showPreview(e){this.previewContainer.empty();let s=this.previewContainer.createEl("div",{cls:"preset-info"}),i=s.createEl("div",{cls:"info-row"});if(i.createEl("strong",{text:"Name: "}),i.createEl("span",{text:e.name}),e.author){let V=s.createEl("div",{cls:"info-row"});V.createEl("strong",{text:"Author: "}),V.createEl("span",{text:e.author})}let o=s.createEl("div",{cls:"info-row"});o.createEl("strong",{text:"Version: "}),o.createEl("span",{text:e.version||"1.0.0"});let n=s.createEl("div",{cls:"info-row"});n.createEl("strong",{text:"ID: "}),n.createEl("span",{text:e.id,cls:"preset-id"});let a=this.previewContainer.createEl("div",{cls:"color-preview-section"});a.createEl("h4",{text:"Color preview"});let l=a.createEl("div",{cls:"mode-toggle"}),d=l.createEl("button",{text:"Light mode",cls:"mode-btn active"}),r=l.createEl("button",{text:"Dark mode",cls:"mode-btn"}),c=a.createEl("div",{cls:"swatch-container"}),m=c.createEl("div",{cls:"mode-swatches active"}),u=m.createEl("div",{cls:"color-swatch"}),v=`${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%`;u.setAttribute("data-hsl",v),u.style.setProperty("--swatch-hsl",v),u.title=`Base: hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`;let h=m.createEl("div",{cls:"color-swatch"}),w=`${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%`;h.setAttribute("data-hsl",w),h.style.setProperty("--swatch-hsl",w),h.title=`Accent: hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`;let C=c.createEl("div",{cls:"mode-swatches"}),L=C.createEl("div",{cls:"color-swatch"}),S=`${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%`;L.setAttribute("data-hsl",S),L.style.setProperty("--swatch-hsl",S),L.title=`Base: hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`;let N=C.createEl("div",{cls:"color-swatch"}),$=`${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%`;N.setAttribute("data-hsl",$),N.style.setProperty("--swatch-hsl",$),N.title=`Accent: hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`,d.onclick=()=>{d.classList.add("active"),r.classList.remove("active"),m.classList.add("active"),C.classList.remove("active")},r.onclick=()=>{r.classList.add("active"),d.classList.remove("active"),C.classList.add("active"),m.classList.remove("active")};let G=this.previewContainer.createEl("div",{cls:"color-details-section"});G.createEl("h4",{text:"Color values"});let _=G.createEl("div",{cls:"mode-details"});_.createEl("h5",{text:"Light mode"});let f=_.createEl("div",{cls:"color-detail"}),x=f.createEl("div",{cls:"detail-swatch"}),B=`${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%`;x.setAttribute("data-hsl",B),x.style.setProperty("--detail-hsl",B),f.createEl("span",{text:"Base: "}),f.createEl("span",{text:`hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`});let Q=_.createEl("div",{cls:"color-detail"}),ue=Q.createEl("div",{cls:"detail-swatch"}),pe=`${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%`;ue.setAttribute("data-hsl",pe),ue.style.setProperty("--detail-hsl",pe),Q.createEl("span",{text:"Accent: "}),Q.createEl("span",{text:`hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`});let ee=G.createEl("div",{cls:"mode-details"});ee.createEl("h5",{text:"Dark mode"});let te=ee.createEl("div",{cls:"color-detail"}),fe=te.createEl("div",{cls:"detail-swatch"}),ve=`${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%`;fe.setAttribute("data-hsl",ve),fe.style.setProperty("--detail-hsl",ve),te.createEl("span",{text:"Base: "}),te.createEl("span",{text:`hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`});let se=ee.createEl("div",{cls:"color-detail"}),be=se.createEl("div",{cls:"detail-swatch"}),Ce=`${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%`;be.setAttribute("data-hsl",Ce),be.style.setProperty("--detail-hsl",Ce),se.createEl("span",{text:"Accent: "}),se.createEl("span",{text:`hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`});let K=Object.keys(e.light.colors||{}).length,J=Object.keys(e.dark.colors||{}).length;(K>0||J>0)&&this.previewContainer.createEl("div",{cls:"overrides-info"}).createEl("p",{text:`Custom overrides: ${K} light mode, ${J} dark mode`})}importPreset(){this.parsedPreset&&(this.onImport(this.parsedPreset),this.close())}onClose(){let{contentEl:e}=this;e.empty()}};var rt=A(require("obsidian")),le=class extends rt.Modal{constructor(e,s,i,o="Yes",n="Cancel"){super(e);this.title=s,this.message=i,this.confirmText=o,this.cancelText=n}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.title}),e.createEl("p",{text:this.message});let s=e.createDiv("modal-button-container");s.createEl("button",{text:this.cancelText,cls:"mod-cta"}).addEventListener("click",()=>{this.close(),this.resolve(!1)});let o=s.createEl("button",{text:this.confirmText,cls:"mod-cta confirm-button"});o.addEventListener("click",()=>{this.close(),this.resolve(!0)}),o.focus()}onClose(){let{contentEl:e}=this;e.empty()}static show(e,s,i,o="Yes",n="Cancel"){return I(this,null,function*(){return new Promise(a=>{let l=new le(e,s,i,o,n);l.resolve=a,l.open()})})}};function lt(t,e,s,i){if(new de.Setting(t).setName("Enable custom presets").setDesc("Allow creation and use of custom color presets").addToggle(o=>o.setValue(e.settings.enableCustomPresets).onChange(n=>I(this,null,function*(){if(e.settings.enableCustomPresets=n,!n){let a=!1;e.settings.lightScheme.startsWith("minimal-custom-")&&(e.settings.lightScheme="minimal-oxygen-light",a=!0),e.settings.darkScheme.startsWith("minimal-custom-")&&(e.settings.darkScheme="minimal-oxygen-dark",a=!0),a&&(e.updateStyle(),e.updateCustomPresetCSS())}yield e.saveData(e.settings),i()}))),!!e.settings.enableCustomPresets)if(new de.Setting(t).setName("Create new preset").setDesc("Design a custom color scheme from scratch").addExtraButton(o=>o.setIcon("plus").setTooltip("Create new preset").onClick(()=>dt(s,e,null,i))),new de.Setting(t).setName("Import preset").setDesc("Import a preset from JSON data").addExtraButton(o=>o.setIcon("download").setTooltip("Import preset").onClick(()=>Rt(s,e,i))),e.settings.customPresets.length>0){let o=t.createEl("div",{cls:"custom-presets-list"});e.settings.customPresets.sort((n,a)=>n.name.localeCompare(a.name)).forEach(n=>{Wt(o,n,s,e,i)})}else t.createEl("div",{cls:"custom-presets-empty"}).createEl("p",{text:"No custom presets yet. Create your first preset to get started!",cls:"empty-message"})}function Wt(t,e,s,i,o){let n=t.createEl("div",{cls:"custom-preset-item"}),a=n.createEl("div",{cls:"preset-info"}),l=at(e);a.appendChild(l);let d=a.createEl("div",{cls:"preset-details"});d.createEl("div",{text:e.name,cls:"preset-name"}),e.author&&d.createEl("div",{text:`by ${e.author}`,cls:"preset-author"}),d.createEl("div",{text:e.id,cls:"preset-id preset-id-display"}),new de.Setting(n).setName("").setDesc("").addExtraButton(r=>r.setIcon("edit").setTooltip("Edit preset").onClick(()=>dt(s,i,e,o))).addExtraButton(r=>r.setIcon("download").setTooltip("Export preset").onClick(()=>Ft(e))).addExtraButton(r=>r.setIcon("trash").setTooltip("Delete preset").onClick(()=>I(this,null,function*(){return yield Gt(s,i,e,o)})))}function dt(t,e,s,i){new ne(t,e,s,n=>{if(s){let l=e.settings.customPresets.findIndex(d=>d.id===s.id);l!==-1&&(e.settings.customPresets[l]=n)}else e.settings.customPresets.push(n);e.saveData(e.settings);let a=`minimal-custom-${n.id}`;(e.settings.lightScheme===a||e.settings.darkScheme===a)&&(e.updateStyle(),e.updateCustomPresetCSS()),i()}).open()}function Rt(t,e,s){new re(t,e,o=>{e.settings.customPresets.push(o),e.saveData(e.settings),s()}).open()}function Ft(t){let e=P.exportPresetAsJSON(t),s=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download=`${t.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}function Gt(t,e,s,i){return I(this,null,function*(){if(P.isPresetActive(s.id,e.settings.lightScheme,e.settings.darkScheme)){if(!(yield le.show(t,"Delete active preset","This preset is currently active. Deleting it will switch to the default scheme. Continue?","Delete")))return;e.settings.lightScheme===`minimal-custom-${s.id}`&&(e.settings.lightScheme="minimal-oxygen-light"),e.settings.darkScheme===`minimal-custom-${s.id}`&&(e.settings.darkScheme="minimal-oxygen-dark")}e.settings.customPresets=e.settings.customPresets.filter(n=>n.id!==s.id),yield e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS(),i()})}var Ge=class extends ct.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s}display(){let{containerEl:e}=this;e.empty(),Qe(e,this.plugin),lt(e,this.plugin,this.app,()=>this.display()),et(e,this.plugin),tt(e,this.plugin),st(e,this.plugin)}};var j={PLUGIN_THEME:"minimal-theme",THEME_LIGHT:"theme-light",THEME_DARK:"theme-dark",CUSTOM_PRESETS_STYLE:"minimal-custom-presets",THEME_OVERRIDE:"data-theme-override"},Ee=["minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"],ke=["minimal-dark","minimal-dark-tonal","minimal-dark-black"],ce=["minimal-oxygen-light","minimal-minimal-light","minimal-atom-light","minimal-ayu-light","minimal-catppuccin-light","minimal-eink-light","minimal-everforest-light","minimal-flexoki-light","minimal-gruvbox-light","minimal-macos-light","minimal-nord-light","minimal-rose-pine-light","minimal-notion-light","minimal-solarized-light","minimal-things-light"],me=["minimal-oxygen-dark","minimal-minimal-dark","minimal-atom-dark","minimal-ayu-dark","minimal-catppuccin-dark","minimal-dracula-dark","minimal-eink-dark","minimal-everforest-dark","minimal-flexoki-dark","minimal-gruvbox-dark","minimal-macos-dark","minimal-nord-dark","minimal-rose-pine-dark","minimal-notion-dark","minimal-solarized-dark","minimal-things-dark"];var we=["table-100","table-default-width","table-wide","table-max"],Te=["iframe-100","iframe-default-width","iframe-wide","iframe-max"],Pe=["img-100","img-default-width","img-wide","img-max"],Le=["map-100","map-default-width","map-wide","map-max"],De=["chart-100","chart-default-width","chart-wide","chart-max"],p={INCREASE_FONT:"increase-body-font-size",DECREASE_FONT:"decrease-body-font-size",CYCLE_DARK_STYLE:"toggle-minimal-dark-cycle",CYCLE_LIGHT_STYLE:"toggle-minimal-light-cycle",TOGGLE_BORDERS:"toggle-hidden-borders",TOGGLE_COLORFUL_HEADINGS:"toggle-colorful-headings",TOGGLE_FOCUS_MODE:"toggle-minimal-focus-mode",TOGGLE_COLORFUL_FRAME:"toggle-minimal-colorful-frame",TOGGLE_IMAGE_GRID:"toggle-minimal-img-grid",TOGGLE_THEME:"toggle-minimal-switch",CYCLE_TABLE_WIDTH:"cycle-minimal-table-width",CYCLE_IMAGE_WIDTH:"cycle-minimal-image-width",CYCLE_IFRAME_WIDTH:"cycle-minimal-iframe-width",CYCLE_CHART_WIDTH:"cycle-minimal-chart-width",CYCLE_MAP_WIDTH:"cycle-minimal-map-width",LIGHT_DEFAULT:"toggle-minimal-light-default",LIGHT_WHITE:"toggle-minimal-light-white",LIGHT_TONAL:"toggle-minimal-light-tonal",LIGHT_CONTRAST:"toggle-minimal-light-contrast",DARK_DEFAULT:"toggle-minimal-dark-default",DARK_TONAL:"toggle-minimal-dark-tonal",DARK_BLACK:"toggle-minimal-dark-black",CREATE_PRESET:"create-custom-preset",IMPORT_PRESET:"import-custom-preset",CYCLE_PRESETS_LIGHT:"cycle-custom-presets-light",CYCLE_PRESETS_DARK:"cycle-custom-presets-dark",DEV_BLOCK_WIDTH:"toggle-minimal-dev-block-width"};var Be={FONT_SIZE_NORMAL:16,FONT_SIZE_SMALL:13,LINE_HEIGHT:1.5,LINE_WIDTH:40,LINE_WIDTH_WIDE:50,MAX_WIDTH:88,FONT_STEP:.5},X={BASE_FONT_SIZE:"baseFontSize",FOLD_HEADING:"foldHeading",SHOW_LINE_NUMBER:"showLineNumber",READABLE_LINE_LENGTH:"readableLineLength",THEME:"theme"},M={LIGHT:"moonstone",DARK:"obsidian",SYSTEM:"system"},mt="Oxygen";var Ve={"minimal-oxygen-light":"Oxygen","minimal-minimal-light":"Minimal","minimal-atom-light":"Atom","minimal-ayu-light":"Ayu","minimal-catppuccin-light":"Catppuccin","minimal-eink-light":"E-ink (beta)","minimal-everforest-light":"Everforest","minimal-flexoki-light":"Flexoki","minimal-gruvbox-light":"Gruvbox","minimal-macos-light":"macOS","minimal-nord-light":"Nord","minimal-rose-pine-light":"Ros\xE9 Pine","minimal-notion-light":"Sky","minimal-solarized-light":"Solarized","minimal-things-light":"Things","minimal-oxygen-dark":"Oxygen","minimal-minimal-dark":"Minimal","minimal-atom-dark":"Atom","minimal-ayu-dark":"Ayu","minimal-catppuccin-dark":"Catppuccin","minimal-dracula-dark":"Dracula","minimal-eink-dark":"E-ink (beta)","minimal-everforest-dark":"Everforest","minimal-flexoki-dark":"Flexoki","minimal-gruvbox-dark":"Gruvbox","minimal-macos-dark":"macOS","minimal-nord-dark":"Nord","minimal-rose-pine-dark":"Ros\xE9 Pine","minimal-notion-dark":"Sky","minimal-solarized-dark":"Solarized","minimal-things-dark":"Things"};var ze=class{constructor(e){this.isUpdating=!1;this.plugin=e}initialize(){!this.plugin.isOxygenThemeActive()||this.updateCSS()}updateCSS(){if(this.isUpdating||!this.plugin.isOxygenThemeActive())return;this.isUpdating=!0,document.querySelectorAll("style[data-custom-presets]").forEach(n=>n.remove());let e=document.createElement("style");e.id=j.CUSTOM_PRESETS_STYLE,e.setAttribute("data-custom-presets","true");let s="",i=this.plugin.settings.customPresets.find(n=>this.plugin.settings.lightScheme===`minimal-custom-${n.id}`),o=this.plugin.settings.customPresets.find(n=>this.plugin.settings.darkScheme===`minimal-custom-${n.id}`);if(i&&(s+=P.generatePresetCSS(i,"light")+`
`),o&&(s+=P.generatePresetCSS(o,"dark")+`
`),!s){this.isUpdating=!1;return}e.textContent=s,document.head.appendChild(e),setTimeout(()=>{this.isUpdating=!1},150),setTimeout(()=>{document.body.offsetHeight},100)}cleanup(){document.querySelectorAll("style[data-custom-preset]").forEach(s=>s.remove()),document.querySelectorAll("style[data-custom-presets]").forEach(s=>s.remove());let e=document.getElementById(j.CUSTOM_PRESETS_STYLE);e&&e.remove()}};function b(t,e){return t.vault.getConfig(e)}function y(t,e,s){t.vault.setConfig(e,s)}function E(t,e){t.setTheme(e)}function ht(t,e){return t.vault.on("config-changed",e)}function gt(t){let e=t;typeof e.updateFontSize=="function"&&e.updateFontSize()}var Ue=class{constructor(e){this.cssObserver=null;this.plugin=e,this.customPresetCSS=new ze(e)}initialize(){this.loadRules()}initializeCustomPresets(){this.customPresetCSS.initialize()}cleanup(){this.unloadRules(),this.removeStyle(),this.removeSettings(),this.removeLightScheme(),this.removeDarkScheme(),this.customPresetCSS.cleanup(),this.cssObserver&&(this.cssObserver.disconnect(),this.cssObserver=null)}refresh(){!this.plugin.isOxygenThemeActive()||this.updateStyle()}updateCustomPresetCSS(){this.customPresetCSS.updateCSS()}updateStyle(){if(!!this.plugin.isOxygenThemeActive()){this.removeStyle(),this.removeSettings(),this.plugin.settings.lightStyle&&this.plugin.settings.lightStyle.trim()&&document.body.addClass(this.plugin.settings.lightStyle),this.plugin.settings.darkStyle&&this.plugin.settings.darkStyle.trim()&&document.body.addClass(this.plugin.settings.darkStyle);try{document.body.classList.contains("theme-light")?this.updateLightScheme():document.body.classList.contains("theme-dark")?this.updateDarkScheme():(document.body.addClass("theme-light"),this.updateLightScheme())}catch(e){console.error("Error updating schemes:",e)}document.body.classList.toggle("borders-none",!this.plugin.settings.bordersToggle),document.body.classList.toggle("colorful-headings",this.plugin.settings.colorfulHeadings),document.body.classList.toggle("colorful-frame",this.plugin.settings.colorfulFrame),document.body.classList.toggle("colorful-active",this.plugin.settings.colorfulActiveStates),document.body.classList.toggle("minimal-focus-mode",this.plugin.settings.focusMode),document.body.classList.toggle("links-int-on",this.plugin.settings.underlineInternal),document.body.classList.toggle("links-ext-on",this.plugin.settings.underlineExternal),document.body.classList.toggle("full-width-media",this.plugin.settings.fullWidthMedia),document.body.classList.toggle("img-grid",this.plugin.settings.imgGrid),document.body.classList.toggle("minimal-dev-block-width",this.plugin.settings.devBlockWidth),document.body.classList.toggle("minimal-status-off",!this.plugin.settings.minimalStatus),document.body.classList.toggle("full-file-names",!this.plugin.settings.trimNames),document.body.classList.toggle("labeled-nav",this.plugin.settings.labeledNav),document.body.classList.toggle("minimal-folding",this.plugin.settings.folding),document.body.addClass(this.plugin.settings.chartWidth,this.plugin.settings.tableWidth,this.plugin.settings.imgWidth,this.plugin.settings.iframeWidth,this.plugin.settings.mapWidth),document.body.style.setProperty("--font-ui-small",`${this.plugin.settings.textSmall}px`),document.body.style.setProperty("--line-height",String(this.plugin.settings.lineHeight)),document.body.style.setProperty("--line-width",`${this.plugin.settings.lineWidth}rem`),document.body.style.setProperty("--line-width-wide",`${this.plugin.settings.lineWidthWide}rem`),document.body.style.setProperty("--max-width",`${this.plugin.settings.maxWidth}%`),document.body.style.setProperty("--font-editor-override",this.plugin.settings.editorFont),this.plugin.settings.hideTitleBarOnHover?(document.body.style.removeProperty("--title-bar-always-visible"),document.body.classList.remove("always-show-title-bar")):(document.body.style.setProperty("--title-bar-always-visible","1"),document.body.classList.add("always-show-title-bar")),this.customPresetCSS.updateCSS()}}updateLightStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",this.plugin.settings.lightStyle),b(this.plugin.app,"theme")!=="system"&&(E(this.plugin.app,"moonstone"),y(this.plugin.app,"theme","moonstone")),this.plugin.app.workspace.trigger("css-change")}updateDarkStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",this.plugin.settings.darkStyle),b(this.plugin.app,"theme")!=="system"&&(E(this.plugin.app,"obsidian"),y(this.plugin.app,"theme","obsidian")),this.plugin.app.workspace.trigger("css-change")}updateLightScheme(){!this.plugin.isOxygenThemeActive()||(this.removeLightScheme(),this.removeDarkScheme(),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),this.plugin.settings.lightScheme&&this.plugin.settings.lightScheme.trim()&&document.body.addClass(this.plugin.settings.lightScheme))}updateDarkScheme(){!this.plugin.isOxygenThemeActive()||(this.removeDarkScheme(),this.removeLightScheme(),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),this.plugin.settings.darkScheme&&this.plugin.settings.darkScheme.trim()&&document.body.addClass(this.plugin.settings.darkScheme))}removeStyle(){document.body.removeClass("minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white","minimal-dark","minimal-dark-tonal","minimal-dark-black")}removeLightScheme(){document.body.removeClass(...ce),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}removeDarkScheme(){document.body.removeClass(...me),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}removeSettings(){document.body.removeClass("borders-none","colorful-headings","colorful-frame","colorful-active","minimal-focus-mode","links-int-on","links-ext-on","full-width-media","img-grid","minimal-dev-block-width","minimal-status-off","full-file-names","labeled-nav","minimal-folding","table-wide","table-max","table-100","table-default-width","iframe-wide","iframe-max","iframe-100","iframe-default-width","img-wide","img-max","img-100","img-default-width","chart-wide","chart-max","chart-100","chart-default-width","map-wide","map-max","map-100","map-default-width")}loadRules(){!this.plugin.isOxygenThemeActive()||(document.body.classList.add(j.PLUGIN_THEME),this.updateStyle())}unloadRules(){document.body.style.removeProperty("--font-ui-small"),document.body.style.removeProperty("--line-height"),document.body.style.removeProperty("--line-width"),document.body.style.removeProperty("--line-width-wide"),document.body.style.removeProperty("--max-width"),document.body.style.removeProperty("--font-editor-override"),document.body.classList.remove(j.PLUGIN_THEME),document.body.classList.remove("always-show-title-bar")}setupCSSWatcher(){}};var Ye=class{constructor(e){this.plugin=e}updateTheme(){if(b(this.plugin.app,"theme")===M.SYSTEM)document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let i=b(this.plugin.app,"theme")===M.LIGHT?M.DARK:M.LIGHT;E(this.plugin.app,i),y(this.plugin.app,"theme",i)}this.plugin.app.workspace.trigger("css-change")}switchToLight(){document.body.removeClass("theme-dark"),document.body.addClass("theme-light"),b(this.plugin.app,"theme")!==M.SYSTEM&&(E(this.plugin.app,M.LIGHT),y(this.plugin.app,"theme",M.LIGHT)),this.plugin.app.workspace.trigger("css-change")}switchToDark(){document.body.removeClass("theme-light"),document.body.addClass("theme-dark"),b(this.plugin.app,"theme")!==M.SYSTEM&&(E(this.plugin.app,M.DARK),y(this.plugin.app,"theme",M.DARK)),this.plugin.app.workspace.trigger("css-change")}getCurrentMode(){return document.body.classList.contains("theme-light")?"light":"dark"}updateSidebarTheme(){if(!this.plugin.isOxygenThemeActive())return;let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="minimal-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanupSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0];e&&e.removeClass("theme-dark");let s=document.getElementsByClassName("side-dock-ribbon")[0];s&&s.removeClass("theme-dark")}};var Ke=class{constructor(e){this.plugin=e}setupWatchers(){this.plugin.registerEvent(ht(this.plugin.app,()=>{this.syncFromVault()})),this.plugin.registerEvent(this.plugin.app.workspace.on("css-change",()=>{this.updateSidebarTheme()}))}syncFromVault(e=!1){let s=b(this.plugin.app,X.BASE_FONT_SIZE);typeof s=="number"&&(this.plugin.settings.textNormal=s),this.plugin.settings.folding=!!b(this.plugin.app,X.FOLD_HEADING),this.plugin.settings.lineNumbers=!!b(this.plugin.app,X.SHOW_LINE_NUMBER),this.plugin.settings.readableLineLength=!!b(this.plugin.app,X.READABLE_LINE_LENGTH);let i=document.body.classList;i.toggle("minimal-folding",this.plugin.settings.folding),i.toggle("minimal-line-nums",this.plugin.settings.lineNumbers),i.toggle("minimal-readable",this.plugin.settings.readableLineLength),i.toggle("minimal-readable-off",!this.plugin.settings.readableLineLength),e||this.plugin.saveData(this.plugin.settings)}setFontSize(){y(this.plugin.app,X.BASE_FONT_SIZE,this.plugin.settings.textNormal),gt(this.plugin.app)}updateSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="minimal-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanup(){}};function ut(t){t.addCommand({id:p.INCREASE_FONT,name:"Increase body font size",callback:()=>{t.settings.textNormal+=Be.FONT_STEP,t.saveData(t.settings),pt(t)}}),t.addCommand({id:p.DECREASE_FONT,name:"Decrease body font size",callback:()=>{t.settings.textNormal-=Be.FONT_STEP,t.saveData(t.settings),pt(t)}})}function pt(t){y(t.app,"baseFontSize",t.settings.textNormal),t.app.updateFontSize()}function ft(t){t.addCommand({id:p.CYCLE_DARK_STYLE,name:"Cycle between dark mode styles",callback:()=>{let s=(ke.indexOf(t.settings.darkStyle)+1)%ke.length;t.settings.darkStyle=ke[s],t.saveData(t.settings),Me(t)}}),t.addCommand({id:p.CYCLE_LIGHT_STYLE,name:"Cycle between light mode styles",callback:()=>{let s=(Ee.indexOf(t.settings.lightStyle)+1)%Ee.length;t.settings.lightStyle=Ee[s],t.saveData(t.settings),he(t)}}),t.addCommand({id:p.LIGHT_DEFAULT,name:"Use light mode (default)",callback:()=>{t.settings.lightStyle="minimal-light",t.saveData(t.settings),he(t)}}),t.addCommand({id:p.LIGHT_WHITE,name:"Use light mode (all white)",callback:()=>{t.settings.lightStyle="minimal-light-white",t.saveData(t.settings),he(t)}}),t.addCommand({id:p.LIGHT_TONAL,name:"Use light mode (low contrast)",callback:()=>{t.settings.lightStyle="minimal-light-tonal",t.saveData(t.settings),he(t)}}),t.addCommand({id:p.LIGHT_CONTRAST,name:"Use light mode (high contrast)",callback:()=>{t.settings.lightStyle="minimal-light-contrast",t.saveData(t.settings),he(t)}}),t.addCommand({id:p.DARK_DEFAULT,name:"Use dark mode (default)",callback:()=>{t.settings.darkStyle="minimal-dark",t.saveData(t.settings),Me(t)}}),t.addCommand({id:p.DARK_TONAL,name:"Use dark mode (low contrast)",callback:()=>{t.settings.darkStyle="minimal-dark-tonal",t.saveData(t.settings),Me(t)}}),t.addCommand({id:p.DARK_BLACK,name:"Use dark mode (true black)",callback:()=>{t.settings.darkStyle="minimal-dark-black",t.saveData(t.settings),Me(t)}})}function he(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",t.settings.lightStyle),b(t.app,"theme")!=="system"&&(E(t.app,"moonstone"),y(t.app,"theme","moonstone")),t.app.workspace.trigger("css-change")}function Me(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle),b(t.app,"theme")!=="system"&&(E(t.app,"obsidian"),y(t.app,"theme","obsidian")),t.app.workspace.trigger("css-change")}function vt(t){ce.forEach(e=>{let s=Ve[e]||e;t.addCommand({id:`toggle-${e}`,name:`Switch light color scheme to ${s} (light)`,callback:()=>{t.settings.lightScheme=e,t.saveData(t.settings),Bt(t),zt(t)}})}),me.forEach(e=>{let s=Ve[e]||e;t.addCommand({id:`toggle-${e}`,name:`Switch dark color scheme to ${s} (dark)`,callback:()=>{t.settings.darkScheme=e,t.saveData(t.settings),Vt(t),Ut(t)}})})}function Bt(t){bt(t),Ct(t),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),document.body.addClass(t.settings.lightScheme)}function Vt(t){Ct(t),bt(t),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),document.body.addClass(t.settings.darkScheme)}function zt(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",t.settings.lightStyle),b(t.app,"theme")!=="system"&&(E(t.app,"moonstone"),y(t.app,"theme","moonstone")),t.app.workspace.trigger("css-change")}function Ut(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle),b(t.app,"theme")!=="system"&&(E(t.app,"obsidian"),y(t.app,"theme","obsidian")),t.app.workspace.trigger("css-change")}function bt(t){document.body.removeClass(...ce),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function Ct(t){document.body.removeClass(...me),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function St(t){t.addCommand({id:p.CREATE_PRESET,name:"Create custom color preset",callback:()=>{new ne(t.app,t,null,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:p.IMPORT_PRESET,name:"Import custom color preset",callback:()=>{new re(t.app,t,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:p.CYCLE_PRESETS_LIGHT,name:"Cycle through custom presets (light mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(o=>t.settings.lightScheme===`minimal-custom-${o.id}`)+1)%t.settings.customPresets.length,i=t.settings.customPresets[s];t.settings.lightScheme=`minimal-custom-${i.id}`,t.saveData(t.settings),Yt(t)}}),t.addCommand({id:p.CYCLE_PRESETS_DARK,name:"Cycle through custom presets (dark mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(o=>t.settings.darkScheme===`minimal-custom-${o.id}`)+1)%t.settings.customPresets.length,i=t.settings.customPresets[s];t.settings.darkScheme=`minimal-custom-${i.id}`,t.saveData(t.settings),Kt(t)}})}function Yt(t){t.updateLightScheme()}function Kt(t){t.updateDarkScheme()}function xt(t){t.addCommand({id:p.TOGGLE_BORDERS,name:"Toggle sidebar borders",callback:()=>{t.settings.bordersToggle=!t.settings.bordersToggle,t.saveData(t.settings),Z(t)}}),t.addCommand({id:p.TOGGLE_COLORFUL_HEADINGS,name:"Toggle colorful headings",callback:()=>{t.settings.colorfulHeadings=!t.settings.colorfulHeadings,t.saveData(t.settings),Z(t)}}),t.addCommand({id:p.TOGGLE_FOCUS_MODE,name:"Toggle focus mode",callback:()=>{t.settings.focusMode=!t.settings.focusMode,t.saveData(t.settings),Z(t)}}),t.addCommand({id:p.TOGGLE_COLORFUL_FRAME,name:"Toggle colorful window frame",callback:()=>{t.settings.colorfulFrame=!t.settings.colorfulFrame,t.saveData(t.settings),Z(t)}}),t.addCommand({id:p.TOGGLE_IMAGE_GRID,name:"Toggle image grids",callback:()=>{t.settings.imgGrid=!t.settings.imgGrid,t.saveData(t.settings),Z(t)}}),t.addCommand({id:p.TOGGLE_THEME,name:"Switch between light and dark mode",callback:()=>{Jt(t)}}),t.addCommand({id:p.DEV_BLOCK_WIDTH,name:"Dev \u2014 Show block widths",callback:()=>{t.settings.devBlockWidth=!t.settings.devBlockWidth,t.saveData(t.settings),Z(t)}})}function Z(t){t.updateStyle()}function Jt(t){if(!t.isOxygenThemeActive())return;if(b(t.app,"theme")==="system")document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let i=b(t.app,"theme")==="moonstone"?"obsidian":"moonstone";E(t.app,i),y(t.app,"theme",i)}t.app.workspace.trigger("css-change")}function yt(t){t.addCommand({id:p.CYCLE_TABLE_WIDTH,name:"Cycle between table width options",callback:()=>{let s=(we.indexOf(t.settings.tableWidth)+1)%we.length;t.settings.tableWidth=we[s],t.saveData(t.settings),ge(t)}}),t.addCommand({id:p.CYCLE_IMAGE_WIDTH,name:"Cycle between image width options",callback:()=>{let s=(Pe.indexOf(t.settings.imgWidth)+1)%Pe.length;t.settings.imgWidth=Pe[s],t.saveData(t.settings),ge(t)}}),t.addCommand({id:p.CYCLE_IFRAME_WIDTH,name:"Cycle between iframe width options",callback:()=>{let s=(Te.indexOf(t.settings.iframeWidth)+1)%Te.length;t.settings.iframeWidth=Te[s],t.saveData(t.settings),ge(t)}}),t.addCommand({id:p.CYCLE_CHART_WIDTH,name:"Cycle between chart width options",callback:()=>{let s=(De.indexOf(t.settings.chartWidth)+1)%De.length;t.settings.chartWidth=De[s],t.saveData(t.settings),ge(t)}}),t.addCommand({id:p.CYCLE_MAP_WIDTH,name:"Cycle between map width options",callback:()=>{let s=(Le.indexOf(t.settings.mapWidth)+1)%Le.length;t.settings.mapWidth=Le[s],t.saveData(t.settings),ge(t)}})}function ge(t){t.updateStyle()}function Et(t){ut(t),ft(t),vt(t),St(t),xt(t),yt(t)}var Je=class extends kt.Plugin{constructor(){super(...arguments);this._isOxygenActive=!1;this._isInitialized=!1}onload(){return I(this,null,function*(){yield this.loadSettings(),this.styleManager=new Ue(this),this.themeManager=new Ye(this),this.settingsSyncManager=new Ke(this),this.addSettingTab(new Ge(this.app,this)),this._isOxygenActive=this.checkOxygenTheme(),this._isOxygenActive&&(this.styleManager.initialize(),this._isInitialized=!0),this.settingsSyncManager.setupWatchers(),this.settingsSyncManager.syncFromVault(!0),this.app.workspace.onLayoutReady(()=>{this._isOxygenActive&&this.themeManager.updateSidebarTheme()}),Et(this);let e;this.registerEvent(this.app.workspace.on("css-change",()=>{window.clearTimeout(e),e=window.setTimeout(()=>{let s=this.checkOxygenTheme();this._isOxygenActive&&!s?(this._isOxygenActive=!1,this._isInitialized=!1,this.styleManager.cleanup()):!this._isOxygenActive&&s&&!this._isInitialized&&(this._isOxygenActive=!0,this._isInitialized=!0,this.styleManager.initialize())},100)}))})}onunload(){this.themeManager.cleanupSidebarTheme(),this.styleManager.cleanup(),this.settingsSyncManager.cleanup()}loadSettings(){return I(this,null,function*(){this.settings=Object.assign({},_e,yield this.loadData()),this.settings.lightScheme==="minimal-default-light"&&(this.settings.lightScheme="minimal-minimal-light"),this.settings.darkScheme==="minimal-default-dark"&&(this.settings.darkScheme="minimal-minimal-dark"),this.settings.customPresets||(this.settings.customPresets=[]),this.settings.enableCustomPresets===void 0&&(this.settings.enableCustomPresets=!0)})}saveSettings(){return I(this,null,function*(){yield this.saveData(this.settings)})}refresh(){this.styleManager.refresh()}updateStyle(){this.styleManager.updateStyle()}updateLightStyle(){this.styleManager.updateLightStyle()}updateDarkStyle(){this.styleManager.updateDarkStyle()}updateLightScheme(){this.styleManager.updateLightScheme()}updateDarkScheme(){this.styleManager.updateDarkScheme()}updateCustomPresetCSS(){this.styleManager.updateCustomPresetCSS()}setFontSize(){this.settingsSyncManager.setFontSize()}isOxygenThemeActive(){return this._isOxygenActive}checkOxygenTheme(){return this.app.vault.getConfig("cssTheme")===mt}};
