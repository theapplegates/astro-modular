/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Ve=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var bt=Object.getOwnPropertyNames;var vt=Object.prototype.hasOwnProperty;var Ft=(_,a)=>()=>(_&&(a=_(_=0)),a);var ne=(_,a)=>{for(var e in a)Ve(_,e,{get:a[e],enumerable:!0})},Mt=(_,a,e,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of bt(a))!vt.call(_,o)&&o!==e&&Ve(_,o,{get:()=>a[o],enumerable:!(t=Et(a,o))||t.enumerable});return _};var wt=_=>Mt(Ve({},"__esModule",{value:!0}),_);var ze={};ne(ze,{GiscusScriptParser:()=>Ue});var Ue,We=Ft(()=>{"use strict";Ue=class{static parseScript(a){try{let e=a.trim();if(!e.includes("giscus.app/client.js"))return null;let t={},o=/data-([a-z-]+)="([^"]*)"/g,n;for(;(n=o.exec(e))!==null;){let[,s,r]=n;t[s]=r}let i={repo:t.repo||"",repoId:t["repo-id"]||"",category:t.category||"",categoryId:t["category-id"]||"",mapping:t.mapping||"pathname",strict:t.strict||"0",reactions:t["reactions-enabled"]||"1",metadata:t["emit-metadata"]||"0",inputPosition:t["input-position"]||"bottom",theme:t.theme||"preferred_color_scheme",lang:t.lang||"en",loading:t.loading||"lazy"};return!i.repo||!i.repoId?null:i}catch(e){return console.error("Error parsing Giscus script:",e),null}}static validateScript(a){let e=a.trim();if(!e.includes("giscus.app/client.js"))return{valid:!1,error:"Script must contain giscus.app/client.js"};if(!e.includes("<script")||!e.includes("<\/script>"))return{valid:!1,error:"Script must be a valid HTML script tag"};let t=this.parseScript(a);return t?t.repo?t.repoId?{valid:!0}:{valid:!1,error:"Repository ID (data-repo-id) is required"}:{valid:!1,error:"Repository (data-repo) is required"}:{valid:!1,error:"Could not parse Giscus configuration from script"}}static getSampleScript(){return`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`}}});var zt={};ne(zt,{default:()=>$e});module.exports=wt(zt);var _t=require("obsidian");var oe=["Inter","Roboto","Open Sans","Lato","Poppins","Source Sans Pro","Nunito","Montserrat","Playfair Display","Merriweather","Lora","Crimson Text","PT Serif","Libre Baskerville","Fira Code","JetBrains Mono","Source Code Pro","IBM Plex Mono","Cascadia Code"],se={runWizardOnStartup:!0,currentTemplate:"standard",currentTheme:"oxygen",customThemeFile:"custom",contentOrganization:"file-based",siteInfo:{site:"https://astro-modular.netlify.app",title:"Astro Modular",description:"A flexible blog theme designed for Obsidian users.",author:"David V. Kimball",language:"en"},layout:{contentWidth:"45rem"},tableOfContents:{enabled:!0,depth:4},footer:{enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0},seo:{defaultOgImageAlt:"Astro Modular logo."},navigation:{showNavigation:!0,style:"traditional",showMobileMenu:!0,pages:[{title:"Posts",url:"/posts"},{title:"Projects",url:"/projects"},{title:"Docs",url:"/docs"},{title:"About",url:"/about"},{title:"GitHub",url:"https://github.com/davidvkimball/astro-modular"}],social:[{title:"X",url:"https://x.com/davidvkimball",icon:"x-twitter"},{title:"GitHub",url:"https://github.com/davidvkimball",icon:"github"}]},commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},homeOptions:{featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,comments:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,featureButton:"mode",showSocialIconsInFooter:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",profilePicture:!1,quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},typography:{headingFont:"Inter",proseFont:"Inter",monoFont:"JetBrains Mono",fontSource:"local",fontDisplay:"swap",customFonts:{heading:"",prose:"",mono:"",urls:""}},optionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},deployment:{platform:"netlify"},pluginConfig:{obsidianSettings:{attachmentLocation:"subfolder",subfolderName:"attachments"},astroComposerSettings:{creationMode:"file",indexFileName:"index"},imageInserterSettings:{valueFormat:"[[attachments/{image-url}]]",insertFormat:"[[attachments/{image-url}]]"}},optionalContentTypes:{projects:!0,docs:!0},availableThemes:"all"},B=[{id:"oxygen",name:"Oxygen",description:"Modern, clean design",previewColors:["#075985","#38bdf8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#020617"},{id:"minimal",name:"Minimal",description:"Understated with high contrast",previewColors:["#2d383c","#87bfcf"],backgroundColorLight:"#fafafa",backgroundColorDark:"#1a1a1a"},{id:"atom",name:"Atom",description:"Dark theme with vibrant accents",previewColors:["#075985","#578af2"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#181a1f"},{id:"ayu",name:"Ayu",description:"Clean theme with warm colors",previewColors:["#99521a","#ff9933"],backgroundColorLight:"#f8f8f0",backgroundColorDark:"#0f1419"},{id:"catppuccin",name:"Catppuccin",description:"Pastel color palette",previewColors:["#95624f","#df7763"],backgroundColorLight:"#fef7ed",backgroundColorDark:"#181825"},{id:"charcoal",name:"Charcoal",description:"Dark, professional look",previewColors:["#202020","#c0c0c0"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#000000"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents",previewColors:["#7c3aed","#a78bfa"],backgroundColorLight:"#f8f8f2",backgroundColorDark:"#191a21"},{id:"everforest",name:"Everforest",description:"Soft, warm colors",previewColors:["#5a7a5a","#83c092"],backgroundColorLight:"#f7f6f3",backgroundColorDark:"#2d353b"},{id:"flexoki",name:"Flexoki",description:"Based on Material Design 3",previewColors:["#16504a","#4dbdb5"],backgroundColorLight:"#fefefe",backgroundColorDark:"#100f0f"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove color scheme",previewColors:["#7a5412","#f78b33"],backgroundColorLight:"#fbf1c7",backgroundColorDark:"#1d2021"},{id:"macos",name:"macOS",description:"Native macOS appearance",previewColors:["#002e66","#339fff"],backgroundColorLight:"#f5f5f7",backgroundColorDark:"#141414"},{id:"nord",name:"Nord",description:"Arctic-inspired color palette",previewColors:["#2e4c63","#5e94b8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#2e3440"},{id:"obsidian",name:"Obsidian",description:"Matches Obsidian's default theme",previewColors:["#522994","#9c75ff"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#0a0a0a"},{id:"rose-pine",name:"Ros\xE9 Pine",description:"All natural pine, faux fir, and winter",previewColors:["#ab2142","#ef97a9"],backgroundColorLight:"#faf4ed",backgroundColorDark:"#191724"},{id:"sky",name:"Sky",description:"Light, airy design",previewColors:["#136194","#46aad0"],backgroundColorLight:"#f0f9ff",backgroundColorDark:"#232729"},{id:"solarized",name:"Solarized",description:"Precision colors for machines and people",previewColors:["#0e3754","#339fff"],backgroundColorLight:"#fdf6e3",backgroundColorDark:"#002b36"},{id:"things",name:"Things",description:"Clean, minimal design",previewColors:["#1e3a8a","#4d95f7"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#17191c"},{id:"custom",name:"Custom",description:"Use a custom theme file",previewColors:["#666666","#999999"],backgroundColorLight:"#ffffff",backgroundColorDark:"#000000"}],z=[{id:"standard",name:"Standard",description:"Full-featured blog with all default options enabled",features:["Command palette","Table of contents","Reading time","Linked mentions","Footer","Social icons","Scroll to top","Dark mode toggle"],recommended:!0},{id:"compact",name:"Compact",description:"Balanced setup for smaller sites with optimized layout",features:["Command palette","Table of contents","Reading time","Compact linked mentions","Custom aspect ratio"],recommended:!1},{id:"minimal",name:"Minimal",description:"Clean, simple blog with minimal features and content",features:["Command palette","Search posts/pages","Minimal navigation"],recommended:!1},{id:"custom",name:"Custom",description:"Granular control over every setting - opens config.ts",features:["All features configurable"],recommended:!1}];var Se=require("obsidian");var Nt=require("obsidian");var le=class{constructor(a){this.plugin=a;let e=a.settings;this.state={currentStep:1,totalSteps:10,selectedTemplate:e.currentTemplate,selectedTheme:e.currentTheme,selectedContentOrg:e.contentOrganization,selectedSiteInfo:e.siteInfo,selectedNavigation:e.navigation,selectedFeatures:(()=>{let t={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1},custom:{...e.features}};return t[e.currentTemplate]||t.standard})(),selectedTypography:e.typography,selectedOptionalFeatures:e.optionalFeatures||{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},selectedOptionalContentTypes:(()=>{let t=e.currentTemplate==="standard"||e.currentTemplate==="custom";return{projects:t,docs:t}})(),selectedDeployment:e.deployment.platform,runWizardOnStartup:e.runWizardOnStartup}}getState(){return this.state}updateState(a){this.state={...this.state,...a}}setState(a){this.state={...this.state,...a}}nextStep(){this.state.currentStep<this.state.totalSteps&&this.state.currentStep++}previousStep(){this.state.currentStep>1&&this.state.currentStep--}canGoNext(){return this.state.currentStep<this.state.totalSteps}canGoPrevious(){return this.state.currentStep>1}getProgress(){return this.state.currentStep/this.state.totalSteps*100}buildFinalSettings(){var e,t;let a=this.plugin.settings;a.currentTemplate=this.state.selectedTemplate,a.currentTheme=this.state.selectedTheme,a.contentOrganization=this.state.selectedContentOrg,a.siteInfo=this.state.selectedSiteInfo,a.navigation=this.state.selectedNavigation,a.features=this.state.selectedFeatures,a.typography=this.state.selectedTypography,a.optionalFeatures=this.state.selectedOptionalFeatures,a.deployment.platform=this.state.selectedDeployment,a.runWizardOnStartup=this.state.runWizardOnStartup,(e=a.optionalFeatures)!=null&&e.profilePicture&&(a.features.profilePicture=a.optionalFeatures.profilePicture.enabled),(t=a.optionalFeatures)!=null&&t.comments&&(a.features.comments=a.optionalFeatures.comments.enabled),a.optionalContentTypes=this.state.selectedOptionalContentTypes}};var G=class{constructor(a,e,t,o){this.app=a,this.modal=e,this.stateManager=t,this.plugin=o}nextStep(){this.stateManager.nextStep(),this.modal.close()}previousStep(){this.stateManager.previousStep(),this.modal.close()}updateState(a){this.stateManager.updateState(a)}getState(){return this.stateManager.getState()}};var ce=class extends G{render(a){var t,o,n,i,s,r;let e=this.getState();a.innerHTML=`
			<div class="welcome-content">
				<h2>Welcome to Astro Modular!</h2>
				<p>This wizard will help you set up your Astro Modular theme with the perfect configuration for your needs.</p>
				
				<div class="checkbox-option">
					<input type="checkbox" id="run-wizard-startup" ${e.runWizardOnStartup?"checked":""}>
					<label for="run-wizard-startup">Run this wizard on startup</label>
				</div>
				
				<div class="site-info-form">
					<h3>Site Information</h3>
					<div class="form-group">
						<label for="site-url">URL</label>
						<input type="text" id="site-url" value="${e.selectedSiteInfo.site}" placeholder="https://astro-modular.netlify.app">
					</div>
					<div class="form-group">
						<label for="site-title">Title</label>
						<input type="text" id="site-title" value="${e.selectedSiteInfo.title}" placeholder="Astro Modular">
					</div>
					<div class="form-group">
						<label for="site-description">Description</label>
						<input type="text" id="site-description" value="${e.selectedSiteInfo.description}" placeholder="A flexible blog theme designed for Obsidian users.">
					</div>
					<div class="form-group">
						<label for="site-author">Author Name</label>
						<input type="text" id="site-author" value="${e.selectedSiteInfo.author}" placeholder="David V. Kimball">
					</div>
					<div class="form-group">
						<label for="site-language">Language</label>
						<input type="text" id="site-language" value="${e.selectedSiteInfo.language}" placeholder="en">
					</div>
				</div>
			</div>
		`,(t=a.querySelector("#run-wizard-startup"))==null||t.addEventListener("change",l=>{let d=l.target;this.updateState({runWizardOnStartup:d.checked})}),(o=a.querySelector("#site-url"))==null||o.addEventListener("input",l=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,site:l.target.value}})}),(n=a.querySelector("#site-title"))==null||n.addEventListener("input",l=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,title:l.target.value}})}),(i=a.querySelector("#site-description"))==null||i.addEventListener("input",l=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,description:l.target.value}})}),(s=a.querySelector("#site-author"))==null||s.addEventListener("input",l=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,author:l.target.value}})}),(r=a.querySelector("#site-language"))==null||r.addEventListener("input",l=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,language:l.target.value}})})}};var Be=require("obsidian"),pe=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="template-selection">
				<h2>Choose your preset</h2>
				<p>Select a preset that best fits your content type and goals.</p>
				<div class="template-options">
					${z.map(t=>`
						<div class="template-option ${e.selectedTemplate===t.id?"selected":""}" 
							 data-template="${t.id}">
							<div class="template-header">
								<h3>${t.name}</h3>
								${t.recommended?'<span class="recommended">Default</span>':""}
							</div>
							<p class="template-description">${t.description}</p>
							<div class="template-features">
								${t.features.map(o=>`<span class="feature-tag">${o}</span>`).join("")}
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".template-option").forEach(t=>{t.addEventListener("click",()=>{let o=t.getAttribute("data-template");if(o){this.updateState({selectedTemplate:o});let n=o==="standard"||o==="custom";if(this.updateState({selectedOptionalContentTypes:{projects:n,docs:n}}),this.syncFeaturesWithTemplate(o),this.updatePluginSettingsWithTemplate(o),o==="custom")try{let i=require("fs"),s=require("path"),{shell:r}=require("electron"),l=this.app.vault.adapter.basePath||this.app.vault.adapter.path,d=typeof l=="string"?l:l.toString(),f=s.join(d,"..","config.ts");i.existsSync(f)||i.writeFileSync(f,`// Astro Modular Configuration
// Customize your settings here

export const siteConfig = {
  // Add your configuration here
};
`),r.openPath(f),new Be.Notice("Opening config.ts for custom configuration"),this.modal.close();return}catch(i){new Be.Notice(`Error opening config file: ${i instanceof Error?i.message:String(i)}`)}this.render(a)}})})}syncFeaturesWithTemplate(a){let e=this.plugin.configManager.getTemplatePreset(a);if(!e||!e.config||!e.config.features){console.error("Template preset not found:",a);return}this.updateState({selectedFeatures:e.config.features})}async updatePluginSettingsWithTemplate(a){let e=this.plugin.settings,t=this.plugin.configManager.getTemplatePreset(a);if(!t||!t.config){console.error("Template preset not found:",a);return}if(t.config.features){let n=e.features.comments,i=e.features.profilePicture;e.features={...e.features,...t.config.features},e.features.comments=n,e.features.profilePicture=i}t.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...t.config.tableOfContents});let o=a==="standard"||a==="custom";e.optionalContentTypes={projects:o,docs:o},await this.plugin.saveData(e),this.refreshSettingsTab()}refreshSettingsTab(){let a=this.plugin.settingsTab;a&&typeof a.display=="function"&&a.display()}};var de=class extends G{render(a){let e=this.getState(),t=this.isObsidianDarkMode();a.innerHTML=`
			<div class="theme-selection">
				<h2>Choose your theme</h2>
				<p>Select a color scheme that matches your style and content.</p>
				<div class="theme-options">
					${B.map(o=>`
						<div class="theme-option ${e.selectedTheme===o.id?"selected":""}" 
							 data-theme="${o.id}" 
							 style="background: ${t?o.backgroundColorDark:o.backgroundColorLight};">
							<div class="theme-preview" style="background: linear-gradient(135deg, ${o.previewColors.join(", ")});">
								<div class="theme-preview-content">
									<div class="preview-text">Sample Text</div>
									<div class="preview-accent">Accent</div>
								</div>
							</div>
							<div class="theme-info">
								<h3>${o.name}</h3>
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".theme-option").forEach(o=>{o.addEventListener("click",()=>{let n=o.getAttribute("data-theme");n&&(this.updateState({selectedTheme:n}),this.render(a))})})}isObsidianDarkMode(){let a=document.body,e=a.classList.contains("theme-dark")||a.classList.contains("dark"),t=getComputedStyle(document.documentElement),n=t.getPropertyValue("color-scheme").trim()==="dark",i=t.getPropertyValue("--background-primary").trim(),s=Boolean(i&&(i.includes("#")&&parseInt(i.slice(1,3),16)<128||i.includes("rgb")&&i.includes("0, 0, 0")||i.includes("hsl")&&i.includes("0, 0%, 0%")));return e||n||s}};var ae=require("obsidian"),ue=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="font-selection">
				<h2>Choose your fonts</h2>
				<p>Select fonts for headings, body text, and code.</p>
			</div>
		`;let t=a.querySelector(".font-selection").createDiv("font-options"),o=(n,i,s,r)=>{new ae.Setting(t).setName(n).setDesc(i).addDropdown(l=>{oe.forEach(d=>{l.addOption(d,d)}),l.setValue(s).onChange(r)})};o("Heading Font","Font for headings and titles",e.selectedTypography.headingFont,n=>this.updateTypographySetting("headingFont",n,e)),o("Body Font","Font for body text and paragraphs",e.selectedTypography.proseFont,n=>this.updateTypographySetting("proseFont",n,e)),o("Monospace Font","Font for code blocks and inline code",e.selectedTypography.monoFont,n=>this.updateTypographySetting("monoFont",n,e)),new ae.Setting(t).setName("Font Source").setDesc("Choose how fonts are loaded").addDropdown(n=>{n.addOption("local","Local (Google Fonts)"),n.addOption("cdn","CDN (Custom)"),n.setValue(e.selectedTypography.fontSource).onChange(i=>{this.updateTypographySetting("fontSource",i,e),this.render(a)})}),e.selectedTypography.fontSource==="cdn"&&(new ae.Setting(t).setName("Custom Font URLs").setDesc("Comma-separated URLs for custom fonts").addText(n=>{var i;return n.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.urls)||"").setPlaceholder("https://fonts.googleapis.com/css2?family=Custom+Font:wght@400;600&display=swap").onChange(s=>this.updateCustomFontSetting("urls",s,e))}),new ae.Setting(t).setName("Custom Heading Font Name").setDesc("Font family name for headings").addText(n=>{var i;return n.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.heading)||"").setPlaceholder("Custom Heading Font").onChange(s=>this.updateCustomFontSetting("heading",s,e))}),new ae.Setting(t).setName("Custom Body Font Name").setDesc("Font family name for body text").addText(n=>{var i;return n.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.prose)||"").setPlaceholder("Custom Body Font").onChange(s=>this.updateCustomFontSetting("prose",s,e))}),new ae.Setting(t).setName("Custom Monospace Font Name").setDesc("Font family name for code").addText(n=>{var i;return n.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.mono)||"").setPlaceholder("Custom Monospace Font").onChange(s=>this.updateCustomFontSetting("mono",s,e))}))}updateTypographySetting(a,e,t){let o=this.getState();this.updateState({selectedTypography:{...o.selectedTypography,[a]:e}})}updateCustomFontSetting(a,e,t){let o=this.getState();this.updateState({selectedTypography:{...o.selectedTypography,customFonts:{...o.selectedTypography.customFonts,[a]:e}}})}};var ge=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="content-org-selection">
				<h2>Content organization</h2>
				<p>Choose how you want to organize your content and assets.</p>
				<div class="org-options">
					<div class="org-option ${e.selectedContentOrg==="file-based"?"selected":""}" 
						 data-org="file-based">
						<div class="org-header">
							<h3>File-based</h3>
							<span class="default-badge">Default</span>
						</div>
						<p>Single markdown files with images in attachments subfolder</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post.md
\u2514\u2500\u2500 attachments/
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
					<div class="org-option ${e.selectedContentOrg==="folder-based"?"selected":""}" 
						 data-org="folder-based">
						<div class="org-header">
							<h3>Folder-based</h3>
						</div>
						<p>Each post gets its own folder with co-located assets</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post/
\u2502   \u251C\u2500\u2500 index.md
\u2502   \u2514\u2500\u2500 image.jpg
\u2514\u2500\u2500 another-post/
    \u251C\u2500\u2500 index.md
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".org-option").forEach(t=>{t.addEventListener("click",()=>{let o=t.getAttribute("data-org");o&&(this.updateState({selectedContentOrg:o}),this.render(a))})})}};var me=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="navigation-selection">
				<h2>Navigation setup</h2>
				<p>Configure your site navigation and social links.</p>
				
				<div class="navigation-sections">
					<div class="nav-section">
						<h3>Navigation Pages</h3>
						<p>Add pages to your main navigation menu.</p>
						<div class="nav-items" id="pages-list">
							${e.selectedNavigation.pages.map((t,o)=>`
								<div class="nav-item" data-index="${o}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Page Title" value="${t.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="/page-url" value="${t.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${o}">Remove</button>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-page">+ Add Page</button>
					</div>
					
					<div class="nav-section">
						<h3>Social Links</h3>
						<p>Add social media links for your footer.</p>
						<div class="nav-items" id="social-list">
							${e.selectedNavigation.social.map((t,o)=>`
								<div class="nav-item" data-index="${o}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Social Title" value="${t.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="https://example.com" value="${t.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${o}">Remove</button>
									</div>
									<div class="nav-icon-row">
										<input type="text" class="nav-icon" placeholder="icon-name" value="${t.icon||""}" draggable="false">
										<div class="nav-icon-help">
											<small>Icon names from FontAwesome Brands</small>
										</div>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-social">+ Add Social Link</button>
					</div>
				</div>
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){var t,o,n,i;let e=this.getState();(t=a.querySelector("#pages-list"))==null||t.addEventListener("input",s=>{let r=s.target;if(r.classList.contains("nav-title")||r.classList.contains("nav-url")){let l=r.closest(".nav-item"),d=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),f=r.classList.contains("nav-title")?"title":"url";e.selectedNavigation.pages[d][f]=r.value}}),(o=a.querySelector("#social-list"))==null||o.addEventListener("input",s=>{let r=s.target;if(r.classList.contains("nav-title")||r.classList.contains("nav-url")||r.classList.contains("nav-icon")){let l=r.closest(".nav-item"),d=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),f=r.classList.contains("nav-title")?"title":r.classList.contains("nav-url")?"url":"icon";e.selectedNavigation.social[d][f]=r.value}}),(n=a.querySelector("#add-page"))==null||n.addEventListener("click",()=>{e.selectedNavigation.pages.push({title:"New Page",url:"/new-page"}),this.render(a)}),(i=a.querySelector("#add-social"))==null||i.addEventListener("click",()=>{e.selectedNavigation.social.push({title:"New Social",url:"https://example.com",icon:""}),this.render(a)}),a.addEventListener("click",s=>{let r=s.target;if(r.classList.contains("nav-remove")){let l=parseInt(r.getAttribute("data-index")||"0");r.closest("#pages-list")?e.selectedNavigation.pages.splice(l,1):e.selectedNavigation.social.splice(l,1),this.render(a)}}),this.setupDragAndDrop(a)}setupDragAndDrop(a){let e=this.getState(),t=null;a.addEventListener("dragstart",o=>{let n=o.target;n.classList.contains("nav-item")&&(t=n,n.style.opacity="0.5")}),a.addEventListener("dragend",o=>{let n=o.target;n.classList.contains("nav-item")&&(n.style.opacity="1",t=null)}),a.addEventListener("dragover",o=>{o.preventDefault();let n=o.target;if(n.classList.contains("nav-item")&&t&&n!==t){let i=n.getBoundingClientRect(),s=i.top+i.height/2;o.clientY<s?(n.style.borderTop="2px solid var(--interactive-accent)",n.style.borderBottom="none"):(n.style.borderBottom="2px solid var(--interactive-accent)",n.style.borderTop="none")}}),a.addEventListener("dragleave",o=>{let n=o.target;n.classList.contains("nav-item")&&(n.style.borderTop="none",n.style.borderBottom="none")}),a.addEventListener("drop",o=>{o.preventDefault();let n=o.target;if(n.classList.contains("nav-item")&&t){let i=parseInt(n.getAttribute("data-index")||"0"),s=parseInt(t.getAttribute("data-index")||"0"),r=n.closest("#pages-list"),l=n.closest("#social-list");if(n.style.borderTop="none",n.style.borderBottom="none",i!==s){if(r){let d=e.selectedNavigation.pages.splice(s,1)[0];e.selectedNavigation.pages.splice(i,0,d)}else if(l){let d=e.selectedNavigation.social.splice(s,1)[0];e.selectedNavigation.social.splice(i,0,d)}this.render(a)}}})}};var ie=require("obsidian"),fe=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="features-selection">
				<h2>Optional features</h2>
				<p>Enable or disable specific features for your site.</p>
			</div>
		`;let t=a.querySelector(".features-selection").createDiv("features-list");this.renderProfilePictureFeatureNative(t,e),this.renderCommentsFeatureNative(t,e)}renderProfilePictureFeatureNative(a,e){var s,r,l;let t=((r=(s=e.selectedOptionalFeatures)==null?void 0:s.profilePicture)==null?void 0:r.enabled)||!1,o=((l=e.selectedOptionalFeatures)==null?void 0:l.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"};new ie.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(d=>d.setValue(t).onChange(f=>{var c;this.updateState({selectedFeatures:{...e.selectedFeatures,profilePicture:f},selectedOptionalFeatures:{...e.selectedOptionalFeatures,profilePicture:{...(c=e.selectedOptionalFeatures)==null?void 0:c.profilePicture,enabled:f}}});let h=a.querySelector(".profile-picture-options");h&&(h.style.display=f?"block":"none")}));let n=a.createDiv("profile-picture-options");n.style.display=t?"block":"none",n.className="profile-picture-options";let i=(d,f,h,c)=>{let m=new ie.Setting(n).setName(d).setDesc(f);h==="text"?m.addText(O=>{var S;return O.setValue(o[d]||"").setPlaceholder(((S=c==null?void 0:c[0])==null?void 0:S.value)||"").onChange(v=>this.updateProfileSetting(d,v,e))}):m.addDropdown(O=>{c==null||c.forEach(S=>O.addOption(S.value,S.label)),O.setValue(o[d]).onChange(S=>this.updateProfileSetting(d,S,e))})};i("image","Image path","text",[{value:"/profile.jpg",label:"/profile.jpg"}]),i("alt","Alt text","text",[{value:"Profile picture",label:"Profile picture"}]),i("size","Size","dropdown",[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]),i("url","URL (optional)","text",[{value:"https://example.com",label:"https://example.com"}]),i("placement","Placement","dropdown",[{value:"footer",label:"Footer"},{value:"header",label:"Header"}]),i("style","Style","dropdown",[{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"none",label:"None"}])}updateProfileSetting(a,e,t){var o;this.updateState({selectedOptionalFeatures:{...t.selectedOptionalFeatures,profilePicture:{...(o=t.selectedOptionalFeatures)==null?void 0:o.profilePicture,[a]:e}}})}renderCommentsFeatureNative(a,e){var c,m,O;let t=((m=(c=e.selectedOptionalFeatures)==null?void 0:c.comments)==null?void 0:m.enabled)||!1,o=((O=e.selectedOptionalFeatures)==null?void 0:O.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"};new ie.Setting(a).setName("Comments").setDesc("Enable Giscus comment system for posts").addToggle(S=>S.setValue(t).onChange(v=>{var P;this.updateState({selectedFeatures:{...e.selectedFeatures,comments:v},selectedOptionalFeatures:{...e.selectedOptionalFeatures,comments:{...(P=e.selectedOptionalFeatures)==null?void 0:P.comments,enabled:v}}});let b=a.querySelector(".comments-options");b&&(b.style.display=v?"block":"none")}));let n=a.createDiv("comments-options");n.style.display=t?"block":"none",n.className="comments-options";let i=n.createDiv("comments-instructions");i.style.marginBottom="15px",i.style.padding="10px",i.style.background="var(--background-modifier-border)",i.style.borderRadius="4px",i.style.borderLeft="3px solid var(--interactive-accent)";let s=i.createEl("p");s.style.margin="0",s.style.fontSize="13px",s.style.color="var(--text-muted)",s.style.whiteSpace="pre-line",s.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let r=s.querySelector("a");r&&(r.addEventListener("mouseenter",()=>{r.style.textDecoration="underline"}),r.addEventListener("mouseleave",()=>{r.style.textDecoration="none"}));let d=new ie.Setting(n).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});d.style.width="100%",d.style.fontFamily="var(--font-monospace)",d.style.fontSize="12px",d.style.padding="8px",d.style.border="1px solid var(--background-modifier-border)",d.style.borderRadius="4px",d.style.background="var(--background-primary)",d.style.color="var(--text-normal)",d.style.resize="none",d.value=o.rawScript||"";let f=n.createDiv("script-validation");f.style.marginTop="8px",f.style.fontSize="12px";let h=async()=>{let S=d.value.trim();if(!S){f.innerHTML="",this.updateCommentSetting("rawScript","",e);return}let{GiscusScriptParser:v}=await Promise.resolve().then(()=>(We(),ze)),b=v.validateScript(S);if(b.valid){f.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let P=v.parseScript(S);P&&(this.updateCommentSetting("rawScript",S,e),this.updateCommentSetting("repo",P.repo,e),this.updateCommentSetting("repoId",P.repoId,e),this.updateCommentSetting("category",P.category,e),this.updateCommentSetting("categoryId",P.categoryId,e),this.updateCommentSetting("mapping",P.mapping,e),this.updateCommentSetting("strict",P.strict,e),this.updateCommentSetting("reactions",P.reactions,e),this.updateCommentSetting("metadata",P.metadata,e),this.updateCommentSetting("inputPosition",P.inputPosition,e),this.updateCommentSetting("theme",P.theme,e),this.updateCommentSetting("lang",P.lang,e),this.updateCommentSetting("loading",P.loading,e))}else f.innerHTML=`<span style="color: var(--text-error)">\u2717 ${b.error}</span>`};d.addEventListener("input",h),h()}updateCommentSetting(a,e,t){var o;this.updateState({selectedOptionalFeatures:{...t.selectedOptionalFeatures,comments:{...(o=t.selectedOptionalFeatures)==null?void 0:o.comments,[a]:e}}})}};var he=class extends G{render(a){let e=this.getState();a.innerHTML=`
			<div class="deployment-selection">
				<h2>Deployment platform</h2>
				<p>Choose your preferred deployment platform.</p>
				<div class="deployment-options">
					<div class="deployment-option ${e.selectedDeployment==="netlify"?"selected":""}" 
						 data-deployment="netlify">
						<div class="deployment-header">
							<h3>Netlify</h3>
						</div>
						<p>Automatic deployments from Git with built-in form handling and serverless functions.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="vercel"?"selected":""}" 
						 data-deployment="vercel">
						<div class="deployment-header">
							<h3>Vercel</h3>
						</div>
						<p>Excellent performance with edge functions and automatic HTTPS.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="github-pages"?"selected":""}" 
						 data-deployment="github-pages">
						<div class="deployment-header">
							<h3>GitHub Pages</h3>
						</div>
						<p>Free hosting directly from your GitHub repository.</p>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".deployment-option").forEach(t=>{t.addEventListener("click",()=>{let o=t.getAttribute("data-deployment");o&&(this.updateState({selectedDeployment:o}),this.render(a))})})}};var re=require("obsidian"),Oe=class extends G{async render(a){let e=this.getState(),t=await this.plugin.pluginManager.getPluginStatus();a.innerHTML=`
			<div class="plugin-config">
				<h2>Plugin configuration</h2>
				<p>Configure your Obsidian plugins for optimal integration.</p>
				
				<div class="plugin-status">
      ${t.map(o=>`
						<div class="plugin-item ${o.installed?"installed":"missing"}">
							<div class="plugin-icon">
								${o.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>'}
							</div>
							<div class="plugin-info">
								<h3>${o.name}</h3>
								<p>${o.installed?o.enabled?"Enabled":"Disabled":"Not installed"}</p>
							</div>
						</div>
					`).join("")}
				</div>
				
				<div class="config-options">
					<button class="mod-button mod-cta" id="configure-plugins">Configure Automatically</button>
					<button class="mod-button" id="show-instructions">Show Manual Instructions</button>
				</div>
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){var t,o;let e=this.getState();(t=a.querySelector("#configure-plugins"))==null||t.addEventListener("click",async()=>{try{let n=e.selectedContentOrg,i={obsidianSettings:{attachmentLocation:n==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:n==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(i)){let r=e.selectedContentOrg,l=r==="file-based"?"subfolder (attachments/)":"same folder",d=r==="file-based"?"file":"folder";new re.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${l}
\u2022 Astro Composer: Creation mode \u2192 ${d}
\u2022 Image Inserter: Format updated for ${r}`,8e3)}else new re.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)}catch(n){new re.Notice(`Error configuring plugins: ${n instanceof Error?n.message:String(n)}`)}}),(o=a.querySelector("#show-instructions"))==null||o.addEventListener("click",async()=>{try{let n=e.selectedContentOrg,i={obsidianSettings:{attachmentLocation:n==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:n==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:n==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},s=await this.plugin.pluginManager.getManualConfigurationInstructions(i),{Modal:r}=require("obsidian"),l=new r(this.app);l.titleEl.setText("Manual Configuration Instructions");let d=l.contentEl.createDiv();d.style.padding="20px",d.style.lineHeight="1.6";let f=s.split(`
`),h=null;f.forEach(c=>{let m=c.trim();if(m==="")d.createEl("br");else if(m.startsWith("## ")){h&&(h=null);let O=d.createEl("h2");O.setText(m.substring(3)),O.style.marginTop="20px",O.style.marginBottom="10px",O.style.fontSize="1.2em",O.style.fontWeight="bold"}else if(m.match(/^\d+\.\s/)){if(h||(h=d.createEl("ol"),h&&(h.style.marginLeft="20px",h.style.marginBottom="15px")),h){let O=h.createEl("li");O.style.marginBottom="5px",this.parseBoldText(O,m.replace(/^\d+\.\s/,""))}}else if(m.startsWith("- ")||m.startsWith("* ")){if(h||(h=d.createEl("ul"),h&&(h.style.marginLeft="20px",h.style.marginBottom="15px")),h){let O=h.createEl("li");O.style.marginBottom="5px",this.parseBoldText(O,m.substring(2))}}else{h&&(h=null);let O=d.createEl("p");O.style.marginBottom="10px",this.parseBoldText(O,m)}}),l.open()}catch(n){new re.Notice(`Error getting instructions: ${n instanceof Error?n.message:String(n)}`)}})}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(o=>{o.startsWith("**")&&o.endsWith("**")?a.createEl("strong").setText(o.substring(2,o.length-2)):o.trim()!==""&&a.appendText(o)})}};var Te=require("obsidian");var Ce=class extends G{render(a){let e=this.getState(),t=this.formatTemplateName(e.selectedTemplate),o=this.formatThemeName(e.selectedTheme),n=this.formatContentOrganization(e.selectedContentOrg),i=this.formatDeploymentName(e.selectedDeployment);a.innerHTML=`
			<div class="finalize-step">
				<h2>Finalize your configuration</h2>
				<p>Review your settings and complete the setup.</p>
				
				<div class="config-summary">
					<h3>Configuration Summary</h3>
					<div class="config-item">
						<strong>Template:</strong> ${t}
					</div>
					<div class="config-item">
						<strong>Theme:</strong> ${o}
					</div>
					<div class="config-item">
						<strong>Content Organization:</strong> ${n}
					</div>
					<div class="config-item">
						<strong>Deployment:</strong> ${i}
					</div>
					<div class="config-item">
						<strong>Site Title:</strong> ${e.selectedSiteInfo.title}
					</div>
					<div class="config-item">
						<strong>Site URL:</strong> ${e.selectedSiteInfo.site}
					</div>
				</div>
				
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){}async completeWizard(){let a=this.getState();try{this.stateManager.buildFinalSettings();let e=this.plugin.settings;await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new Te.Notice("Configuration applied successfully!"):new Te.Notice("Failed to apply configuration. Check the console for errors."),this.stateManager.updateState({currentStep:this.stateManager.getState().totalSteps})}catch(e){new Te.Notice(`Error completing wizard: ${e instanceof Error?e.message:String(e)}`)}}formatTemplateName(a){let e=z.find(t=>t.id===a);return e?e.name:a}formatThemeName(a){let e=B.find(t=>t.id===a);return e?e.name:a}formatContentOrganization(a){return a==="file-based"?"File-based":"Folder-based"}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return a}}};var W=class extends Nt.Modal{constructor(e,t){super(e);this.plugin=t,this.stateManager=new le(t),this.steps=[new ce(e,this,this.stateManager,this.plugin),new pe(e,this,this.stateManager,this.plugin),new de(e,this,this.stateManager,this.plugin),new ue(e,this,this.stateManager,this.plugin),new ge(e,this,this.stateManager,this.plugin),new me(e,this,this.stateManager,this.plugin),new fe(e,this,this.stateManager,this.plugin),new he(e,this,this.stateManager,this.plugin),new Oe(e,this,this.stateManager,this.plugin),new Ce(e,this,this.stateManager,this.plugin)]}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("astro-modular-wizard"),this.renderCurrentStep()}onClose(){let{contentEl:e}=this;e.empty()}renderCurrentStep(){let{contentEl:e}=this,t=this.stateManager.getState();e.empty(),e.addClass("astro-modular-wizard"),this.renderHeader(e),this.renderProgress(e);let o=e.createDiv("wizard-content");this.renderStepContent(o),this.renderFooter(e)}renderHeader(e){let t=e.createDiv("wizard-header");t.innerHTML=`
			<h1>Astro Modular Setup</h1>
		`}renderProgress(e){let t=this.stateManager.getState(),o=e.createDiv("wizard-progress");o.innerHTML=`
			<div class="progress-bar">
				<div class="progress-fill" style="width: ${this.stateManager.getProgress()}%"></div>
			</div>
			<div class="progress-text">Step ${t.currentStep} of ${t.totalSteps}</div>
		`}async renderStepContent(e){let o=this.stateManager.getState().currentStep-1;o>=0&&o<this.steps.length&&await this.steps[o].render(e)}renderFooter(e){let t=this.stateManager.getState(),n=e.createDiv("wizard-footer").createDiv("wizard-buttons");if(this.stateManager.canGoPrevious()&&n.createEl("button",{text:"Previous",cls:"mod-button"}).addEventListener("click",()=>{this.stateManager.previousStep(),this.renderCurrentStep()}),this.stateManager.canGoNext()?n.createEl("button",{text:"Next",cls:"mod-button mod-cta"}).addEventListener("click",()=>{this.stateManager.nextStep(),this.renderCurrentStep()}):n.createEl("button",{text:"Complete Setup",cls:"mod-button mod-cta"}).addEventListener("click",async()=>{await this.steps[this.steps.length-1].completeWizard(),await this.plugin.saveData(this.plugin.settings),this.plugin.triggerSettingsRefresh(),this.close()}),this.stateManager.canGoNext()&&t.currentStep>1){let i=n.createEl("button",{text:"Skip",cls:"mod-button"});i.style.opacity="0.6",i.addEventListener("click",()=>{this.applyDefaultValuesForCurrentStep(),this.stateManager.nextStep(),this.renderCurrentStep()})}}applyDefaultValuesForCurrentStep(){switch(this.stateManager.getState().currentStep-1){case 1:this.stateManager.setState({selectedTemplate:"standard"});break;case 2:this.stateManager.setState({selectedTheme:"oxygen"});break;case 3:this.stateManager.setState({selectedTypography:{fontSource:"local",proseFont:"Inter",headingFont:"Inter",monoFont:"JetBrains Mono",customFonts:{prose:"",heading:"",mono:"",urls:""}}});break;case 4:this.stateManager.setState({selectedContentOrg:"file-based"});break;case 5:break;case 6:this.stateManager.setState({selectedOptionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus"}}});break;case 7:this.stateManager.setState({selectedDeployment:"netlify"});break;case 8:break}}};function yt(_){_.addCommand({id:"open-settings",name:"Open Astro Modular Settings",callback:()=>{_.app.setting.open(),_.app.setting.openTabById(_.manifest.id)}}),_.addCommand({id:"run-setup-wizard",name:"Run Setup Wizard",callback:()=>{new W(_.app,_).open()}}),_.addCommand({id:"open-config",name:"Open config.ts",callback:async()=>{_.app.vault.getAbstractFileByPath("astro.config.ts")?await _.app.workspace.openLinkText("","astro.config.ts"):new Se.Notice("Config file not found. Make sure you have an Astro project in this vault.")}}),_.addCommand({id:"apply-configuration",name:"Apply Current Configuration",callback:async()=>{new Se.Notice("Configuration applied successfully!")}}),_.addCommand({id:"toggle-wizard-startup",name:"Toggle Wizard on Startup",callback:async()=>{let a=_.settings;a.runWizardOnStartup=!a.runWizardOnStartup,await _.saveData(a),new Se.Notice(`Wizard on startup ${a.runWizardOnStartup?"enabled":"disabled"}`)}})}var Pt=require("obsidian");var je=require("obsidian");var ee=require("obsidian"),x=class{constructor(a,e){this.app=a,this.plugin=e}getSettings(){return this.plugin.settings||this.plugin.data||{}}async applyCurrentConfiguration(a=!1){try{let e=this.getSettings();console.log("\u{1F527} applyCurrentConfiguration called with settings:",{currentTheme:e.currentTheme,optionalContentTypes:e.optionalContentTypes,features:e.features}),await this.plugin.configManager.updateIndividualFeatures(e)?(a&&new ee.Notice("Configuration applied successfully!"),await this.plugin.configManager.triggerRebuild()):a&&new ee.Notice("Failed to apply configuration. Check the console for errors.")}catch(e){a&&new ee.Notice(`Error applying configuration: ${e instanceof Error?e.message:String(e)}`)}}createDropdownSetting(a,e,t,o,n,i){return new ee.Setting(a).setName(e).setDesc(t).addDropdown(s=>(Object.entries(n).forEach(([r,l])=>{s.addOption(r,l)}),s.setValue(o),s.onChange(async r=>{i(r),await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!0)}),s))}createTextSetting(a,e,t,o,n,i=1e3){return new ee.Setting(a).setName(e).setDesc(t).addText(s=>{s.setValue(o);let r=null;return s.onChange(async l=>{r&&clearTimeout(r),n(l),await this.plugin.saveData(this.getSettings()),r=window.setTimeout(async()=>{await this.applyCurrentConfiguration(!0)},i)}),s.inputEl.addEventListener("blur",async()=>{r&&(clearTimeout(r),await this.applyCurrentConfiguration(!0))}),s})}createToggleSetting(a,e,t,o,n){return new ee.Setting(a).setName(e).setDesc(t).addToggle(i=>(i.setValue(o),i.onChange(async s=>{n(s),await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!0)}),i))}};var Ne=class extends x{render(a){var O,S;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"General Settings"}),n=t.createEl("p",{text:"Configure basic plugin behavior and view current status."}),s=a.createDiv("config-display").createDiv("config-info"),r=s.createEl("h3",{text:"Current Configuration"}),l=s.createDiv("config-item");l.createEl("strong",{text:"Template: "}),l.createSpan({text:((O=z.find(v=>v.id===e.currentTemplate))==null?void 0:O.name)||"Unknown"});let d=s.createDiv("config-item");d.createEl("strong",{text:"Theme: "}),d.createSpan({text:((S=B.find(v=>v.id===e.currentTheme))==null?void 0:S.name)||"Unknown"});let f=s.createDiv("config-item");f.createEl("strong",{text:"Organization: "}),f.createSpan({text:e.contentOrganization==="file-based"?"File-based":"Folder-based"});let h=s.createDiv("config-item");h.createEl("strong",{text:"Deployment: "}),h.createSpan({text:this.formatDeploymentName(e.deployment.platform)});let c=s.createDiv("config-item");c.createEl("strong",{text:"Site Title: "}),c.createSpan({text:e.siteInfo.title});let m=s.createDiv("config-item");m.createEl("strong",{text:"Site URL: "}),m.createSpan({text:e.siteInfo.site}),new je.Setting(a).setName("Setup wizard").setDesc("Run the setup wizard to reconfigure your theme").addButton(v=>v.setButtonText("Run Setup Wizard").setCta().onClick(async()=>{new W(this.app,this.plugin).open()})),new je.Setting(a).setName("Run wizard on startup").setDesc("Show the setup wizard when Obsidian starts (if not disabled)").addToggle(v=>v.setValue(e.runWizardOnStartup).onChange(async b=>{e.runWizardOnStartup=b,await this.plugin.saveData(e)}))}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return a}}};var ye=class extends x{render(a){a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"Site Information"}),n=t.createEl("p",{text:"Configure your site metadata and basic information. Changes are applied to your config.ts file immediately."});this.createTextSetting(a,"Site URL","Your site's base URL (e.g., https://yoursite.com)",e.siteInfo.site,i=>{e.siteInfo.site=i}),this.createTextSetting(a,"Site Title","Your site's title",e.siteInfo.title,i=>{e.siteInfo.title=i}),this.createTextSetting(a,"Site Description","A brief description of your site",e.siteInfo.description,i=>{e.siteInfo.description=i}),this.createTextSetting(a,"Author Name","Your name or the site author's name",e.siteInfo.author,i=>{e.siteInfo.author=i}),this.createTextSetting(a,"Language","Your site's primary language (ISO 639-1 code)",e.siteInfo.language,i=>{e.siteInfo.language=i})}};var U=require("obsidian");var Ie=class extends x{constructor(){super(...arguments);this.saveTimeoutId=null}render(e){e.empty();let t=this.getSettings(),o=e.createDiv("settings-section"),n=o.createEl("h2",{text:"Navigation"}),i=o.createEl("p",{text:"Configure your site navigation pages and social links. Changes are applied to your config.ts file immediately."}),s=e.createDiv("settings-section");s.createEl("h3",{text:"Navigation Pages"}),s.createEl("p",{text:"Add or remove pages from your main navigation menu."});let r=s.createDiv("nav-items");r.id="pages-list",r.innerHTML=`
			${t.navigation.pages.map((h,c)=>`
				<div class="nav-item" data-index="${c}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Page Title" value="${h.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="/page-url" value="${h.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${c}">Remove</button>
					</div>
				</div>
			`).join("")}
		`,new U.Setting(s).setName("Add Page").setDesc("Add a new page to your navigation").addButton(h=>h.setButtonText("+ Add Page").setCta().onClick(async()=>{t.navigation.pages.push({title:"New Page",url:"/new-page"}),await this.plugin.saveData(t),await this.applyCurrentConfiguration(),this.render(e)}));let l=e.createDiv("settings-section");l.createEl("h3",{text:"Social Links"}),l.createEl("p",{text:"Configure your social media links in the footer."});let d=l.createDiv("nav-items");d.id="social-list",d.innerHTML=`
			${t.navigation.social.map((h,c)=>`
				<div class="nav-item" data-index="${c}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Social Title" value="${h.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="https://example.com" value="${h.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${c}">Remove</button>
					</div>
					<div class="nav-icon-row">
						<input type="text" class="nav-icon" placeholder="icon-name" value="${h.icon||""}" draggable="false">
						<div class="nav-icon-help">
							<small>Icon names from FontAwesome Brands</small>
						</div>
					</div>
				</div>
			`).join("")}
		`,new U.Setting(l).setName("Add Social Link").setDesc("Add a new social media link").addButton(h=>h.setButtonText("+ Add Social Link").setCta().onClick(async()=>{t.navigation.social.push({title:"New Social",url:"https://example.com",icon:""}),await this.plugin.saveData(t),await this.applyCurrentConfiguration(),this.render(e)})),this.setupEventDelegation(e),this.setupDragAndDrop(e);let f=e.createDiv("settings-section");f.style.marginTop="30px",f.style.paddingTop="20px",f.style.borderTop="2px solid var(--background-modifier-border)",f.createEl("h3",{text:"Navigation Options"}),f.createEl("p",{text:"Configure how navigation appears on your site."}),new U.Setting(f).setName("Show navigation").setDesc("Display navigation menu on your site").addToggle(h=>{var c;return h.setValue((c=t.navigation.showNavigation)!=null?c:!0).onChange(async m=>{t.navigation.showNavigation=m,await this.plugin.saveData(t),await this.applyCurrentConfiguration(),new U.Notice(`Navigation ${m?"enabled":"disabled"} and applied to config.ts`)})}),new U.Setting(f).setName("Navigation style").setDesc("Choose between minimal or traditional navigation style").addDropdown(h=>h.addOption("traditional","Traditional").addOption("minimal","Minimal").setValue(t.navigation.style||"traditional").onChange(async c=>{t.navigation.style=c,await this.plugin.saveData(t),await this.applyCurrentConfiguration(),new U.Notice(`Navigation style changed to ${c} and applied to config.ts`)})),new U.Setting(f).setName("Show mobile menu").setDesc("Display mobile navigation menu on smaller screens").addToggle(h=>{var c;return h.setValue((c=t.navigation.showMobileMenu)!=null?c:!0).onChange(async m=>{t.navigation.showMobileMenu=m,await this.plugin.saveData(t),await this.applyCurrentConfiguration(),new U.Notice(`Mobile menu ${m?"enabled":"disabled"} and applied to config.ts`)})})}setupDragAndDrop(e){let t=null;e.addEventListener("dragstart",o=>{let n=o.target;n.classList.contains("nav-item")&&(t=n,n.style.opacity="0.5")}),e.addEventListener("dragend",o=>{let n=o.target;n.classList.contains("nav-item")&&(n.style.opacity="1",t=null)}),e.addEventListener("dragover",o=>{o.preventDefault();let n=o.target;if(n.classList.contains("nav-item")&&t&&n!==t){let i=n.getBoundingClientRect(),s=i.top+i.height/2;o.clientY<s?(n.style.borderTop="2px solid var(--interactive-accent)",n.style.borderBottom="none"):(n.style.borderBottom="2px solid var(--interactive-accent)",n.style.borderTop="none")}}),e.addEventListener("dragleave",o=>{let n=o.target;n.classList.contains("nav-item")&&(n.style.borderTop="none",n.style.borderBottom="none")}),e.addEventListener("drop",async o=>{o.preventDefault();let n=o.target;if(n.classList.contains("nav-item")&&t){let i=parseInt(n.getAttribute("data-index")||"0"),s=parseInt(t.getAttribute("data-index")||"0"),r=n.closest("#pages-list"),l=n.closest("#social-list");if(n.style.borderTop="none",n.style.borderBottom="none",i!==s){let d=this.getSettings();if(r){let f=[...d.navigation.pages],h=f.splice(s,1)[0];f.splice(i,0,h),d.navigation.pages=f}else if(l){let f=[...d.navigation.social],h=f.splice(s,1)[0];f.splice(i,0,h),d.navigation.social=f}await this.plugin.saveData(d),await this.applyCurrentConfiguration(),this.render(e)}}})}setupEventDelegation(e){var o,n;let t=this.getSettings();(o=e.querySelector("#pages-list"))==null||o.addEventListener("input",i=>{let s=i.target;if(s.classList.contains("nav-title")||s.classList.contains("nav-url")){let r=s.closest(".nav-item"),l=parseInt((r==null?void 0:r.getAttribute("data-index"))||"0"),d=s.classList.contains("nav-title")?"title":"url";t.navigation.pages[l][d]=s.value,this.debouncedSave()}}),(n=e.querySelector("#social-list"))==null||n.addEventListener("input",i=>{let s=i.target;if(s.classList.contains("nav-title")||s.classList.contains("nav-url")||s.classList.contains("nav-icon")){let r=s.closest(".nav-item"),l=parseInt((r==null?void 0:r.getAttribute("data-index"))||"0"),d=s.classList.contains("nav-title")?"title":s.classList.contains("nav-url")?"url":"icon";t.navigation.social[l][d]=s.value,this.debouncedSave()}}),e.addEventListener("click",async i=>{let s=i.target;if(s.classList.contains("nav-remove")){let r=s.closest(".nav-item"),l=parseInt((r==null?void 0:r.getAttribute("data-index"))||"0");(r==null?void 0:r.closest("#pages-list"))?t.navigation.pages.splice(l,1):t.navigation.social.splice(l,1),await this.plugin.saveData(t),await this.applyCurrentConfiguration(),this.render(e)}})}debouncedSave(){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=window.setTimeout(async()=>{await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!1)},1e3)}};var L=require("obsidian");var It=require("obsidian"),Pe=class extends It.Modal{constructor(e,t,o,n){super(e);this.changes=t,this.onConfirm=o,this.onCancel=n}onOpen(){let{contentEl:e}=this;e.empty();let t=e.createEl("h2",{text:"Apply Template Preset"});t.style.marginTop="0";let o=e.createEl("p",{text:"Applying this template will change the following settings:"});o.style.marginBottom="16px";let n=e.createEl("ul");n.style.marginBottom="24px",n.style.paddingLeft="20px",this.changes.forEach(d=>{let f=n.createEl("li",{text:d});f.style.marginBottom="4px"});let i=e.createEl("p",{text:"Do you want to apply this template?"});i.style.fontWeight="bold",i.style.marginBottom="24px";let s=e.createDiv("modal-button-container");s.style.display="flex",s.style.gap="12px",s.style.justifyContent="flex-end";let r=s.createEl("button",{text:"Cancel"});r.className="mod-cta",r.addEventListener("click",()=>{this.onCancel(),this.close()});let l=s.createEl("button",{text:"Continue"});l.className="mod-warning",l.addEventListener("click",()=>{this.onConfirm(),this.close()}),l.focus()}onClose(){let{contentEl:e}=this;e.empty()}};var _e=class extends x{render(a){var i;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"Configuration"}),n=t.createEl("p",{text:"Configure your template and content organization. Changes are applied to your config.ts file immediately."});new L.Setting(a).setName("Template").setDesc("Choose your content template").addDropdown(s=>{z.forEach(r=>{s.addOption(r.id,r.name)}),s.setValue(e.currentTemplate),s.onChange(async r=>{let l=this.getTemplateChanges(r);new Pe(this.app,l,async()=>{try{await this.updatePluginSettingsWithTemplate(r),await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new L.Notice(`Template changed to ${r} and applied to config.ts`):new L.Notice("Failed to apply template to config.ts")}catch(f){new L.Notice(`Failed to apply template change: ${f instanceof Error?f.message:String(f)}`),s.setValue(e.currentTemplate)}},()=>{s.setValue(e.currentTemplate)}).open()})}),new L.Setting(a).setName("Content organization").setDesc("Choose how to organize your content and assets").addDropdown(s=>{s.addOption("file-based","File-based"),s.addOption("folder-based","Folder-based"),s.setValue(e.contentOrganization),s.onChange(async r=>{e.contentOrganization=r,await this.plugin.saveData(e);let l=r,d={obsidianSettings:{attachmentLocation:l==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:l==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:l==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:l==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};try{await this.plugin.pluginManager.configurePlugins(d);let f=l==="file-based"?"subfolder (attachments/)":"same folder",h=l==="file-based"?"file":"folder";new L.Notice(`Content organization changed to ${r}

\u2022 Obsidian: Attachments \u2192 ${f}
\u2022 Astro Composer: Creation mode \u2192 ${h}
\u2022 Image Inserter: Format updated`,8e3)}catch(f){new L.Notice(`Failed to configure plugins for content organization: ${f instanceof Error?f.message:String(f)}`)}})}),new L.Setting(a).setName("Deployment").setDesc("Choose your deployment platform").addDropdown(s=>{s.addOption("netlify","Netlify"),s.addOption("vercel","Vercel"),s.addOption("github-pages","GitHub Pages"),s.setValue(e.deployment.platform),s.onChange(async r=>{e.deployment.platform=r,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new L.Notice(`Deployment platform changed to ${r} and applied to config.ts`)}catch(l){new L.Notice(`Failed to apply deployment platform change: ${l instanceof Error?l.message:String(l)}`)}})}),new L.Setting(a).setName("Reset to Template").setDesc(`Reset all settings to the current template (${(i=z.find(s=>s.id===e.currentTemplate))==null?void 0:i.name})`).addButton(s=>s.setButtonText("Reset to Template").setWarning().onClick(async()=>{try{let r=this.plugin.configManager.getTemplatePreset(e.currentTemplate);r?(Object.assign(e,r.config),await this.plugin.saveData(e),await this.applyCurrentConfiguration(!0),new L.Notice(`Reset to ${e.currentTemplate} template and applied to config.ts`)):new L.Notice("Template not found")}catch(r){new L.Notice(`Failed to reset to template: ${r instanceof Error?r.message:String(r)}`)}})),new L.Setting(a).setName("Edit config.ts directly").setDesc("Open your Astro configuration file in the editor").addButton(s=>s.setButtonText("Open config.ts").onClick(async()=>{await this.openConfigFile()}))}async openConfigFile(){try{let a=require("fs"),e=require("path"),{shell:t}=require("electron"),o=this.app.vault.adapter.basePath||this.app.vault.adapter.path,n=typeof o=="string"?o:o.toString(),i=e.join(n,"..","config.ts");a.existsSync(i)?t.openPath(i):new L.Notice(`Config file not found at: ${i}`)}catch(a){new L.Notice(`Error opening config file: ${a instanceof Error?a.message:String(a)}`)}}async updatePluginSettingsWithTemplate(a){let e=this.plugin.settings,t=this.plugin.configManager.getTemplatePreset(a);if(!t||!t.config){new L.Notice("Template preset not found");return}if(e.currentTemplate=a,t.config.features){let n=e.features.comments,i=e.features.profilePicture;e.features={...e.features,...t.config.features},e.features.comments=n,e.features.profilePicture=i}t.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...t.config.tableOfContents});let o=a==="standard"||a==="custom";e.optionalContentTypes={projects:o,docs:o},await this.plugin.saveData(e)}getTemplateChanges(a){var r,l,d,f;let e=[],t=this.getSettings(),o=this.plugin.configManager.getTemplatePreset(a);if(!o||!o.config)return e.push("This will apply the template settings to your configuration."),e;let n=o.config,i=[];n.features&&([{key:"graphView",label:"Graph view"},{key:"tableOfContents",label:"Table of contents"},{key:"readingTime",label:"Reading time"},{key:"linkedMentions",label:"Linked mentions"},{key:"linkedMentionsCompact",label:"Compact linked mentions"},{key:"postNavigation",label:"Post navigation"},{key:"showSocialIconsInFooter",label:"Social icons in footer"},{key:"featureButton",label:"Feature button"}].forEach(({key:c,label:m})=>{let O=t.features[c],S=n.features[c];if(S!==void 0&&O!==S){let v=typeof O=="boolean"?O?"ON":"OFF":O,b=typeof S=="boolean"?S?"ON":"OFF":S;i.push(`${m}: ${v} \u2192 ${b}`)}}),n.features.quickActions&&t.features.quickActions&&n.features.quickActions.enabled!==t.features.quickActions.enabled&&i.push(`Quick actions: ${t.features.quickActions.enabled?"ON":"OFF"} \u2192 ${n.features.quickActions.enabled?"ON":"OFF"}`));let s=a==="standard"||a==="custom";return((r=t.optionalContentTypes)==null?void 0:r.projects)!==s&&i.push(`Projects content type: ${(l=t.optionalContentTypes)!=null&&l.projects?"enabled":"disabled"} \u2192 ${s?"enabled":"disabled"}`),((d=t.optionalContentTypes)==null?void 0:d.docs)!==s&&i.push(`Docs content type: ${(f=t.optionalContentTypes)!=null&&f.docs?"enabled":"disabled"} \u2192 ${s?"enabled":"disabled"}`),i.length>0?e.push(...i):e.push("No changes needed - your settings already match this template."),e}};var D=require("obsidian");var Ee=class extends x{constructor(){super(...arguments);this.mainContainer=null}render(e){var r,l,d,f,h;e.empty(),this.mainContainer=e;let t=this.getSettings(),o=e.createDiv("settings-section"),n=o.createEl("h2",{text:"Style"}),i=o.createEl("p",{text:"Configure your theme and typography settings. Changes are applied to your config.ts file immediately."});if(new D.Setting(e).setName("Theme").setDesc("Choose your color theme").addDropdown(c=>{B.forEach(m=>{c.addOption(m.id,m.name)}),c.setValue(t.currentTheme),c.onChange(async m=>{t.currentTheme=m,await this.plugin.saveData(t),this.render(e);try{await this.applyCurrentConfiguration(),new D.Notice(`Theme changed to ${m} and applied to config.ts`)}catch(O){new D.Notice(`Failed to apply theme change: ${O instanceof Error?O.message:String(O)}`)}})}),t.currentTheme==="custom"&&this.createTextSetting(e,"Theme file","Filename in src/themes/custom/ (without .ts extension)",t.customThemeFile||"custom",c=>{t.customThemeFile=c}),new D.Setting(e).setName("Customize available themes").setDesc("Control which themes are shown to users in the theme selector").addToggle(c=>{let m=Array.isArray(t.availableThemes);c.setValue(m),c.onChange(async O=>{if(O){let S=B.filter(v=>v.id!=="custom").map(v=>v.id);t.availableThemes=S}else t.availableThemes="all";await this.plugin.saveData(t),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new D.Notice(`Available themes ${O?"customized":"set to all"} and applied to config.ts`)}catch(S){new D.Notice(`Failed to apply available themes change: ${S instanceof Error?S.message:String(S)}`)}})}),Array.isArray(t.availableThemes)){let c=e.createDiv("theme-pills-container");c.style.marginTop="10px",c.style.marginBottom="20px";let m=c.createEl("p",{text:"Selected themes (click \xD7 to remove):",cls:"theme-pills-header"});m.style.fontSize="14px",m.style.marginBottom="8px",m.style.color="var(--text-muted)";let O=c.createDiv("theme-pills-wrapper");O.style.display="flex",O.style.flexWrap="wrap",O.style.gap="8px",t.availableThemes.forEach(S=>{let v=B.find(b=>b.id===S);if(v){let b=O.createDiv("theme-pill");b.style.display="inline-flex",b.style.alignItems="center",b.style.padding="4px 8px",b.style.backgroundColor="var(--interactive-accent)",b.style.color="var(--text-on-accent)",b.style.borderRadius="12px",b.style.fontSize="12px",b.style.gap="6px",b.createSpan({text:v.name});let P=b.createEl("button",{text:"\xD7"});P.style.background="none",P.style.border="none",P.style.color="inherit",P.style.cursor="pointer",P.style.fontSize="14px",P.style.padding="0",P.style.width="16px",P.style.height="16px",P.style.borderRadius="50%",P.style.display="flex",P.style.alignItems="center",P.style.justifyContent="center",P.addEventListener("click",async()=>{let F=t.availableThemes.filter(w=>w!==S);F.length===0&&(new D.Notice('At least one theme must be available. Adding "oxygen" as default.'),F.push("oxygen")),t.availableThemes=F,await this.plugin.saveData(t),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new D.Notice(`Theme "${v.name}" removed from available themes`)}catch(w){new D.Notice(`Failed to apply theme removal: ${w instanceof Error?w.message:String(w)}`)}})}})}let s=e.createDiv("settings-section");s.createEl("h3",{text:"Typography"}),s.createEl("p",{text:"Configure your font settings."}),new D.Setting(s).setName("Heading Font").setDesc("Font for headings and titles").addDropdown(c=>{oe.forEach(m=>{c.addOption(m,m)}),c.setValue(t.typography.headingFont),c.onChange(async m=>{t.typography.headingFont=m,await this.plugin.saveData(t);try{await this.applyCurrentConfiguration(),new D.Notice("Heading font updated and applied to config.ts")}catch(O){new D.Notice(`Failed to apply heading font change: ${O instanceof Error?O.message:String(O)}`)}})}),new D.Setting(s).setName("Prose Font").setDesc("Font for body text and content").addDropdown(c=>{oe.forEach(m=>{c.addOption(m,m)}),c.setValue(t.typography.proseFont),c.onChange(async m=>{t.typography.proseFont=m,await this.plugin.saveData(t);try{await this.applyCurrentConfiguration(),new D.Notice("Prose font updated and applied to config.ts")}catch(O){new D.Notice(`Failed to apply prose font change: ${O instanceof Error?O.message:String(O)}`)}})}),new D.Setting(s).setName("Monospace Font").setDesc("Font for code blocks and technical content").addDropdown(c=>{oe.forEach(m=>{c.addOption(m,m)}),c.setValue(t.typography.monoFont),c.onChange(async m=>{t.typography.monoFont=m,await this.plugin.saveData(t);try{await this.applyCurrentConfiguration(),new D.Notice("Monospace font updated and applied to config.ts")}catch(O){new D.Notice(`Failed to apply monospace font change: ${O instanceof Error?O.message:String(O)}`)}})}),new D.Setting(s).setName("Font Source").setDesc("How fonts are loaded").addDropdown(c=>{c.addOption("local","Local (Google Fonts)"),c.addOption("cdn","CDN (Custom)"),c.setValue(t.typography.fontSource),c.onChange(async m=>{t.typography.fontSource=m,await this.plugin.saveData(t),this.render(e);try{await this.applyCurrentConfiguration(),new D.Notice(`Font source changed to ${m} and applied to config.ts`)}catch(O){new D.Notice(`Failed to apply font source change: ${O instanceof Error?O.message:String(O)}`)}})}),new D.Setting(s).setName("Font Display").setDesc("Font display strategy").addDropdown(c=>{c.addOption("swap","Swap (recommended)"),c.addOption("fallback","Fallback"),c.addOption("optional","Optional"),c.setValue(t.typography.fontDisplay||"swap"),c.onChange(async m=>{t.typography.fontDisplay=m,await this.plugin.saveData(t);try{await this.applyCurrentConfiguration(),new D.Notice("Font display updated and applied to config.ts")}catch(O){new D.Notice(`Failed to apply font display change: ${O instanceof Error?O.message:String(O)}`)}})}),t.typography.fontSource==="cdn"&&(this.createTextSetting(s,"Custom Font URLs","Comma-separated URLs for custom fonts (e.g., Google Fonts URL)",((r=t.typography.customFonts)==null?void 0:r.urls)||"",c=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.urls=c}),this.createTextSetting(s,"Custom Heading Font Name","Font family name for headings",((l=t.typography.customFonts)==null?void 0:l.heading)||"",c=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.heading=c}),this.createTextSetting(s,"Custom Body Font Name","Font family name for body text",((d=t.typography.customFonts)==null?void 0:d.prose)||"",c=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.prose=c}),this.createTextSetting(s,"Custom Monospace Font Name","Font family name for code",((f=t.typography.customFonts)==null?void 0:f.mono)||"",c=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.mono=c})),this.createTextSetting(s,"Content width","Maximum width for content (e.g., 45rem)",((h=t.layout)==null?void 0:h.contentWidth)||"45rem",c=>{t.layout||(t.layout={contentWidth:"45rem"}),t.layout.contentWidth=c})}};var I=require("obsidian");var be=class extends x{render(a){var j,q,K,Y,J,Q,X,$,E,y,Z,V,Je,Qe,Xe,Ze,et,tt,at,ot,nt,st,it,rt,lt,ct,pt,dt,ut,gt,mt,ft,ht,Ot,Tt,Ct,St;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"Feature Configuration"}),n=t.createEl("p",{text:"Enable or disable specific features for your site. Changes are applied to your config.ts file immediately when you toggle them."}),i=a.createDiv("settings-section");i.style.marginTop="20px",i.createEl("h3",{text:"Global Options"}),new I.Setting(i).setName("Enable Projects").setDesc("Enable projects as a unique content type for showcasing work and portfolios").addToggle(C=>{var p,u;return C.setValue((u=(p=e.optionalContentTypes)==null?void 0:p.projects)!=null?u:!0).onChange(async g=>{console.log("\u{1F527} Projects toggle changed to:",g),e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.projects=g,console.log("\u{1F527} Settings after projects change:",e.optionalContentTypes),await this.plugin.saveData(e),await this.plugin.loadSettings(),console.log("\u{1F527} Settings saved and reloaded, calling applyCurrentConfiguration"),await this.applyCurrentConfiguration(),new I.Notice(`Projects ${g?"enabled":"disabled"} and applied to config.ts`)})}),new I.Setting(i).setName("Enable Docs").setDesc("Enable docs as a unique content type for documentation and knowledge base").addToggle(C=>{var p,u;return C.setValue((u=(p=e.optionalContentTypes)==null?void 0:p.docs)!=null?u:!0).onChange(async g=>{console.log("\u{1F527} Docs toggle changed to:",g),e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.docs=g,console.log("\u{1F527} Settings after docs change:",e.optionalContentTypes),await this.plugin.saveData(e),await this.plugin.loadSettings(),console.log("\u{1F527} Settings saved and reloaded, calling applyCurrentConfiguration"),await this.applyCurrentConfiguration(),new I.Notice(`Docs ${g?"enabled":"disabled"} and applied to config.ts`)})}),new I.Setting(i).setName("Table of contents").setDesc("Show table of contents on content pages").addToggle(C=>{var p,u;return C.setValue((u=(p=e.tableOfContents)==null?void 0:p.enabled)!=null?u:!0).onChange(async g=>{e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.enabled=g,await this.plugin.saveData(e);let T=i.querySelector(".toc-depth-option");T&&(T.style.display=g?"block":"none"),await this.applyCurrentConfiguration(),new I.Notice(`Table of contents ${g?"enabled":"disabled"} and applied to config.ts`)})});let s=i.createDiv("toc-depth-option");s.style.display=(q=(j=e.tableOfContents)==null?void 0:j.enabled)==null||q?"block":"none",s.style.paddingLeft="20px",new I.Setting(s).setName("Table of contents depth").setDesc("Maximum heading depth to include in ToC (2=H2, 3=H3, 4=H4, 5=H5, 6=H6)").addText(C=>{var p;return C.setPlaceholder("4").setValue(String(((p=e.tableOfContents)==null?void 0:p.depth)||4)).onChange(async u=>{let g=parseInt(u)||4,T=Math.max(2,Math.min(6,g));e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.depth=T,C.setValue(String(T)),await this.plugin.saveData(e),await this.applyCurrentConfiguration(),new I.Notice(`Table of contents depth set to ${T} and applied to config.ts`)})}),new I.Setting(i).setName("Footer").setDesc("Enable footer on your site").addToggle(C=>{var p,u;return C.setValue((u=(p=e.footer)==null?void 0:p.enabled)!=null?u:!0).onChange(async g=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.enabled=g,await this.plugin.saveData(e);let T=i.querySelector(".footer-options");T&&(T.style.display=g?"block":"none"),await this.applyCurrentConfiguration(),new I.Notice(`Footer ${g?"enabled":"disabled"} and applied to config.ts`)})});let r=i.createDiv("footer-options");r.style.display=(Y=(K=e.footer)==null?void 0:K.enabled)==null||Y?"block":"none",r.style.paddingLeft="20px",this.createTextSetting(r,"Footer content","Text to display in footer. Use {author} for site author and {title} for site title",((J=e.footer)==null?void 0:J.content)||'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',C=>{e.footer||(e.footer={enabled:!0,content:"",showSocialIconsInFooter:!0}),e.footer.content=C}),new I.Setting(r).setName("Show social icons in footer").setDesc("Display social media icons in the footer").addToggle(C=>{var p,u;return C.setValue((u=(p=e.footer)==null?void 0:p.showSocialIconsInFooter)!=null?u:!0).onChange(async g=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.showSocialIconsInFooter=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration(),new I.Notice(`Social icons in footer ${g?"enabled":"disabled"} and applied to config.ts`)})}),new I.Setting(i).setName("Scroll to top").setDesc("Show scroll to top button").addToggle(C=>{var p,u;return C.setValue((u=(p=e.features)==null?void 0:p.scrollToTop)!=null?u:!0).onChange(async g=>{e.features.scrollToTop=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration(),new I.Notice(`Scroll to top ${g?"enabled":"disabled"} and applied to config.ts`)})}),this.createTextSetting(i,"Default OG image alt text","Alternative text for the default Open Graph image (public/open-graph.png)",((Q=e.seo)==null?void 0:Q.defaultOgImageAlt)||"Astro Modular logo.",C=>{e.seo||(e.seo={defaultOgImageAlt:""}),e.seo.defaultOgImageAlt=C}),new I.Setting(i).setName("Feature button").setDesc("Choose which feature button appears in the header").addDropdown(C=>{var p;return C.addOption("mode","Dark/Light Mode Toggle").addOption("graph","View Graph").addOption("theme","Change Theme").addOption("none","None").setValue(((p=e.features)==null?void 0:p.featureButton)||"mode").onChange(async u=>{e.features.featureButton=u,await this.plugin.saveData(e),await this.applyCurrentConfiguration(),new I.Notice(`Feature button updated to "${u}" and applied to config.ts`)})});let l=a.createDiv("settings-section");l.style.marginTop="30px",l.style.paddingTop="20px",l.style.borderTop="2px solid var(--background-modifier-border)",l.createEl("h3",{text:"Command Palette"}),new I.Setting(l).setName("Enable Command Palette").setDesc("Add a command palette to your site").addToggle(C=>{var p,u;return C.setValue((u=(p=e.commandPalette)==null?void 0:p.enabled)!=null?u:!0).onChange(async g=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.enabled=g,e.features.commandPalette=g,await this.plugin.saveData(e);let T=l.querySelector(".command-palette-options");T&&(T.style.display=g?"block":"none"),await this.applyCurrentConfiguration(),new I.Notice(`Command Palette ${g?"enabled":"disabled"} and applied to config.ts`)})});let d=l.createDiv("command-palette-options");d.style.display=($=(X=e.commandPalette)==null?void 0:X.enabled)==null||$?"block":"none",d.style.paddingLeft="20px",this.createTextSetting(d,"Shortcut","Keyboard shortcut to open command palette (Ctrl = Cmd on Mac)",((E=e.commandPalette)==null?void 0:E.shortcut)||"ctrl+K",C=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.shortcut=C}),this.createTextSetting(d,"Placeholder","Placeholder text in command palette search box",((y=e.commandPalette)==null?void 0:y.placeholder)||"Search posts",C=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.placeholder=C});let f=d.createDiv();f.createEl("h4",{text:"Search Content Types"}),new I.Setting(f).setName("Search posts").setDesc("Include posts in search results").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.search)==null?void 0:u.posts)!=null?g:!0).onChange(async T=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.posts=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(f).setName("Search pages").setDesc("Include pages in search results").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.search)==null?void 0:u.pages)!=null?g:!1).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.pages=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(f).setName("Search projects").setDesc("Include projects in search results").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.search)==null?void 0:u.projects)!=null?g:!1).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.projects=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(f).setName("Search docs").setDesc("Include docs in search results").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.search)==null?void 0:u.docs)!=null?g:!1).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.docs=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})});let h=d.createDiv();h.style.marginTop="15px",h.createEl("h4",{text:"Command Palette Sections"}),new I.Setting(h).setName("Show quick actions section").setDesc("Display quick actions in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.sections)==null?void 0:u.quickActions)!=null?g:!0).onChange(async T=>{var k;(k=e.commandPalette)!=null&&k.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.quickActions=T,await this.plugin.saveData(e);let N=h.querySelector(".quick-actions-options");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let c=h.createDiv("quick-actions-options");c.style.display=(Je=(V=(Z=e.commandPalette)==null?void 0:Z.sections)==null?void 0:V.quickActions)==null||Je?"block":"none",c.style.paddingLeft="20px",c.style.marginTop="10px",new I.Setting(c).setName("Toggle dark/light mode").setDesc("Show mode toggle button in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.quickActions)==null?void 0:u.toggleMode)!=null?g:!0).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.toggleMode=T,e.features.quickActions.toggleMode=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(c).setName("View graph").setDesc("Show graph view button in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.quickActions)==null?void 0:u.graphView)!=null?g:!0).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.graphView=T,e.features.quickActions.graphView=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(c).setName("Change theme").setDesc("Show theme selector button in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.quickActions)==null?void 0:u.changeTheme)!=null?g:!0).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.changeTheme=T,e.features.quickActions.changeTheme=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(h).setName("Show pages section").setDesc("Display navigation pages in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.sections)==null?void 0:u.pages)!=null?g:!0).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.pages=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(h).setName("Show social section").setDesc("Display social links in command palette").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.commandPalette)==null?void 0:p.sections)==null?void 0:u.social)!=null?g:!0).onChange(async T=>{var N;(N=e.commandPalette)!=null&&N.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.social=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})});let m=a.createDiv("settings-section");m.style.marginTop="30px",m.style.paddingTop="20px",m.style.borderTop="2px solid var(--background-modifier-border)",m.createEl("h3",{text:"Home Options"}),new I.Setting(m).setName("Featured post").setDesc("Show featured post on homepage").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.homeOptions)==null?void 0:p.featuredPost)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{e.homeOptions||(e.homeOptions={featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}}),e.homeOptions.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.enabled=T,await this.plugin.saveData(e);let N=m.querySelector(".featured-post-options");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration(),new I.Notice(`Featured post ${T?"enabled":"disabled"} and applied to config.ts`)})});let O=m.createDiv("featured-post-options");O.style.display=(Ze=(Xe=(Qe=e.homeOptions)==null?void 0:Qe.featuredPost)==null?void 0:Xe.enabled)==null||Ze?"block":"none",O.style.paddingLeft="20px",new I.Setting(O).setName("Featured post type").setDesc("Show latest post or a specific featured post").addDropdown(C=>{var p,u;return C.addOption("latest","Latest").addOption("featured","Featured").setValue(((u=(p=e.homeOptions)==null?void 0:p.featuredPost)==null?void 0:u.type)||"latest").onChange(async g=>{var N;(N=e.homeOptions)!=null&&N.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.type=g,await this.plugin.saveData(e);let T=O.querySelector(".featured-post-slug");T&&(T.style.display=g==="featured"?"block":"none"),await this.applyCurrentConfiguration()})});let S=O.createDiv("featured-post-slug");S.style.display=((tt=(et=e.homeOptions)==null?void 0:et.featuredPost)==null?void 0:tt.type)==="featured"?"block":"none",this.createTextSetting(S,"Featured post slug",'Slug of the post to feature (e.g., "getting-started" for /posts/getting-started)',((ot=(at=e.homeOptions)==null?void 0:at.featuredPost)==null?void 0:ot.slug)||"getting-started",C=>{var p;(p=e.homeOptions)!=null&&p.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"featured",slug:"getting-started"}),e.homeOptions.featuredPost.slug=C}),new I.Setting(m).setName("Recent posts").setDesc("Show recent posts on homepage").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.homeOptions)==null?void 0:p.recentPosts)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{var k;(k=e.homeOptions)!=null&&k.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.enabled=T,await this.plugin.saveData(e);let N=m.querySelector(".recent-posts-count");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let v=m.createDiv("recent-posts-count");v.style.display=(it=(st=(nt=e.homeOptions)==null?void 0:nt.recentPosts)==null?void 0:st.enabled)==null||it?"block":"none",v.style.paddingLeft="20px",new I.Setting(v).setName("Recent posts count").setDesc("Number of recent posts to show").addText(C=>{var p,u;return C.setPlaceholder("7").setValue(String(((u=(p=e.homeOptions)==null?void 0:p.recentPosts)==null?void 0:u.count)||7)).onChange(async g=>{var N;let T=parseInt(g)||7;(N=e.homeOptions)!=null&&N.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.count=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(m).setName("Projects on homepage").setDesc("Show featured projects on homepage").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.homeOptions)==null?void 0:p.projects)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{var k;(k=e.homeOptions)!=null&&k.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.enabled=T,await this.plugin.saveData(e);let N=m.querySelector(".projects-count");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let b=m.createDiv("projects-count");b.style.display=(ct=(lt=(rt=e.homeOptions)==null?void 0:rt.projects)==null?void 0:lt.enabled)==null||ct?"block":"none",b.style.paddingLeft="20px",new I.Setting(b).setName("Projects count").setDesc("Number of projects to show").addText(C=>{var p,u;return C.setPlaceholder("2").setValue(String(((u=(p=e.homeOptions)==null?void 0:p.projects)==null?void 0:u.count)||2)).onChange(async g=>{var N;let T=parseInt(g)||2;(N=e.homeOptions)!=null&&N.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.count=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(m).setName("Docs on homepage").setDesc("Show featured docs on homepage").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.homeOptions)==null?void 0:p.docs)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{var k;(k=e.homeOptions)!=null&&k.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.enabled=T,await this.plugin.saveData(e);let N=m.querySelector(".docs-count");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let P=m.createDiv("docs-count");P.style.display=(ut=(dt=(pt=e.homeOptions)==null?void 0:pt.docs)==null?void 0:dt.enabled)==null||ut?"block":"none",P.style.paddingLeft="20px",new I.Setting(P).setName("Docs count").setDesc("Number of docs to show").addText(C=>{var p,u;return C.setPlaceholder("3").setValue(String(((u=(p=e.homeOptions)==null?void 0:p.docs)==null?void 0:u.count)||3)).onChange(async g=>{var N;let T=parseInt(g)||3;(N=e.homeOptions)!=null&&N.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.count=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(m).setName("Blurb placement").setDesc("Where to place the blurb text on homepage").addDropdown(C=>{var p,u;return C.addOption("above","Above").addOption("below","Below").addOption("none","None").setValue(((u=(p=e.homeOptions)==null?void 0:p.blurb)==null?void 0:u.placement)||"below").onChange(async g=>{var T;(T=e.homeOptions)!=null&&T.blurb||(e.homeOptions.blurb={placement:"below"}),e.homeOptions.blurb.placement=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})});let M=a.createDiv("settings-section");M.style.marginTop="30px",M.style.paddingTop="20px",M.style.borderTop="2px solid var(--background-modifier-border)",M.createEl("h3",{text:"Post Options"}),new I.Setting(M).setName("Posts per page").setDesc("Number of posts to show per page").addText(C=>{var p;return C.setPlaceholder("6").setValue(String(((p=e.postOptions)==null?void 0:p.postsPerPage)||6)).onChange(async u=>{var T;let g=parseInt(u)||6;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postsPerPage=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Reading time").setDesc("Display estimated reading time on posts").addToggle(C=>{var p,u;return C.setValue((u=(p=e.postOptions)==null?void 0:p.readingTime)!=null?u:!0).onChange(async g=>{var T;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.readingTime=g,e.features.readingTime=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Word count").setDesc("Display word count on posts").addToggle(C=>{var p,u;return C.setValue((u=(p=e.postOptions)==null?void 0:p.wordCount)!=null?u:!0).onChange(async g=>{var T;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.wordCount=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Tags").setDesc("Show tags on posts").addToggle(C=>{var p,u;return C.setValue((u=(p=e.postOptions)==null?void 0:p.tags)!=null?u:!0).onChange(async g=>{var T;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.tags=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Linked mentions").setDesc("Show linked mentions and backlinks on posts").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.postOptions)==null?void 0:p.linkedMentions)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{var k;(k=e.postOptions)!=null&&k.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.enabled=T,e.features.linkedMentions=T,await this.plugin.saveData(e);let N=M.querySelector(".linked-mentions-compact");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let F=M.createDiv("linked-mentions-compact");F.style.display=(ft=(mt=(gt=e.postOptions)==null?void 0:gt.linkedMentions)==null?void 0:mt.enabled)==null||ft?"block":"none",F.style.paddingLeft="20px",new I.Setting(F).setName("Compact view").setDesc("Use compact view for linked mentions").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.postOptions)==null?void 0:p.linkedMentions)==null?void 0:u.linkedMentionsCompact)!=null?g:!1).onChange(async T=>{var N;(N=e.postOptions)!=null&&N.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.linkedMentionsCompact=T,e.features.linkedMentionsCompact=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Graph view").setDesc("Show graph view of post connections").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.postOptions)==null?void 0:p.graphView)==null?void 0:u.enabled)!=null?g:!0).onChange(async T=>{var k;(k=e.postOptions)!=null&&k.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.enabled=T,e.features.graphView=T,await this.plugin.saveData(e);let N=M.querySelector(".graph-view-options");N&&(N.style.display=T?"block":"none"),await this.applyCurrentConfiguration()})});let w=M.createDiv("graph-view-options");w.style.display=(Tt=(Ot=(ht=e.postOptions)==null?void 0:ht.graphView)==null?void 0:Ot.enabled)==null||Tt?"block":"none",w.style.paddingLeft="20px",new I.Setting(w).setName("Show in sidebar").setDesc("Display graph view in post sidebar").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.postOptions)==null?void 0:p.graphView)==null?void 0:u.showInSidebar)!=null?g:!0).onChange(async T=>{var N;(N=e.postOptions)!=null&&N.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showInSidebar=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(w).setName("Maximum nodes").setDesc("Maximum number of nodes to show in graph").addText(C=>{var p,u;return C.setPlaceholder("100").setValue(String(((u=(p=e.postOptions)==null?void 0:p.graphView)==null?void 0:u.maxNodes)||100)).onChange(async g=>{var N;let T=parseInt(g)||100;(N=e.postOptions)!=null&&N.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.maxNodes=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(w).setName("Show orphaned posts").setDesc("Include posts with no connections in graph view").addToggle(C=>{var p,u,g;return C.setValue((g=(u=(p=e.postOptions)==null?void 0:p.graphView)==null?void 0:u.showOrphanedPosts)!=null?g:!0).onChange(async T=>{var N;(N=e.postOptions)!=null&&N.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showOrphanedPosts=T,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Post navigation").setDesc("Show next/previous post navigation").addToggle(C=>{var p,u;return C.setValue((u=(p=e.postOptions)==null?void 0:p.postNavigation)!=null?u:!0).onChange(async g=>{var T;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postNavigation=g,e.features.postNavigation=g,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Show post card cover images").setDesc("Where to display cover images on post cards").addDropdown(C=>{var p;return C.addOption("all","All").addOption("featured","Featured").addOption("home","Home").addOption("posts","Posts").addOption("featured-and-posts","Featured and Posts").addOption("none","None").setValue(((p=e.postOptions)==null?void 0:p.showPostCardCoverImages)||"featured-and-posts").onChange(async u=>{var g;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((g=e.optionalFeatures)==null?void 0:g.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.showPostCardCoverImages=u,e.features.showPostCardCoverImages=u,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new I.Setting(M).setName("Post card aspect ratio").setDesc("Aspect ratio for post card cover images").addDropdown(C=>{var p;return C.addOption("16:9","16:9").addOption("4:3","4:3").addOption("3:2","3:2").addOption("og","Open Graph").addOption("square","Square").addOption("golden","Golden").addOption("custom","Custom").setValue(((p=e.postOptions)==null?void 0:p.postCardAspectRatio)||"og").onChange(async u=>{var T;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((T=e.optionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postCardAspectRatio=u,e.features.postCardAspectRatio=u,await this.plugin.saveData(e);let g=M.querySelector(".custom-aspect-ratio");g&&(g.style.display=u==="custom"?"block":"none"),await this.applyCurrentConfiguration()})});let A=M.createDiv("custom-aspect-ratio");A.style.display=((Ct=e.postOptions)==null?void 0:Ct.postCardAspectRatio)==="custom"?"block":"none",A.style.paddingLeft="20px",this.createTextSetting(A,"Custom aspect ratio",'Custom aspect ratio in format "width/height" (e.g., "2.5/1")',((St=e.postOptions)==null?void 0:St.customPostCardAspectRatio)||"2.5/1",C=>{var p;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((p=e.optionalFeatures)==null?void 0:p.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.customPostCardAspectRatio=C,e.features.customPostCardAspectRatio=C});let H=a.createDiv("settings-section");H.style.marginTop="30px",H.style.paddingTop="20px",H.style.borderTop="2px solid var(--background-modifier-border)",H.createEl("h3",{text:"Optional Features"}),this.renderProfilePictureSetting(H,e),this.renderCommentsSetting(H,e)}renderProfilePictureSetting(a,e){var r,l,d,f;let t=((r=e.features)==null?void 0:r.profilePicture)||((d=(l=e.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:d.enabled),o=((f=e.optionalFeatures)==null?void 0:f.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},n=new I.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(h=>h.setValue(t).onChange(async c=>{var O;e.features.profilePicture=c,e.optionalFeatures||(e.optionalFeatures={profilePicture:o,comments:((O=e.postOptions)==null?void 0:O.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.optionalFeatures.profilePicture.enabled=c,await this.plugin.saveData(e);let m=a.querySelector(".profile-picture-options");m&&(m.style.display=c?"block":"none");try{await this.applyCurrentConfiguration(),new I.Notice(`Profile picture ${c?"enabled":"disabled"} and applied to config.ts`)}catch(S){new I.Notice(`Failed to apply profile picture to config.ts: ${S instanceof Error?S.message:String(S)}`)}})),i=a.createDiv("profile-picture-options");i.style.display=t?"block":"none",i.style.marginTop="10px",i.style.paddingLeft="20px";let s=i.createDiv("options-grid");s.style.display="grid",s.style.gridTemplateColumns="1fr 1fr",s.style.gap="10px",s.style.marginTop="10px",new I.Setting(s).setName("Image path").setDesc("Path to the profile picture image").addText(h=>h.setValue(o.image).setPlaceholder("/profile.jpg").onChange(async c=>{o.image=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new I.Setting(s).setName("Alt text").setDesc("Alternative text for the profile picture").addText(h=>h.setValue(o.alt).setPlaceholder("Profile picture").onChange(async c=>{o.alt=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new I.Setting(s).setName("Size").setDesc("Size of the profile picture").addDropdown(h=>h.addOption("sm","Small").addOption("md","Medium").addOption("lg","Large").setValue(o.size).onChange(async c=>{o.size=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new I.Setting(s).setName("URL (optional)").setDesc("Optional URL to link the profile picture to").addText(h=>h.setValue(o.url||"").setPlaceholder("https://example.com").onChange(async c=>{o.url=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new I.Setting(s).setName("Placement").setDesc("Where to show the profile picture").addDropdown(h=>h.addOption("footer","Footer").addOption("header","Header").setValue(o.placement).onChange(async c=>{o.placement=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new I.Setting(s).setName("Style").setDesc("Visual style of the profile picture").addDropdown(h=>h.addOption("circle","Circle").addOption("square","Square").addOption("none","None").setValue(o.style).onChange(async c=>{o.style=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()}))}renderCommentsSetting(a,e){var m,O,S,v,b,P;let t=((O=(m=e.postOptions)==null?void 0:m.comments)==null?void 0:O.enabled)||((v=(S=e.optionalFeatures)==null?void 0:S.comments)==null?void 0:v.enabled),o=((b=e.postOptions)==null?void 0:b.comments)||((P=e.optionalFeatures)==null?void 0:P.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},n=new I.Setting(a).setName("Post comments").setDesc("Enable Giscus comment system for posts").addToggle(M=>M.setValue(t).onChange(async F=>{e.features.comments=F,e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:o}),e.postOptions.comments.enabled=F,e.optionalFeatures||(e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:o}),e.optionalFeatures.comments.enabled=F,await this.plugin.saveData(e);let w=a.querySelector(".comments-options");w&&(w.style.display=F?"block":"none");try{await this.applyCurrentConfiguration(),new I.Notice(`Comments system ${F?"enabled":"disabled"} and applied to config.ts`)}catch(A){new I.Notice(`Failed to apply comments system to config.ts: ${A instanceof Error?A.message:String(A)}`)}})),i=a.createDiv("comments-options");i.style.display=t?"block":"none",i.style.marginTop="10px",i.style.paddingLeft="20px";let s=i.createDiv("comments-instructions");s.style.marginBottom="15px",s.style.padding="10px",s.style.background="var(--background-modifier-border)",s.style.borderRadius="4px",s.style.borderLeft="3px solid var(--interactive-accent)";let r=s.createEl("p");r.style.margin="0",r.style.fontSize="13px",r.style.color="var(--text-muted)",r.style.whiteSpace="pre-line",r.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let l=r.querySelector("a");l&&(l.addEventListener("mouseenter",()=>{l.style.textDecoration="underline"}),l.addEventListener("mouseleave",()=>{l.style.textDecoration="none"}));let f=new I.Setting(i).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});f.style.width="100%",f.style.fontFamily="var(--font-monospace)",f.style.fontSize="12px",f.style.padding="8px",f.style.border="1px solid var(--background-modifier-border)",f.style.borderRadius="4px",f.style.background="var(--background-primary)",f.style.color="var(--text-normal)",f.style.resize="none",f.value=o.rawScript||"";let h=i.createDiv("script-validation");h.style.marginTop="8px",h.style.fontSize="12px";let c=async()=>{let M=f.value.trim();if(!M){h.innerHTML="",o.rawScript="",await this.plugin.saveData(e);return}let{GiscusScriptParser:F}=await Promise.resolve().then(()=>(We(),ze)),w=F.validateScript(M);if(w.valid){h.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let A=F.parseScript(M);A&&(o.rawScript=M,o.repo=A.repo,o.repoId=A.repoId,o.category=A.category,o.categoryId=A.categoryId,o.mapping=A.mapping,o.strict=A.strict,o.reactions=A.reactions,o.metadata=A.metadata,o.inputPosition=A.inputPosition,o.theme=A.theme,o.lang=A.lang,o.loading=A.loading,await this.plugin.saveData(e),await this.applyCurrentConfiguration())}else h.innerHTML=`<span style="color: var(--text-error)">\u2717 ${w.error}</span>`};f.addEventListener("input",c),c()}};var te=require("obsidian");var ve=class extends x{async render(a){a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"Plugin Configuration"}),n=t.createEl("p",{text:"Manage your Obsidian plugins and their settings."}),i=await this.plugin.pluginManager.getPluginStatus(),r=a.createDiv("plugin-status-container").createDiv("plugin-status");for(let l of i){let d=r.createDiv(`plugin-item ${l.installed?"installed":"missing"}`),f=d.createDiv("plugin-icon");f.innerHTML=l.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>';let h=d.createDiv("plugin-info");h.createEl("h3",{text:l.name});let c=l.installed?l.enabled?"Enabled":"Disabled":"Not installed";h.createEl("p",{text:c})}new te.Setting(a).setName("Configure automatically").setDesc("Automatically configure all installed plugins").addButton(l=>l.setButtonText("Configure Automatically").setCta().onClick(async()=>{let d=e.contentOrganization,f={obsidianSettings:{attachmentLocation:d==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:d==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(f)){let c=e.contentOrganization,m=c==="file-based"?"subfolder (attachments/)":"same folder",O=c==="file-based"?"file":"folder";new te.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${m}
\u2022 Astro Composer: Creation mode \u2192 ${O}
\u2022 Image Inserter: Format updated for ${c}`,8e3)}else new te.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)})),new te.Setting(a).setName("Show manual instructions").setDesc("Get step-by-step instructions for manual configuration").addButton(l=>l.setButtonText("Show Manual Instructions").onClick(async()=>{let d=e.contentOrganization,f={obsidianSettings:{attachmentLocation:d==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:d==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},h=await this.plugin.pluginManager.getManualConfigurationInstructions(f),c=new te.Modal(this.app);c.titleEl.setText("Manual Configuration Instructions");let m=c.contentEl.createDiv();m.style.padding="20px",m.style.lineHeight="1.6";let O=h.split(`
`),S=null;O.forEach(v=>{let b=v.trim();if(b==="")m.createEl("br");else if(b.startsWith("## ")){S&&(S=null);let P=m.createEl("h2");P.setText(b.substring(3)),P.style.marginTop="20px",P.style.marginBottom="10px",P.style.fontSize="1.2em",P.style.fontWeight="bold"}else if(b.match(/^\d+\.\s/)){S||(S=m.createEl("ol"),S.style.marginLeft="20px",S.style.marginBottom="15px");let P=S.createEl("li");P.style.marginBottom="5px",this.parseBoldText(P,b.replace(/^\d+\.\s/,""))}else if(b.startsWith("- ")||b.startsWith("* ")){S||(S=m.createEl("ul"),S.style.marginLeft="20px",S.style.marginBottom="15px");let P=S.createEl("li");P.style.marginBottom="5px",this.parseBoldText(P,b.substring(2))}else{S&&(S=null);let P=m.createEl("p");P.style.marginBottom="10px",this.parseBoldText(P,b)}}),c.open()}))}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(o=>{o.startsWith("**")&&o.endsWith("**")?a.createEl("strong").setText(o.substring(2,o.length-2)):o.trim()!==""&&a.appendText(o)})}};var R=require("obsidian");var Fe=class extends x{render(a){a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),o=t.createEl("h2",{text:"Advanced Settings"}),n=t.createEl("p",{text:"Advanced configuration options and utilities."});new R.Setting(a).setName("Sync from config.ts").setDesc("Read current config.ts file and update plugin settings to match").addButton(i=>i.setButtonText("Sync from config.ts").setCta().onClick(async()=>{var s,r,l,d,f,h,c,m,O,S,v,b,P,M,F,w,A,H,j,q,K,Y,J,Q,X;try{let $=await this.plugin.configManager.fileManager.readConfig();if(!$){new R.Notice("Could not read config.ts file");return}let E=await this.plugin.configManager.fileManager.parseConfigFile($);if(!E){new R.Notice("Could not parse config.ts file");return}let y=this.getSettings();E.siteInfo&&(y.siteInfo.site=(s=E.siteInfo.site)!=null?s:y.siteInfo.site,y.siteInfo.title=(r=E.siteInfo.title)!=null?r:y.siteInfo.title,y.siteInfo.description=(l=E.siteInfo.description)!=null?l:y.siteInfo.description,y.siteInfo.author=(d=E.siteInfo.author)!=null?d:y.siteInfo.author,y.siteInfo.language=(f=E.siteInfo.language)!=null?f:y.siteInfo.language),E.navigation&&(E.navigation.pages&&(y.navigation.pages=E.navigation.pages),E.navigation.social&&(y.navigation.social=E.navigation.social)),E.currentTheme&&(y.currentTheme=E.currentTheme),E.typography&&(y.typography.fontSource=(h=E.typography.fontSource)!=null?h:y.typography.fontSource,y.typography.proseFont=(c=E.typography.proseFont)!=null?c:y.typography.proseFont,y.typography.headingFont=(m=E.typography.headingFont)!=null?m:y.typography.headingFont,y.typography.monoFont=(O=E.typography.monoFont)!=null?O:y.typography.monoFont),E.tableOfContents&&(y.tableOfContents||(y.tableOfContents={enabled:!0,depth:4}),y.tableOfContents.enabled=(S=E.tableOfContents.enabled)!=null?S:y.tableOfContents.enabled,y.tableOfContents.depth=(v=E.tableOfContents.depth)!=null?v:y.tableOfContents.depth),E.postOptions&&(y.features.readingTime=(b=E.postOptions.readingTime)!=null?b:y.features.readingTime,y.features.linkedMentions=(M=(P=E.postOptions.linkedMentions)==null?void 0:P.enabled)!=null?M:y.features.linkedMentions,y.features.linkedMentionsCompact=(w=(F=E.postOptions.linkedMentions)==null?void 0:F.linkedMentionsCompact)!=null?w:y.features.linkedMentionsCompact,y.features.graphView=(H=(A=E.postOptions.graphView)==null?void 0:A.enabled)!=null?H:y.features.graphView,y.features.postNavigation=(j=E.postOptions.postNavigation)!=null?j:y.features.postNavigation,y.features.comments=(K=(q=E.postOptions.comments)==null?void 0:q.enabled)!=null?K:y.features.comments),E.optionalContentTypes&&(y.optionalContentTypes.projects=(Y=E.optionalContentTypes.projects)!=null?Y:y.optionalContentTypes.projects,y.optionalContentTypes.docs=(J=E.optionalContentTypes.docs)!=null?J:y.optionalContentTypes.docs),E.footer&&(y.features.showSocialIconsInFooter=(Q=E.footer.showSocialIconsInFooter)!=null?Q:!1),E.commandPalette&&(y.features.commandPalette=(X=E.commandPalette.enabled)!=null?X:!1),E.theme&&(y.currentTheme=E.theme),E.site&&(y.siteInfo.site=E.site),E.title&&(y.siteInfo.title=E.title),E.description&&(y.siteInfo.description=E.description),E.author&&(y.siteInfo.author=E.author),E.language&&(y.siteInfo.language=E.language),y.currentTemplate="custom",await this.plugin.saveData(y),this.plugin.triggerSettingsRefresh(),new R.Notice("Settings synced from config.ts successfully")}catch($){new R.Notice(`Failed to sync from config.ts: ${$ instanceof Error?$.message:String($)}`)}})),new R.Setting(a).setName("Reset to defaults").setDesc("Reset all settings to their default values").addButton(i=>i.setButtonText("Reset to Defaults").setWarning().onClick(async()=>{let s=new R.Modal(this.app);s.titleEl.setText("Reset to Defaults");let r=s.contentEl.createDiv();r.createEl("p",{text:"Are you sure you want to reset all configuration settings to defaults?"}),r.createEl("p",{text:"This will preserve your site info and navigation settings."});let l=r.createDiv();l.style.marginTop="20px",l.style.display="flex",l.style.gap="10px",l.style.justifyContent="flex-end";let d=l.createEl("button",{text:"Cancel"});d.className="mod-button",d.addEventListener("click",()=>{s.close()});let f=l.createEl("button",{text:"Reset to Defaults"});f.className="mod-warning",f.addEventListener("click",async()=>{s.close();let h=this.getSettings(),c=h.siteInfo,m=h.navigation,O={...se};O.siteInfo=c,O.navigation=m,this.plugin.settings=O,await this.plugin.saveData(O),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new R.Notice("Configuration reset to defaults and applied to config.ts (site info and navigation preserved)")}catch(S){new R.Notice(`Configuration reset but failed to apply to config.ts: ${S instanceof Error?S.message:String(S)}`)}this.plugin.triggerSettingsRefresh()}),f.focus(),s.open()})),new R.Setting(a).setName("Export configuration").setDesc("Export your current configuration as JSON").addButton(i=>i.setButtonText("Export JSON").onClick(()=>{this.exportConfiguration()})),new R.Setting(a).setName("Import configuration").setDesc("Import configuration from JSON file").addButton(i=>i.setButtonText("Import JSON").onClick(()=>{this.importConfiguration()}))}exportConfiguration(){let a=JSON.stringify(this.getSettings(),null,2),e=new Blob([a],{type:"application/json"}),t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download="astro-modular-config.json",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t),new R.Notice("Configuration exported successfully!")}importConfiguration(){let a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=async e=>{var o;let t=(o=e.target.files)==null?void 0:o[0];if(t)try{let n=await t.text(),i=JSON.parse(n),s=this.getSettings();Object.assign(s,i),await this.plugin.saveData(s),new R.Notice("Configuration imported successfully!")}catch(n){new R.Notice("Failed to import configuration. Please check the file format.")}},a.click()}};var Me=class extends Pt.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){this.render()}render(){let{containerEl:e}=this;e.empty(),e.addClass("astro-modular-settings");let t=e.createDiv("tab-container"),o=t.createDiv("tab-nav"),n=t.createDiv("tab-content"),i=[{id:"general",name:"General",description:"Basic settings and configuration overview",renderer:new Ne(this.app,this.plugin)},{id:"site-info",name:"Site Info",description:"Site information and metadata",renderer:new ye(this.app,this.plugin)},{id:"navigation",name:"Navigation",description:"Navigation pages and social links",renderer:new Ie(this.app,this.plugin)},{id:"config",name:"Config",description:"Template and content organization",renderer:new _e(this.app,this.plugin)},{id:"style",name:"Style",description:"Theme and typography settings",renderer:new Ee(this.app,this.plugin)},{id:"features",name:"Features",description:"Enable or disable theme features",renderer:new be(this.app,this.plugin)},{id:"plugins",name:"Plugins",description:"Configure Obsidian plugins",renderer:new ve(this.app,this.plugin)},{id:"advanced",name:"Advanced",description:"Advanced settings and utilities",renderer:new Fe(this.app,this.plugin)}];i.forEach((s,r)=>{let l=o.createEl("button",{text:s.name,cls:`tab-button ${r===0?"active":""}`});l.title=s.description,l.addEventListener("click",()=>{o.querySelectorAll(".tab-button").forEach(d=>d.classList.remove("active")),l.classList.add("active"),n.style.opacity="0",setTimeout(()=>{n.empty(),s.renderer.render(n),n.style.opacity="1"},150)})}),i[0].renderer.render(n)}};var we=class{constructor(a){this.app=a,this.configPath="../../src/config.ts"}async getConfigFileInfo(){try{let a=require("fs"),e=require("path"),t=this.app.vault.adapter,o=t.basePath||t.path,n=typeof o=="string"?o:o?String(o):"",i=e.join(n,"..","..","src","config.ts"),s=e.dirname(i);if(a.existsSync(i)){let r=a.readFileSync(i,"utf8"),l=a.statSync(i);return{exists:!0,path:i,content:r,lastModified:new Date(l.mtime),valid:!0,errors:[]}}else return{exists:!1,path:i,content:"",lastModified:new Date,valid:!1,errors:["Config file not found"]}}catch(a){return{exists:!1,path:this.configPath,content:"",lastModified:new Date,valid:!1,errors:["Cannot access file outside vault"]}}}validateConfigContent(a){return a.includes("defineConfig")||a.includes("export default")||a.includes("astro/config")}async readConfig(){return(await this.getConfigFileInfo()).content}async writeConfig(a){console.log("\u{1F527} writeConfig called with content length:",a.length);try{let e=require("fs"),t=require("path"),o=this.app.vault.adapter,n=o.basePath||o.path,i=typeof n=="string"?n:n?String(n):"",s=t.join(i,"..","..","src","config.ts");return console.log("\u{1F527} Vault path:",i),console.log("\u{1F527} Config path:",s),console.log("\u{1F527} Config file exists:",e.existsSync(s)),e.writeFileSync(s,a,"utf8"),console.log("\u2705 Config file written successfully"),!0}catch(e){return console.error("\u274C Error writing config:",e),!1}}async detectAstroDevServer(){let a=this.app.vault.getAbstractFileByPath("package.json");if(a)try{let e=await this.app.vault.read(a);return e.includes("astro")&&e.includes("dev")}catch(e){return!1}return!1}async parseConfigFile(a){var E;let e=a||await this.readConfig();if(!e)return null;let t={};t.siteInfo={};let o=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"([^"]*)"/);o&&(t.siteInfo.site=o[1]);let n=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"([^"]*)"/);n&&(t.siteInfo.title=n[1]);let i=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"([^"]*)"/);i&&(t.siteInfo.description=i[1]);let s=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"([^"]*)"/);s&&(t.siteInfo.author=s[1]);let r=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"([^"]*)"/);r&&(t.siteInfo.language=r[1]);let l=e.match(/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"([^"]*)"/);l&&(t.currentTheme=l[1]);let d=e.match(/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"all"|\[[^\]]*\])/);if(d){let y=(E=d[0].match(/availableThemes:\s*(.+)$/))==null?void 0:E[1];if(y==='"all"')t.availableThemes="all";else if(y!=null&&y.startsWith("[")&&(y!=null&&y.endsWith("]"))){let Z=y.slice(1,-1).split(",").map(V=>V.trim().replace(/"/g,""));t.availableThemes=Z}}t.typography={};let f=e.match(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"([^"]*)"/);f&&(t.typography.fontSource=f[1]);let h=e.match(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"([^"]*)"/);h&&(t.typography.proseFont=h[1]);let c=e.match(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"([^"]*)"/);c&&(t.typography.headingFont=c[1]);let m=e.match(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"([^"]*)"/);m&&(t.typography.monoFont=m[1]),t.navigation={pages:[],social:[]};let O=e.match(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[([\s\S]*?)\]/);if(O){let Z=O[1].matchAll(/\{\s*title:\s*"([^"]*)",\s*url:\s*"([^"]*)"\s*\}/g);for(let V of Z)t.navigation.pages.push({title:V[1],url:V[2]})}let S=e.match(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[([\s\S]*?)\]/);if(S){let Z=S[1].matchAll(/\{\s*\n\s*title:\s*"([^"]*)",\s*\n\s*url:\s*"([^"]*)",\s*\n\s*icon:\s*"([^"]*)",?\s*\n\s*\}/g);for(let V of Z)t.navigation.social.push({title:V[1],url:V[2],icon:V[3]})}t.postOptions={};let v=e.match(/\/\/ \[CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS\]\s*tableOfContents:\s*(true|false)/);v&&(t.postOptions.tableOfContents=v[1]==="true");let b=e.match(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/);b&&(t.postOptions.readingTime=b[1]==="true");let P=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/),M=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/);(P||M)&&(t.postOptions.linkedMentions={enabled:P?P[1]==="true":!1,linkedMentionsCompact:M?M[1]==="true":!1});let F=e.match(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/);F&&(t.postOptions.graphView={enabled:F[1]==="true"});let w=e.match(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/);w&&(t.postOptions.postNavigation=w[1]==="true");let A=e.match(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/);A&&(t.postOptions.comments={enabled:A[1]==="true"}),t.optionalContentTypes={};let H=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*projects:\s*(true|false)/);H&&(t.optionalContentTypes.projects=H[1]==="true");let j=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*docs:\s*(true|false)/);j&&(t.optionalContentTypes.docs=j[1]==="true"),t.footer={};let q=e.match(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*(true|false)/);q&&(t.footer.showSocialIconsInFooter=q[1]==="true"),t.commandPalette={};let K=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/);K&&(t.commandPalette.enabled=K[1]==="true");let Y=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*site:\s*['"`]([^'"`]+)['"`]/);Y&&(t.site=Y[1]);let J=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*title:\s*['"`]([^'"`]+)['"`]/);J&&(t.title=J[1]);let Q=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*description:\s*['"`]([^'"`]+)['"`]/);Q&&(t.description=Q[1]);let X=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*author:\s*['"`]([^'"`]+)['"`]/);X&&(t.author=X[1]);let $=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*language:\s*['"`]([^'"`]+)['"`]/);return $&&(t.language=$[1]),t}};var Ae=class{interpolateTemplate(a,e,t){return a.replace(/\$\{settings\.currentTheme\}/g,e.currentTheme).replace(/\$\{settings\.typography\.fontSource\}/g,e.typography.fontSource).replace(/\$\{settings\.typography\.proseFont\}/g,e.typography.proseFont).replace(/\$\{settings\.typography\.headingFont\}/g,e.typography.headingFont).replace(/\$\{settings\.typography\.monoFont\}/g,e.typography.monoFont).replace(/\$\{settings\.typography\.customFonts\.prose\}/g,e.typography.customFonts.prose).replace(/\$\{settings\.typography\.customFonts\.heading\}/g,e.typography.customFonts.heading).replace(/\$\{settings\.typography\.customFonts\.mono\}/g,e.typography.customFonts.mono).replace(/\$\{settings\.optionalFeatures\.comments\.enabled\}/g,e.optionalFeatures.comments.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.enabled\}/g,e.optionalFeatures.profilePicture.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.image\}/g,e.optionalFeatures.profilePicture.image).replace(/\$\{settings\.optionalFeatures\.profilePicture\.alt\}/g,e.optionalFeatures.profilePicture.alt).replace(/\$\{settings\.optionalFeatures\.profilePicture\.size\}/g,e.optionalFeatures.profilePicture.size).replace(/\$\{settings\.optionalFeatures\.profilePicture\.url\}/g,e.optionalFeatures.profilePicture.url||"").replace(/\$\{settings\.optionalFeatures\.profilePicture\.placement\}/g,e.optionalFeatures.profilePicture.placement).replace(/\$\{settings\.optionalFeatures\.profilePicture\.style\}/g,e.optionalFeatures.profilePicture.style).replace(/\$\{settings\.deployment\.platform\}/g,e.deployment.platform).replace(/\$\{templateName\}/g,t)}getTemplateConfig(a,e){switch(a){case"standard":return{layout:{contentWidth:"45rem"},footer:{enabled:!0,showSocialIconsInFooter:!0},darkModeToggleButton:"both",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0}},optionalContentTypes:{projects:!0,docs:!0},homeOptions:{featuredPost:{enabled:!0,type:"latest"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,showInCommandPalette:!0,maxNodes:100},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"traditional"}};case"compact":return{layout:{contentWidth:"42rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!1,social:!0}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!0},graphView:{enabled:!1},postNavigation:!0,showPostCardCoverImages:"posts",postCardAspectRatio:"custom",customPostCardAspectRatio:"2.5/1"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"minimal"}};case"minimal":return{layout:{contentWidth:"40rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"",placeholder:"Search content",search:{posts:!0,pages:!0,projects:!1,docs:!1},sections:{quickActions:!1,pages:!1,social:!1}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"none"}},postOptions:{postsPerPage:6,readingTime:!1,wordCount:!1,tableOfContents:!1,tags:!1,linkedMentions:{enabled:!1,linkedMentionsCompact:!1},graphView:{enabled:!1},postNavigation:!1,showPostCardCoverImages:"none",postCardAspectRatio:"og"},navigation:{showNavigation:!1,showMobileMenu:!1,style:"minimal"}};default:return{}}}};var De=class{validateMarkers(a){let t=["CONFIG:SITE_URL","CONFIG:SITE_TITLE","CONFIG:SITE_DESCRIPTION","CONFIG:SITE_AUTHOR","CONFIG:SITE_LANGUAGE","CONFIG:THEME","CONFIG:AVAILABLE_THEMES","CONFIG:FONT_SOURCE","CONFIG:FONT_BODY","CONFIG:FONT_HEADING","CONFIG:FONT_MONO","CONFIG:LAYOUT_CONTENT_WIDTH","CONFIG:TABLE_OF_CONTENTS_ENABLED","CONFIG:TABLE_OF_CONTENTS_DEPTH","CONFIG:FOOTER_ENABLED","CONFIG:FOOTER_SHOW_SOCIAL_ICONS","CONFIG:SCROLL_TO_TOP","CONFIG:FEATURE_BUTTON","CONFIG:DEPLOYMENT_PLATFORM","CONFIG:COMMAND_PALETTE_ENABLED","CONFIG:COMMAND_PALETTE_SHORTCUT","CONFIG:COMMAND_PALETTE_PLACEHOLDER","CONFIG:COMMAND_PALETTE_SEARCH_POSTS","CONFIG:COMMAND_PALETTE_SEARCH_PAGES","CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS","CONFIG:COMMAND_PALETTE_SEARCH_DOCS","CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS","CONFIG:COMMAND_PALETTE_SECTIONS_PAGES","CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME","CONFIG:PROFILE_PICTURE_ENABLED","CONFIG:PROFILE_PICTURE_IMAGE","CONFIG:PROFILE_PICTURE_ALT","CONFIG:PROFILE_PICTURE_SIZE","CONFIG:PROFILE_PICTURE_URL","CONFIG:PROFILE_PICTURE_PLACEMENT","CONFIG:PROFILE_PICTURE_STYLE","CONFIG:NAVIGATION_SHOW_NAVIGATION","CONFIG:NAVIGATION_STYLE","CONFIG:NAVIGATION_SHOW_MOBILE_MENU","CONFIG:NAVIGATION_PAGES","CONFIG:NAVIGATION_SOCIAL","CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS","CONFIG:OPTIONAL_CONTENT_TYPES_DOCS","CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED","CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE","CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG","CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED","CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT","CONFIG:HOME_OPTIONS_PROJECTS_ENABLED","CONFIG:HOME_OPTIONS_PROJECTS_COUNT","CONFIG:HOME_OPTIONS_DOCS_ENABLED","CONFIG:HOME_OPTIONS_DOCS_COUNT","CONFIG:HOME_OPTIONS_BLURB_PLACEMENT","CONFIG:POST_OPTIONS_POSTS_PER_PAGE","CONFIG:POST_OPTIONS_READING_TIME","CONFIG:POST_OPTIONS_WORD_COUNT","CONFIG:POST_OPTIONS_TAGS","CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED","CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT","CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR","CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS","CONFIG:POST_OPTIONS_POST_NAVIGATION","CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES","CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_COMMENTS_ENABLED","CONFIG:POST_OPTIONS_COMMENTS_PROVIDER","CONFIG:POST_OPTIONS_COMMENTS_REPO","CONFIG:POST_OPTIONS_COMMENTS_REPO_ID","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID","CONFIG:POST_OPTIONS_COMMENTS_MAPPING","CONFIG:POST_OPTIONS_COMMENTS_STRICT","CONFIG:POST_OPTIONS_COMMENTS_REACTIONS","CONFIG:POST_OPTIONS_COMMENTS_METADATA","CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION","CONFIG:POST_OPTIONS_COMMENTS_THEME","CONFIG:POST_OPTIONS_COMMENTS_LANG","CONFIG:POST_OPTIONS_COMMENTS_LOADING"].filter(o=>!a.includes(`// [${o}]`));return{valid:t.length===0,missing:t}}validateSyntax(a){let e=[];try{let t=(a.match(/\{/g)||[]).length,o=(a.match(/\}/g)||[]).length,n=(a.match(/\[/g)||[]).length,i=(a.match(/\]/g)||[]).length;t!==o&&e.push("Mismatched braces"),n!==i&&e.push("Mismatched brackets")}catch(t){e.push(`Validation failed: ${t instanceof Error?t.message:String(t)}`)}return{valid:e.length===0,errors:e}}};var Ge=class{constructor(){this.templateManager=new Ae,this.markerValidator=new De}modifyConfigFromPreset(a,e){var f,h,c,m,O,S,v,b,P,M;let t={...a.config,features:a.features,currentTheme:a.theme,contentOrganization:a.contentOrganization},o=this.modifyConfigFromFeatures(t,e),n=this.templateManager.getTemplateConfig(a.name,t);if(o.includes("// [CONFIG:THEME]")){let F=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,w=o.match(F);o=o.replace(F,`// [CONFIG:THEME]
  theme: "${t.currentTheme}"`)}if(o=o.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${t.typography.fontSource}"`),o=o.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${t.typography.fontSource==="cdn"?t.typography.customFonts.prose:t.typography.proseFont}"`),o=o.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${t.typography.fontSource==="cdn"?t.typography.customFonts.heading:t.typography.headingFont}"`),o=o.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${t.typography.fontSource==="cdn"?t.typography.customFonts.mono:t.typography.monoFont}"`),o=o.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${t.deployment.platform}"`),t.optionalContentTypes){if(console.log("\u{1F527} Optional content types:",t.optionalContentTypes),t.optionalContentTypes.projects!==void 0){console.log("\u{1F527} Attempting to update projects to:",t.optionalContentTypes.projects);let F=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,w=o.match(F);console.log("\u{1F527} Projects regex match:",w),o=o.replace(F,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${t.optionalContentTypes.projects}`)}if(t.optionalContentTypes.docs!==void 0){console.log("\u{1F527} Attempting to update docs to:",t.optionalContentTypes.docs);let F=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,w=o.match(F);console.log("\u{1F527} Docs regex match:",w),o=o.replace(F,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${t.optionalContentTypes.docs}`)}}(f=n.layout)!=null&&f.contentWidth&&(o=o.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${n.layout.contentWidth}"`)),n.optionalContentTypes&&(n.optionalContentTypes.projects!==void 0&&(o=o.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${n.optionalContentTypes.projects}`)),n.optionalContentTypes.docs!==void 0&&(o=o.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${n.optionalContentTypes.docs}`))),n.featureButton&&(o=o.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*\n\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${n.featureButton}"`)),n.footer&&(n.footer.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${n.footer.enabled}`)),n.footer.showSocialIconsInFooter!==void 0&&(o=o.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${n.footer.showSocialIconsInFooter}`))),n.navigation&&(n.navigation.style&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${n.navigation.style}"`)),n.navigation.showNavigation!==void 0&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${n.navigation.showNavigation}`)),n.navigation.showMobileMenu!==void 0&&(o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${n.navigation.showMobileMenu}`))),n.commandPalette&&(n.commandPalette.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${n.commandPalette.enabled}`)),n.commandPalette.shortcut!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${n.commandPalette.shortcut}"`)),n.commandPalette.placeholder!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${n.commandPalette.placeholder}"`)),n.commandPalette.search&&(n.commandPalette.search.posts!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${n.commandPalette.search.posts}`)),n.commandPalette.search.pages!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${n.commandPalette.search.pages}`)),n.commandPalette.search.projects!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${n.commandPalette.search.projects}`)),n.commandPalette.search.docs!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${n.commandPalette.search.docs}`))),n.commandPalette.sections&&(n.commandPalette.sections.quickActions!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${n.commandPalette.sections.quickActions}`)),n.commandPalette.sections.pages!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${n.commandPalette.sections.pages}`)),n.commandPalette.sections.social!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${n.commandPalette.sections.social}`))),n.commandPalette.quickActions&&(n.commandPalette.quickActions.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${n.commandPalette.quickActions.enabled}`)),n.commandPalette.quickActions.toggleMode!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${n.commandPalette.quickActions.toggleMode}`)),n.commandPalette.quickActions.graphView!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${n.commandPalette.quickActions.graphView}`)),n.commandPalette.quickActions.changeTheme!==void 0&&(o=o.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${n.commandPalette.quickActions.changeTheme}`)))),n.homeOptions&&(n.homeOptions.featuredPost&&(n.homeOptions.featuredPost.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${n.homeOptions.featuredPost.enabled}`)),n.homeOptions.featuredPost.type&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${n.homeOptions.featuredPost.type}"`))),n.homeOptions.recentPosts&&(n.homeOptions.recentPosts.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${n.homeOptions.recentPosts.enabled}`)),n.homeOptions.recentPosts.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${n.homeOptions.recentPosts.count}`))),n.homeOptions.projects&&(n.homeOptions.projects.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${n.homeOptions.projects.enabled}`)),n.homeOptions.projects.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${n.homeOptions.projects.count}`))),n.homeOptions.docs&&(n.homeOptions.docs.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${n.homeOptions.docs.enabled}`)),n.homeOptions.docs.count&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${n.homeOptions.docs.count}`))),(h=n.homeOptions.blurb)!=null&&h.placement&&(o=o.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${n.homeOptions.blurb.placement}"`))),n.postOptions&&(n.postOptions.postsPerPage&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${n.postOptions.postsPerPage}`)),[{key:"readingTime",marker:"CONFIG:POST_OPTIONS_READING_TIME"},{key:"wordCount",marker:"CONFIG:POST_OPTIONS_WORD_COUNT"},{key:"tags",marker:"CONFIG:POST_OPTIONS_TAGS"},{key:"postNavigation",marker:"CONFIG:POST_OPTIONS_POST_NAVIGATION"}].forEach(w=>{n.postOptions[w.key]!==void 0&&(o=o.replace(new RegExp(`// \\[${w.marker}\\]\\s*${w.key}:\\s*(true|false)`),`// [${w.marker}]
    ${w.key}: ${n.postOptions[w.key]}`))}),n.postOptions.linkedMentions&&(n.postOptions.linkedMentions.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${n.postOptions.linkedMentions.enabled}`)),n.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${n.postOptions.linkedMentions.linkedMentionsCompact}`))),n.postOptions.graphView&&(n.postOptions.graphView.enabled!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${n.postOptions.graphView.enabled}`)),n.postOptions.graphView.showInSidebar!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n?\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${n.postOptions.graphView.showInSidebar}`)),n.postOptions.graphView.showInCommandPalette!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE\]\s*showInCommandPalette:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE]
      showInCommandPalette: ${n.postOptions.graphView.showInCommandPalette}`)),n.postOptions.graphView.maxNodes&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${n.postOptions.graphView.maxNodes}`)),n.postOptions.graphView.showOrphanedPosts!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${n.postOptions.graphView.showOrphanedPosts}`))),n.postOptions.showPostCardCoverImages&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${n.postOptions.showPostCardCoverImages}"`)),n.postOptions.postCardAspectRatio&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${n.postOptions.postCardAspectRatio}"`)),n.postOptions.customPostCardAspectRatio&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${n.postOptions.customPostCardAspectRatio}"`))),((m=(c=t.optionalFeatures)==null?void 0:c.profilePicture)==null?void 0:m.enabled)!==void 0&&(o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:PROFILE_PICTURE_ENABLED]
    enabled: ${t.optionalFeatures.profilePicture.enabled}`)),(S=(O=t.optionalFeatures)==null?void 0:O.profilePicture)!=null&&S.enabled&&(o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_IMAGE\]\s*image:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_IMAGE]
    image: "${t.optionalFeatures.profilePicture.image}"`),o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ALT\]\s*alt:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_ALT]
    alt: "${t.optionalFeatures.profilePicture.alt}"`),o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_SIZE\]\s*size:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_SIZE]
    size: "${t.optionalFeatures.profilePicture.size}"`),o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_URL\]\s*url:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_URL]
    url: "${t.optionalFeatures.profilePicture.url||""}"`),o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_PLACEMENT]
    placement: "${t.optionalFeatures.profilePicture.placement}"`),o=o.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_STYLE]
    style: "${t.optionalFeatures.profilePicture.style}"`)),((b=(v=t.optionalFeatures)==null?void 0:v.comments)==null?void 0:b.enabled)!==void 0&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${t.optionalFeatures.comments.enabled}`)),(M=(P=t.optionalFeatures)==null?void 0:P.comments)!=null&&M.enabled&&(t.optionalFeatures.comments.provider&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${t.optionalFeatures.comments.provider}"`)),t.optionalFeatures.comments.repo&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${t.optionalFeatures.comments.repo}"`)),t.optionalFeatures.comments.repoId&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${t.optionalFeatures.comments.repoId}"`)),t.optionalFeatures.comments.category&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${t.optionalFeatures.comments.category}"`)),t.optionalFeatures.comments.categoryId&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${t.optionalFeatures.comments.categoryId}"`)),t.optionalFeatures.comments.mapping&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${t.optionalFeatures.comments.mapping}"`)),t.optionalFeatures.comments.strict&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${t.optionalFeatures.comments.strict}"`)),t.optionalFeatures.comments.reactions&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${t.optionalFeatures.comments.reactions}"`)),t.optionalFeatures.comments.metadata&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${t.optionalFeatures.comments.metadata}"`)),t.optionalFeatures.comments.inputPosition&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${t.optionalFeatures.comments.inputPosition}"`)),t.optionalFeatures.comments.theme&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${t.optionalFeatures.comments.theme}"`)),t.optionalFeatures.comments.lang&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${t.optionalFeatures.comments.lang}"`)),t.optionalFeatures.comments.loading&&(o=o.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${t.optionalFeatures.comments.loading}"`)));let s=this.markerValidator.validateMarkers(o);if(!s.valid)return console.error("\u274C Config modification failed: Missing markers:",s.missing),console.error("Please ensure all CONFIG markers are present in your config.ts file"),e;let r=this.markerValidator.validateSyntax(o);if(!r.valid)return console.error("\u274C Config modification failed: Syntax errors:",r.errors),e;o=o.replace(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"[^"]*"/,`// [CONFIG:SITE_URL]
  site: "${t.siteInfo.site}"`),o=o.replace(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"[^"]*"/,`// [CONFIG:SITE_TITLE]
  title: "${t.siteInfo.title}"`),o=o.replace(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"[^"]*"/,`// [CONFIG:SITE_DESCRIPTION]
  description: "${t.siteInfo.description}"`),o=o.replace(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"[^"]*"/,`// [CONFIG:SITE_AUTHOR]
  author: "${t.siteInfo.author}"`),o=o.replace(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"[^"]*"/,`// [CONFIG:SITE_LANGUAGE]
  language: "${t.siteInfo.language}"`);let l=t.navigation.pages.map(F=>`      { title: "${F.title}", url: "${F.url}" }`).join(`,
`);o=o.replace(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_PAGES]
    pages: [
${l},
    ]`);let d=t.navigation.social.map(F=>`      {
        title: "${F.title}",
        url: "${F.url}",
        icon: "${F.icon}",
      }`).join(`,
`);return o=o.replace(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_SOCIAL]
    social: [
${d},
    ]`),o}modifyConfigFromFeatures(a,e){var i,s,r,l,d,f,h,c;console.log("\u{1F527} modifyConfigFromFeatures called with settings:",Object.keys(a)),console.log("\u{1F527} Current config length:",e.length);let t=e;console.log("\u{1F527} Attempting to update theme to:",a.currentTheme);let o=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,n=t.match(o);if(console.log("\u{1F527} Theme regex match:",n),t=t.replace(o,`// [CONFIG:THEME]
  theme: "${a.currentTheme}"`),a.customThemeFile&&(t=t.replace(/\/\/ \[CONFIG:CUSTOM_THEME_FILE\]\s*\n\s*customThemeFile:\s*"[^"]*"/,`// [CONFIG:CUSTOM_THEME_FILE]
  customThemeFile: "${a.customThemeFile}"`)),a.optionalContentTypes){if(console.log("\u{1F527} Optional content types:",a.optionalContentTypes),a.optionalContentTypes.projects!==void 0){console.log("\u{1F527} Attempting to update projects to:",a.optionalContentTypes.projects);let m=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,O=t.match(m);console.log("\u{1F527} Projects regex match:",O),t=t.replace(m,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${a.optionalContentTypes.projects}`)}if(a.optionalContentTypes.docs!==void 0){console.log("\u{1F527} Attempting to update docs to:",a.optionalContentTypes.docs);let m=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,O=t.match(m);console.log("\u{1F527} Docs regex match:",O),t=t.replace(m,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${a.optionalContentTypes.docs}`)}}if(a.availableThemes!==void 0){console.log("\u{1F527} Attempting to update availableThemes to:",a.availableThemes);let m;a.availableThemes==="all"?m='"all"':m=`[${a.availableThemes.map(b=>`"${b}"`).join(", ")}]`;let O=/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"all"|\[[^\]]*\])/,S=t.match(O);console.log("\u{1F527} AvailableThemes regex match:",S),t=t.replace(O,`// [CONFIG:AVAILABLE_THEMES]
  availableThemes: ${m}`)}if(t=t.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${a.typography.fontSource}"`),a.typography.fontDisplay&&(t=t.replace(/\/\/ \[CONFIG:FONT_DISPLAY\]\s*\n\s*display:\s*"[^"]*"/,`// [CONFIG:FONT_DISPLAY]
    display: "${a.typography.fontDisplay}"`)),t=t.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${a.typography.fontSource==="cdn"?a.typography.customFonts.prose:a.typography.proseFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${a.typography.fontSource==="cdn"?a.typography.customFonts.heading:a.typography.headingFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${a.typography.fontSource==="cdn"?a.typography.customFonts.mono:a.typography.monoFont}"`),t=t.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${a.deployment.platform}"`),(i=a.layout)!=null&&i.contentWidth&&(t=t.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${a.layout.contentWidth}"`)),a.tableOfContents&&(t=t.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:TABLE_OF_CONTENTS_ENABLED]
    enabled: ${a.tableOfContents.enabled}`),t=t.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_DEPTH\]\s*\n\s*depth:\s*\d+/,`// [CONFIG:TABLE_OF_CONTENTS_DEPTH]
    depth: ${a.tableOfContents.depth}`)),a.footer){if(a.footer.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${a.footer.enabled}`)),a.footer.content){let m=a.footer.content.replace(/"/g,'\\"').replace(/\n/g,"\\n");t=t.replace(/\/\/ \[CONFIG:FOOTER_CONTENT\]\s*\n\s*content:\s*`[^`]*`/,`// [CONFIG:FOOTER_CONTENT]
    content: \`${a.footer.content}\``)}a.footer.showSocialIconsInFooter!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*\n\s*showSocialIconsInFooter:\s*(true|false)/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${a.footer.showSocialIconsInFooter}`))}return(s=a.seo)!=null&&s.defaultOgImageAlt&&(t=t.replace(/\/\/ \[CONFIG:SEO_DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:SEO_DEFAULT_OG_IMAGE_ALT]
    defaultOgImageAlt: "${a.seo.defaultOgImageAlt}"`)),a.navigation&&(a.navigation.showNavigation!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*\n\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${a.navigation.showNavigation}`)),a.navigation.style&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*\n\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${a.navigation.style}"`)),a.navigation.showMobileMenu!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*\n\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${a.navigation.showMobileMenu}`))),a.commandPalette&&(a.commandPalette.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${a.commandPalette.enabled}`)),a.commandPalette.shortcut&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*\n\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${a.commandPalette.shortcut}"`)),a.commandPalette.placeholder&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*\n\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${a.commandPalette.placeholder}"`)),a.commandPalette.search&&(a.commandPalette.search.posts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*\n\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${a.commandPalette.search.posts}`)),a.commandPalette.search.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${a.commandPalette.search.pages}`)),a.commandPalette.search.projects!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${a.commandPalette.search.projects}`)),a.commandPalette.search.docs!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${a.commandPalette.search.docs}`))),a.commandPalette.sections&&(a.commandPalette.sections.quickActions!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*\n\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${a.commandPalette.sections.quickActions}`)),a.commandPalette.sections.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${a.commandPalette.sections.pages}`)),a.commandPalette.sections.social!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*\n\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${a.commandPalette.sections.social}`)))),a.homeOptions&&(a.homeOptions.featuredPost&&(a.homeOptions.featuredPost.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${a.homeOptions.featuredPost.enabled}`)),a.homeOptions.featuredPost.type&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*\n\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${a.homeOptions.featuredPost.type}"`)),a.homeOptions.featuredPost.slug&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG\]\s*\n\s*slug:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG]
      slug: "${a.homeOptions.featuredPost.slug}"`))),a.homeOptions.recentPosts&&(a.homeOptions.recentPosts.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${a.homeOptions.recentPosts.enabled}`)),a.homeOptions.recentPosts.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${a.homeOptions.recentPosts.count}`))),a.homeOptions.projects&&(a.homeOptions.projects.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${a.homeOptions.projects.enabled}`)),a.homeOptions.projects.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${a.homeOptions.projects.count}`))),a.homeOptions.docs&&(a.homeOptions.docs.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${a.homeOptions.docs.enabled}`)),a.homeOptions.docs.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${a.homeOptions.docs.count}`))),(r=a.homeOptions.blurb)!=null&&r.placement&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*\n\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${a.homeOptions.blurb.placement}"`))),a.postOptions&&(a.postOptions.postsPerPage&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*\n\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${a.postOptions.postsPerPage}`)),a.postOptions.wordCount!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*\n\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${a.postOptions.wordCount}`)),a.postOptions.tags!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*\n\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${a.postOptions.tags}`)),a.postOptions.linkedMentions&&a.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*\n\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${a.postOptions.linkedMentions.linkedMentionsCompact}`)),a.postOptions.graphView&&(a.postOptions.graphView.showInSidebar!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${a.postOptions.graphView.showInSidebar}`)),a.postOptions.graphView.maxNodes&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*\n\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${a.postOptions.graphView.maxNodes}`)),a.postOptions.graphView.showOrphanedPosts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*\n\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${a.postOptions.graphView.showOrphanedPosts}`))),a.postOptions.customPostCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*\n\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${a.postOptions.customPostCardAspectRatio}"`))),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${(d=(l=a.commandPalette)==null?void 0:l.enabled)!=null?d:a.features.commandPalette}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_READING_TIME]
    readingTime: ${a.features.readingTime}`),"wordCount"in a.features&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${a.features.wordCount}`)),"tags"in a.features&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${a.features.tags}`)),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${a.features.linkedMentions}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${(f=a.features.linkedMentionsCompact)!=null?f:!1}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${a.features.comments}`),a.features.comments&&((h=a.optionalFeatures)!=null&&h.comments)&&(a.optionalFeatures.comments.provider&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${a.optionalFeatures.comments.provider}"`)),a.optionalFeatures.comments.repo&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${a.optionalFeatures.comments.repo}"`)),a.optionalFeatures.comments.repoId&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${a.optionalFeatures.comments.repoId}"`)),a.optionalFeatures.comments.category&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${a.optionalFeatures.comments.category}"`)),a.optionalFeatures.comments.categoryId&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${a.optionalFeatures.comments.categoryId}"`)),a.optionalFeatures.comments.mapping&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${a.optionalFeatures.comments.mapping}"`)),a.optionalFeatures.comments.strict&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${a.optionalFeatures.comments.strict}"`)),a.optionalFeatures.comments.reactions&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${a.optionalFeatures.comments.reactions}"`)),a.optionalFeatures.comments.metadata&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${a.optionalFeatures.comments.metadata}"`)),a.optionalFeatures.comments.inputPosition&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${a.optionalFeatures.comments.inputPosition}"`)),a.optionalFeatures.comments.theme&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${a.optionalFeatures.comments.theme}"`)),a.optionalFeatures.comments.lang&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${a.optionalFeatures.comments.lang}"`)),a.optionalFeatures.comments.loading&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${a.optionalFeatures.comments.loading}"`))),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${a.features.graphView}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_POST_NAVIGATION]
    postNavigation: ${a.features.postNavigation}`),t=t.replace(/\/\/ \[CONFIG:SCROLL_TO_TOP\]\s*scrollToTop:\s*(true|false)/,`// [CONFIG:SCROLL_TO_TOP]
  scrollToTop: ${a.features.scrollToTop}`),t=t.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${a.features.showSocialIconsInFooter}`),t=t.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${a.features.featureButton}"`),(c=a.features)!=null&&c.quickActions&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${a.features.quickActions.enabled}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${a.features.quickActions.toggleMode}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${a.features.quickActions.graphView}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${a.features.quickActions.changeTheme}`)),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${a.features.showPostCardCoverImages}"`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${a.features.postCardAspectRatio}"`),a.features.customPostCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${a.features.customPostCardAspectRatio}"`)),console.log("\u{1F527} modifyConfigFromFeatures returning modified config, length:",t.length),console.log("\u{1F527} Config changed:",t!==e),t}};var qe={};ne(qe,{config:()=>Gt,default:()=>Lt,description:()=>Dt,name:()=>At});var At="Standard",Dt="Full-featured blog with all options enabled",Gt={currentTemplate:"standard",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},tableOfContents:{enabled:!0,depth:4}},Lt={name:At,description:Dt,config:Gt};var Ke={};ne(Ke,{config:()=>Rt,default:()=>Ht,description:()=>kt,name:()=>xt});var xt="Minimal",kt="Clean, simple blog with minimal features",Rt={currentTemplate:"minimal",features:{commandPalette:!0,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!1,toggleMode:!1,graphView:!1,changeTheme:!1}},tableOfContents:{enabled:!1,depth:4}},Ht={name:xt,description:kt,config:Rt};var Ye={};ne(Ye,{config:()=>Bt,default:()=>Ut,description:()=>Vt,name:()=>$t});var $t="Compact",Vt="Balanced setup for smaller sites",Bt={currentTemplate:"compact",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!0,toggleMode:!0,graphView:!1,changeTheme:!0}},tableOfContents:{enabled:!0,depth:2}},Ut={name:$t,description:Vt,config:Bt};var Re=class{constructor(a){this.app=a,this.fileManager=new we(a),this.presetModifier=new Ge}async getConfigFileInfo(){return this.fileManager.getConfigFileInfo()}async readConfig(){return this.fileManager.readConfig()}async writeConfig(a){return this.fileManager.writeConfig(a)}async applyPreset(a){let e=await this.readConfig(),t=this.presetModifier.modifyConfigFromPreset(a,e);return await this.writeConfig(t)}async detectAstroDevServer(){return this.fileManager.detectAstroDevServer()}async updateIndividualFeatures(a){let e=await this.readConfig(),t=this.presetModifier.modifyConfigFromFeatures(a,e);return await this.writeConfig(t)}async triggerRebuild(){}getTemplatePreset(a){try{switch(a){case"standard":return qe;case"minimal":return Ke;case"compact":return Ye;default:return console.error(`Unknown template ID: ${a}`),null}}catch(e){return console.error("Error loading template preset:",e),null}}};var He=class{constructor(a){this.app=a}async getPluginStatus(){var o;let a=this.app.plugins,e=["astro-composer","insert-unsplash-image","obsidian-shellcommands"],t=[];for(let n of e){let i=(o=a==null?void 0:a.plugins)==null?void 0:o[n],s=(a==null?void 0:a.enabledPlugins)&&a.enabledPlugins.has(n),r=this.isPluginInstalled(n);t.push({name:this.getPluginDisplayName(n),installed:r,enabled:s||!1,configurable:this.isPluginConfigurable(n),currentSettings:i?await this.getPluginSettings(i):void 0})}return t}isPluginInstalled(a){var o,n;let e=(o=this.app.plugins)==null?void 0:o.communityPlugins;if(e&&Array.isArray(e))return e.includes(a);let t=this.app.plugins;return!!((n=t==null?void 0:t.plugins)!=null&&n[a])}getPluginDisplayName(a){return{"astro-composer":"Astro Composer","insert-unsplash-image":"Image Inserter","obsidian-shellcommands":"Shell Commands"}[a]||a}isPluginConfigurable(a){return["astro-composer","insert-unsplash-image"].includes(a)}async getPluginSettings(a){return{}}async configurePlugins(a){let e=0,t=0;try{return t++,await this.configureObsidianSettings(a.obsidianSettings),e++,t++,await this.configureAstroComposerSettings(a.astroComposerSettings),e++,t++,await this.configureImageInserterSettings(a.imageInserterSettings),e++,e>0}catch(o){return console.error("Plugin configuration failed:",o),!1}}async configureObsidianSettings(a){try{let e=this.app;if(e.setting&&typeof e.setting.set=="function")a.attachmentLocation==="subfolder"?(await e.setting.set("attachmentFolderPath",`./${a.subfolderName}`),await e.setting.set("newLinkFormat","relative")):(await e.setting.set("attachmentFolderPath","./"),await e.setting.set("newLinkFormat","relative")),typeof e.setting.save=="function"&&await e.setting.save();else{let t=this.app.vault.config;a.attachmentLocation==="subfolder"?(t.newLinkFormat="relative",t.attachmentFolderPath=`./${a.subfolderName}`):(t.newLinkFormat="relative",t.attachmentFolderPath="./"),await this.app.vault.saveConfig()}try{e.setting&&e.setting.open}catch(t){}}catch(e){throw console.error("Failed to configure Obsidian settings:",e),e}}async configureAstroComposerSettings(a){var e;try{let t=this.app.plugins,o=(e=t==null?void 0:t.plugins)==null?void 0:e["astro-composer"];o&&o.settings&&(o.settings.creationMode=a.creationMode,o.settings.indexFileName=a.indexFileName,await o.saveSettings())}catch(t){console.error("Failed to configure Astro Composer:",t)}}async configureImageInserterSettings(a){var e;try{let t=this.app.plugins,o=(e=t==null?void 0:t.plugins)==null?void 0:e["insert-unsplash-image"];o&&o.settings&&(o.settings.frontmatter&&(o.settings.frontmatter.valueFormat=a.valueFormat),await o.saveSettings())}catch(t){console.error("Failed to configure Image Inserter:",t)}}async getManualConfigurationInstructions(a){let e=`## Obsidian Settings
`;return e+=`1. Go to **Settings \u2192 Files & Links**
`,e+="2. Set **Default location for new attachments** to: ",e+=a.obsidianSettings.attachmentLocation==="subfolder"?`**"In subfolder under current folder"**
`:`**"Same folder as current file"**
`,a.obsidianSettings.attachmentLocation==="subfolder"&&(e+=`3. Set **Subfolder name** to: **"${a.obsidianSettings.subfolderName}"**
`),e+=`## Astro Composer Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Astro Composer**
`,e+=`2. Set **Creation mode** to: "${a.astroComposerSettings.creationMode==="file"?"File-based":"Folder-based"}"
`,a.astroComposerSettings.creationMode==="folder"&&(e+=`3. Set **Index file name** to: "${a.astroComposerSettings.indexFileName}"
`),e+=`## Image Inserter Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Image Inserter**
`,e+=`2. Set **Frontmatter \u2192 Value Format** to: "${a.imageInserterSettings.valueFormat}"
`,e+=`**Note**: After making these changes, you should see them reflected in Obsidian's settings interface. If the automatic configuration worked, these settings should already be applied.
`,e}};var $e=class extends _t.Plugin{async onload(){await this.loadSettings(),this.configManager=new Re(this.app),this.pluginManager=new He(this.app),yt(this),this.settingsTab=new Me(this.app,this),this.addSettingTab(this.settingsTab),this.addRibbonIcon("rocket","Astro Modular Settings",async()=>{await this.loadSettings(),new W(this.app,this).open()}),this.settings.runWizardOnStartup&&(this.startupTimeoutId=window.setTimeout(()=>{this.runStartupWizard()},2e3))}onunload(){this.startupTimeoutId&&(window.clearTimeout(this.startupTimeoutId),this.startupTimeoutId=void 0)}async loadSettings(){this.settings=Object.assign({},se,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async runStartupWizard(){await this.loadSettings(),new W(this.app,this).open()}openSettings(){this.app.setting.open(),this.app.setting.openTabById(this.manifest.id)}triggerSettingsRefresh(){this.settingsTab&&this.settingsTab.render()}};
