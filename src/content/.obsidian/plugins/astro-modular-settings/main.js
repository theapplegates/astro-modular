/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var lt=Object.defineProperty;var St=Object.getOwnPropertyDescriptor;var yt=Object.getOwnPropertyNames;var It=Object.prototype.hasOwnProperty;var vt=(D,a)=>()=>(D&&(a=D(D=0)),a);var Ne=(D,a)=>{for(var e in a)lt(D,e,{get:a[e],enumerable:!0})},Pt=(D,a,e,t)=>{if(a&&typeof a=="object"||typeof a=="function")for(let n of yt(a))!It.call(D,n)&&n!==e&&lt(D,n,{get:()=>a[n],enumerable:!(t=St(a,n))||t.enumerable});return D};var Nt=D=>Pt(lt({},"__esModule",{value:!0}),D);var pt={};Ne(pt,{GiscusScriptParser:()=>ct});var ct,dt=vt(()=>{"use strict";ct=class{static parseScript(a){try{let e=a.trim();if(!e.includes("giscus.app/client.js"))return null;let t={},n=/data-([a-z-]+)="([^"]*)"/g,o;for(;(o=n.exec(e))!==null;){let[,c,p]=o;t[c]=p}let s={repo:t.repo||"",repoId:t["repo-id"]||"",category:t.category||"",categoryId:t["category-id"]||"",mapping:t.mapping!==void 0?t.mapping:"",strict:t.strict!==void 0?t.strict:"",reactions:t["reactions-enabled"]!==void 0?t["reactions-enabled"]:"",metadata:t["emit-metadata"]!==void 0?t["emit-metadata"]:"",inputPosition:t["input-position"]!==void 0?t["input-position"]:"",theme:t.theme!==void 0?t.theme:"",lang:t.lang!==void 0?t.lang:"",loading:t.loading!==void 0?t.loading:""};return!s.repo||!s.repoId?null:s}catch(e){return console.error("Error parsing Giscus script:",e),null}}static validateScript(a){let e=a.trim();if(!e.includes("giscus.app/client.js"))return{valid:!1,error:"Script must contain giscus.app/client.js"};if(!e.includes("<script")||!e.includes("<\/script>"))return{valid:!1,error:"Script must be a valid HTML script tag"};let t=this.parseScript(a);return t?t.repo?t.repoId?{valid:!0}:{valid:!1,error:"Repository ID (data-repo-id) is required"}:{valid:!1,error:"Repository (data-repo) is required"}:{valid:!1,error:"Could not parse Giscus configuration from script"}}static getSampleScript(){return`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`}}});var Rt={};Ne(Rt,{default:()=>rt});module.exports=Nt(Rt);var Tt=require("obsidian");var ve=["Inter","Roboto","Open Sans","Lato","Poppins","Source Sans Pro","Nunito","Montserrat","Playfair Display","Merriweather","Lora","Crimson Text","PT Serif","Libre Baskerville","Fira Code","JetBrains Mono","Source Code Pro","IBM Plex Mono","Cascadia Code"],be={runWizardOnStartup:!0,currentTemplate:"standard",currentTheme:"oxygen",customThemeFile:"custom",contentOrganization:"file-based",themeColors:{mode:"simple",extractedColors:void 0,simpleColors:{accent:"#5865f2",background:"#1e1e1e"},lastExtracted:void 0},siteInfo:{site:"https://astro-modular.netlify.app",title:"Astro Modular",description:"A flexible blog theme designed for Obsidian users.",author:"David V. Kimball",language:"en",faviconThemeAdaptive:!0,defaultOgImageAlt:"Astro Modular logo."},layout:{contentWidth:"45rem"},tableOfContents:{enabled:!0,depth:4},footer:{enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0},seo:{defaultOgImageAlt:"Astro Modular logo."},navigation:{showNavigation:!0,style:"traditional",showMobileMenu:!0,pages:[{title:"Posts",url:"/posts"},{title:"Projects",url:"/projects"},{title:"Docs",url:"/docs"},{title:"About",url:"/about"},{title:"GitHub",url:"https://github.com/davidvkimball/astro-modular"}],social:[{title:"X",url:"https://x.com/davidvkimball",icon:"x-twitter"},{title:"GitHub",url:"https://github.com/davidvkimball",icon:"github"}]},commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},homeOptions:{featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,comments:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,featureButton:"mode",showSocialIconsInFooter:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",profilePicture:!1,quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},typography:{headingFont:"Inter",proseFont:"Inter",monoFont:"JetBrains Mono",fontSource:"local",fontDisplay:"swap",customFonts:{heading:"",prose:"",mono:"",urls:""}},optionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},deployment:{platform:"netlify"},pluginConfig:{obsidianSettings:{attachmentLocation:"subfolder",subfolderName:"attachments"},astroComposerSettings:{creationMode:"file",indexFileName:"index"},imageInserterSettings:{valueFormat:"[[attachments/{image-url}]]",insertFormat:"[[attachments/{image-url}]]"}},optionalContentTypes:{projects:!0,docs:!0},availableThemes:"default",customThemes:"",customThemeGenerationEnabled:!1,removeRibbonIcon:!1},ne=[{id:"oxygen",name:"Oxygen",description:"Modern, clean design",previewColors:["#075985","#38bdf8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#020617"},{id:"minimal",name:"Minimal",description:"Understated with high contrast",previewColors:["#2d383c","#87bfcf"],backgroundColorLight:"#fafafa",backgroundColorDark:"#1a1a1a"},{id:"atom",name:"Atom",description:"Dark theme with vibrant accents",previewColors:["#075985","#578af2"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#181a1f"},{id:"ayu",name:"Ayu",description:"Clean theme with warm colors",previewColors:["#99521a","#ff9933"],backgroundColorLight:"#f8f8f0",backgroundColorDark:"#0f1419"},{id:"catppuccin",name:"Catppuccin",description:"Pastel color palette",previewColors:["#95624f","#df7763"],backgroundColorLight:"#fef7ed",backgroundColorDark:"#181825"},{id:"charcoal",name:"Charcoal",description:"Dark, professional look",previewColors:["#202020","#c0c0c0"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#000000"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents",previewColors:["#7c3aed","#a78bfa"],backgroundColorLight:"#f8f8f2",backgroundColorDark:"#191a21"},{id:"everforest",name:"Everforest",description:"Soft, warm colors",previewColors:["#5a7a5a","#83c092"],backgroundColorLight:"#f7f6f3",backgroundColorDark:"#2d353b"},{id:"flexoki",name:"Flexoki",description:"Based on Material Design 3",previewColors:["#16504a","#4dbdb5"],backgroundColorLight:"#fefefe",backgroundColorDark:"#100f0f"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove color scheme",previewColors:["#7a5412","#f78b33"],backgroundColorLight:"#fbf1c7",backgroundColorDark:"#1d2021"},{id:"macos",name:"macOS",description:"Native macOS appearance",previewColors:["#002e66","#339fff"],backgroundColorLight:"#f5f5f7",backgroundColorDark:"#141414"},{id:"nord",name:"Nord",description:"Arctic-inspired color palette",previewColors:["#2e4c63","#5e94b8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#2e3440"},{id:"obsidian",name:"Obsidian",description:"Matches Obsidian's default theme",previewColors:["#522994","#9c75ff"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#0a0a0a"},{id:"rose-pine",name:"Ros\xE9 Pine",description:"All natural pine, faux fir, and winter",previewColors:["#ab2142","#ef97a9"],backgroundColorLight:"#faf4ed",backgroundColorDark:"#191724"},{id:"sky",name:"Sky",description:"Light, airy design",previewColors:["#136194","#46aad0"],backgroundColorLight:"#f0f9ff",backgroundColorDark:"#232729"},{id:"solarized",name:"Solarized",description:"Precision colors for machines and people",previewColors:["#0e3754","#339fff"],backgroundColorLight:"#fdf6e3",backgroundColorDark:"#002b36"},{id:"things",name:"Things",description:"Clean, minimal design",previewColors:["#1e3a8a","#4d95f7"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#17191c"},{id:"custom",name:"Custom",description:"Use a custom theme file",previewColors:["#666666","#999999"],backgroundColorLight:"#ffffff",backgroundColorDark:"#000000"}],oe=[{id:"standard",name:"Standard",description:"Full-featured blog with all default options enabled",features:["Command palette","Table of contents","Reading time","Linked mentions","Footer","Social icons","Scroll to top","Dark mode toggle"],recommended:!0},{id:"compact",name:"Compact",description:"Balanced setup for smaller sites with optimized layout",features:["Command palette","Table of contents","Reading time","Compact linked mentions","Custom aspect ratio"],recommended:!1},{id:"minimal",name:"Minimal",description:"Clean, simple blog with minimal features and content",features:["Command palette","Search posts/pages","Minimal navigation"],recommended:!1}];var Pe=require("obsidian");var Ae=class{constructor(a){var t,n,o,s,c,p,l,i,d,r,u,m,S,T;this.plugin=a;let e=a.settings;this.state={currentStep:1,totalSteps:10,selectedTemplate:e.currentTemplate,selectedTheme:e.currentTheme,selectedContentOrg:e.contentOrganization,selectedSiteInfo:e.siteInfo,selectedNavigation:e.navigation,selectedFeatures:(()=>{var E,A;let y={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},custom:{...e.features}},g=y[e.currentTemplate]||y.standard;return(E=e.optionalFeatures)!=null&&E.profilePicture&&(g.profilePicture=e.optionalFeatures.profilePicture.enabled),(A=e.optionalFeatures)!=null&&A.comments&&(g.comments=e.optionalFeatures.comments.enabled),g})(),selectedTypography:e.typography,selectedOptionalFeatures:{profilePicture:{enabled:((n=(t=e.optionalFeatures)==null?void 0:t.profilePicture)==null?void 0:n.enabled)||!1,image:((s=(o=e.optionalFeatures)==null?void 0:o.profilePicture)==null?void 0:s.image)||"/profile.jpg",alt:((p=(c=e.optionalFeatures)==null?void 0:c.profilePicture)==null?void 0:p.alt)||"Profile picture",size:((i=(l=e.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.size)||"md",url:((r=(d=e.optionalFeatures)==null?void 0:d.profilePicture)==null?void 0:r.url)||"",placement:((m=(u=e.optionalFeatures)==null?void 0:u.profilePicture)==null?void 0:m.placement)||"footer",style:((T=(S=e.optionalFeatures)==null?void 0:S.profilePicture)==null?void 0:T.style)||"circle"},comments:(()=>{var E,A,F;let y=((A=(E=e.optionalFeatures)==null?void 0:E.comments)==null?void 0:A.enabled)||!1,g=(F=e.optionalFeatures)==null?void 0:F.comments;return y?{enabled:!0,provider:(g==null?void 0:g.provider)||"giscus",rawScript:(g==null?void 0:g.rawScript)||"",repo:(g==null?void 0:g.repo)||"davidvkimball/astro-modular",repoId:(g==null?void 0:g.repoId)||"R_kgDOPllfKw",category:(g==null?void 0:g.category)||"General",categoryId:(g==null?void 0:g.categoryId)||"DIC_kwDOPllfK84CvUpx",mapping:(g==null?void 0:g.mapping)||"pathname",strict:(g==null?void 0:g.strict)||"0",reactions:(g==null?void 0:g.reactions)||"1",metadata:(g==null?void 0:g.metadata)||"0",inputPosition:(g==null?void 0:g.inputPosition)||"bottom",theme:(g==null?void 0:g.theme)||"preferred_color_scheme",lang:(g==null?void 0:g.lang)||"en",loading:(g==null?void 0:g.loading)||"lazy"}:{enabled:!1,provider:(g==null?void 0:g.provider)||"giscus",rawScript:(g==null?void 0:g.rawScript)||"",repo:(g==null?void 0:g.repo)||"",repoId:(g==null?void 0:g.repoId)||"",category:(g==null?void 0:g.category)||"",categoryId:(g==null?void 0:g.categoryId)||"",mapping:(g==null?void 0:g.mapping)||"",strict:(g==null?void 0:g.strict)||"",reactions:(g==null?void 0:g.reactions)||"",metadata:(g==null?void 0:g.metadata)||"",inputPosition:(g==null?void 0:g.inputPosition)||"",theme:(g==null?void 0:g.theme)||"",lang:(g==null?void 0:g.lang)||"",loading:(g==null?void 0:g.loading)||""}})()},selectedOptionalContentTypes:(()=>{let y=e.currentTemplate==="standard";return{projects:y,docs:y}})(),selectedDeployment:e.deployment.platform,runWizardOnStartup:e.runWizardOnStartup}}getState(){return this.state}updateState(a){this.state={...this.state,...a}}setState(a){this.state={...this.state,...a}}nextStep(){this.state.currentStep<this.state.totalSteps&&this.state.currentStep++}previousStep(){this.state.currentStep>1&&this.state.currentStep--}canGoNext(){return this.state.currentStep<this.state.totalSteps}canGoPrevious(){return this.state.currentStep>1}getProgress(){return this.state.currentStep/this.state.totalSteps*100}refreshState(){var o,s,c,p,l,i,d,r,u,m,S,T,y,g,E,A;let a=this.plugin.settings;this.state.selectedTemplate=a.currentTemplate,this.state.selectedTheme=a.currentTheme,this.state.selectedContentOrg=a.contentOrganization,this.state.selectedSiteInfo=a.siteInfo,this.state.selectedNavigation=a.navigation,this.state.selectedTypography=a.typography,this.state.selectedDeployment=a.deployment.platform,this.state.runWizardOnStartup=a.runWizardOnStartup;let e={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}},t=e[a.currentTemplate]||e.standard;(o=a.optionalFeatures)!=null&&o.profilePicture&&(t.profilePicture=a.optionalFeatures.profilePicture.enabled),(s=a.optionalFeatures)!=null&&s.comments&&(t.comments=a.optionalFeatures.comments.enabled),this.state.selectedFeatures=t,this.state.selectedOptionalFeatures={profilePicture:{enabled:((p=(c=a.optionalFeatures)==null?void 0:c.profilePicture)==null?void 0:p.enabled)||!1,image:((i=(l=a.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.image)||"/profile.jpg",alt:((r=(d=a.optionalFeatures)==null?void 0:d.profilePicture)==null?void 0:r.alt)||"Profile picture",size:((m=(u=a.optionalFeatures)==null?void 0:u.profilePicture)==null?void 0:m.size)||"md",url:((T=(S=a.optionalFeatures)==null?void 0:S.profilePicture)==null?void 0:T.url)||"",placement:((g=(y=a.optionalFeatures)==null?void 0:y.profilePicture)==null?void 0:g.placement)||"footer",style:((A=(E=a.optionalFeatures)==null?void 0:E.profilePicture)==null?void 0:A.style)||"circle"},comments:(()=>{var b,k,w;let F=((k=(b=a.optionalFeatures)==null?void 0:b.comments)==null?void 0:k.enabled)||!1,h=(w=a.optionalFeatures)==null?void 0:w.comments;return F?{enabled:!0,provider:(h==null?void 0:h.provider)||"giscus",rawScript:(h==null?void 0:h.rawScript)||"",repo:(h==null?void 0:h.repo)||"davidvkimball/astro-modular",repoId:(h==null?void 0:h.repoId)||"R_kgDOPllfKw",category:(h==null?void 0:h.category)||"General",categoryId:(h==null?void 0:h.categoryId)||"DIC_kwDOPllfK84CvUpx",mapping:(h==null?void 0:h.mapping)||"pathname",strict:(h==null?void 0:h.strict)||"0",reactions:(h==null?void 0:h.reactions)||"1",metadata:(h==null?void 0:h.metadata)||"0",inputPosition:(h==null?void 0:h.inputPosition)||"bottom",theme:(h==null?void 0:h.theme)||"preferred_color_scheme",lang:(h==null?void 0:h.lang)||"en",loading:(h==null?void 0:h.loading)||"lazy"}:{enabled:!1,provider:(h==null?void 0:h.provider)||"giscus",rawScript:(h==null?void 0:h.rawScript)||"",repo:(h==null?void 0:h.repo)||"",repoId:(h==null?void 0:h.repoId)||"",category:(h==null?void 0:h.category)||"",categoryId:(h==null?void 0:h.categoryId)||"",mapping:(h==null?void 0:h.mapping)||"",strict:(h==null?void 0:h.strict)||"",reactions:(h==null?void 0:h.reactions)||"",metadata:(h==null?void 0:h.metadata)||"",inputPosition:(h==null?void 0:h.inputPosition)||"",theme:(h==null?void 0:h.theme)||"",lang:(h==null?void 0:h.lang)||"",loading:(h==null?void 0:h.loading)||""}})()};let n=a.currentTemplate==="standard";this.state.selectedOptionalContentTypes={projects:n,docs:n}}buildFinalSettings(){var t,n,o,s,c,p,l,i;let a=this.plugin.settings,e=a.currentTemplate;if(a.currentTemplate=this.state.selectedTemplate,a.currentTheme=this.state.selectedTheme,a.contentOrganization=this.state.selectedContentOrg,a.siteInfo=this.state.selectedSiteInfo,a.navigation=this.state.selectedNavigation,a.features=this.state.selectedFeatures,a.typography=this.state.selectedTypography,a.optionalFeatures=this.state.selectedOptionalFeatures,a.deployment.platform=this.state.selectedDeployment,a.runWizardOnStartup=this.state.runWizardOnStartup,this.state.selectedFeatures&&((t=a.postOptions)!=null&&t.graphView&&(a.postOptions.graphView.enabled=(n=this.state.selectedFeatures.graphView)!=null?n:!1),(o=a.postOptions)!=null&&o.linkedMentions&&(a.postOptions.linkedMentions.enabled=(s=this.state.selectedFeatures.linkedMentions)!=null?s:!1,a.postOptions.linkedMentions.linkedMentionsCompact=(c=this.state.selectedFeatures.linkedMentionsCompact)!=null?c:!1),(p=a.commandPalette)!=null&&p.quickActions&&this.state.selectedFeatures.quickActions&&(a.commandPalette.quickActions={...a.commandPalette.quickActions,...this.state.selectedFeatures.quickActions})),this.state.selectedTemplate!==e){let d=this.plugin.configManager.getTemplatePreset(this.state.selectedTemplate);d&&d.config&&d.config.tableOfContents&&(a.tableOfContents={...a.tableOfContents,...d.config.tableOfContents})}(l=a.optionalFeatures)!=null&&l.profilePicture&&(a.features.profilePicture=a.optionalFeatures.profilePicture.enabled),(i=a.optionalFeatures)!=null&&i.comments&&(a.features.comments=a.optionalFeatures.comments.enabled,a.postOptions?a.postOptions.comments?(a.postOptions.comments.enabled=a.optionalFeatures.comments.enabled,Object.assign(a.postOptions.comments,a.optionalFeatures.comments)):a.postOptions.comments={...a.optionalFeatures.comments}:a.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{...a.optionalFeatures.comments}}),a.optionalContentTypes=this.state.selectedOptionalContentTypes}};var Q=class{constructor(a,e,t,n){this.app=a,this.modal=e,this.stateManager=t,this.plugin=n}nextStep(){this.stateManager.nextStep(),this.modal.close()}previousStep(){this.stateManager.previousStep(),this.modal.close()}updateState(a){this.stateManager.updateState(a)}getState(){return this.stateManager.getState()}};var Fe=class extends Q{render(a){var t,n,o,s,c,p;let e=this.getState();a.innerHTML=`
			<div class="welcome-content">
				<h2>Welcome to Astro Modular!</h2>
				<p>This wizard will help you set up your Astro Modular theme with the perfect configuration for your needs.</p>
				
				<div class="checkbox-option">
					<input type="checkbox" id="run-wizard-startup" ${e.runWizardOnStartup?"checked":""}>
					<label for="run-wizard-startup">Run this wizard on startup</label>
				</div>
				
				<div class="site-info-form">
					<h3>Site Information</h3>
					<div class="form-group">
						<label for="site-url">URL</label>
						<input type="text" id="site-url" value="${e.selectedSiteInfo.site}" placeholder="https://astro-modular.netlify.app">
					</div>
					<div class="form-group">
						<label for="site-title">Title</label>
						<input type="text" id="site-title" value="${e.selectedSiteInfo.title}" placeholder="Astro Modular">
					</div>
					<div class="form-group">
						<label for="site-description">Description</label>
						<input type="text" id="site-description" value="${e.selectedSiteInfo.description}" placeholder="A flexible blog theme designed for Obsidian users.">
					</div>
					<div class="form-group">
						<label for="site-author">Author Name</label>
						<input type="text" id="site-author" value="${e.selectedSiteInfo.author}" placeholder="David V. Kimball">
					</div>
					<div class="form-group">
						<label for="site-language">Language</label>
						<input type="text" id="site-language" value="${e.selectedSiteInfo.language}" placeholder="en">
					</div>
				</div>
			</div>
		`,(t=a.querySelector("#run-wizard-startup"))==null||t.addEventListener("change",l=>{let i=l.target;this.updateState({runWizardOnStartup:i.checked})}),(n=a.querySelector("#site-url"))==null||n.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,site:l.target.value}})}),(o=a.querySelector("#site-title"))==null||o.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,title:l.target.value}})}),(s=a.querySelector("#site-description"))==null||s.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,description:l.target.value}})}),(c=a.querySelector("#site-author"))==null||c.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,author:l.target.value}})}),(p=a.querySelector("#site-language"))==null||p.addEventListener("input",l=>{let i=this.getState();this.updateState({selectedSiteInfo:{...i.selectedSiteInfo,language:l.target.value}})})}};var Ee=require("obsidian"),De=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="template-selection">
				<h2>Choose your preset</h2>
				<p>Select a preset that best fits your content type and goals.</p>
				<div class="template-options">
					${oe.map(n=>`
						<div class="template-option ${e.selectedTemplate===n.id?"selected":""}" 
							 data-template="${n.id}">
							<div class="template-header">
								<h3>${n.name}</h3>
								${n.recommended?'<span class="recommended">Default</span>':""}
							</div>
							<p class="template-description">${n.description}</p>
							<div class="template-features">
								${n.features.map(o=>`<span class="feature-tag">${o}</span>`).join("")}
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".template-option").forEach(n=>{n.addEventListener("click",()=>{let o=n.getAttribute("data-template");if(o){this.updateState({selectedTemplate:o});let s=o==="standard";this.updateState({selectedOptionalContentTypes:{projects:s,docs:s}}),this.syncFeaturesWithTemplate(o),this.render(a)}})});let t=a.querySelector(".template-selection");if(t){let o=new Ee.Setting(t).setName("Edit config.ts directly (advanced)").setDesc("Skip the wizard and edit your Astro configuration file directly.").addButton(s=>s.setButtonText("Edit config.ts").onClick(()=>{this.openConfigFile()})).settingEl;o&&(o.style.marginTop="2rem")}}syncFeaturesWithTemplate(a){let e=this.plugin.configManager.getTemplatePreset(a);if(!e||!e.config||!e.config.features){console.error("Template preset not found:",a);return}this.updateState({selectedFeatures:e.config.features})}async updatePluginSettingsWithTemplate(a){var o,s,c,p,l,i,d,r,u,m,S,T,y,g,E,A,F,h,b,k,w,H,$,L,G,R,j,V,z,B,N;let e=this.plugin.settings,t=this.plugin.configManager.getTemplatePreset(a);if(!t||!t.config){console.error("Template preset not found:",a);return}let n=this.plugin.configManager.getTemplateConfig(a,e);if(t.config.features){let P=e.features.comments,ae=e.features.profilePicture;e.features={...e.features,...t.config.features},e.features.comments=P,e.features.profilePicture=ae,(o=e.postOptions)!=null&&o.graphView&&(e.postOptions.graphView.enabled=(s=t.config.features.graphView)!=null?s:!1,e.features.graphView=e.postOptions.graphView.enabled),(c=e.postOptions)!=null&&c.linkedMentions&&(e.postOptions.linkedMentions.enabled=(p=t.config.features.linkedMentions)!=null?p:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(l=t.config.features.linkedMentionsCompact)!=null?l:!1),(i=e.commandPalette)!=null&&i.quickActions&&t.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...t.config.features.quickActions})}n.commandPalette&&(e.commandPalette={...e.commandPalette,enabled:(d=n.commandPalette.enabled)!=null?d:e.commandPalette.enabled,placeholder:(r=n.commandPalette.placeholder)!=null?r:e.commandPalette.placeholder,shortcut:(u=n.commandPalette.shortcut)!=null?u:e.commandPalette.shortcut,search:{...e.commandPalette.search,...n.commandPalette.search||{}},sections:{...e.commandPalette.sections,...n.commandPalette.sections||{}},quickActions:{...e.commandPalette.quickActions,...t.config.features.quickActions||{}}},t.config.features.quickActions&&(e.features.quickActions={...e.features.quickActions,...t.config.features.quickActions})),n.homeOptions&&(e.homeOptions={...e.homeOptions,featuredPost:{...e.homeOptions.featuredPost,...n.homeOptions.featuredPost||{}},recentPosts:{...e.homeOptions.recentPosts,...n.homeOptions.recentPosts||{}},projects:{...e.homeOptions.projects,...n.homeOptions.projects||{}},docs:{...e.homeOptions.docs,...n.homeOptions.docs||{}},blurb:{...e.homeOptions.blurb,...n.homeOptions.blurb||{}}}),n.postOptions&&(e.postOptions={...e.postOptions,postsPerPage:(m=n.postOptions.postsPerPage)!=null?m:e.postOptions.postsPerPage,readingTime:(S=n.postOptions.readingTime)!=null?S:e.postOptions.readingTime,wordCount:(T=n.postOptions.wordCount)!=null?T:e.postOptions.wordCount,tags:(y=n.postOptions.tags)!=null?y:e.postOptions.tags,postNavigation:(g=n.postOptions.postNavigation)!=null?g:e.postOptions.postNavigation,showPostCardCoverImages:(E=n.postOptions.showPostCardCoverImages)!=null?E:e.postOptions.showPostCardCoverImages,postCardAspectRatio:(A=n.postOptions.postCardAspectRatio)!=null?A:e.postOptions.postCardAspectRatio,linkedMentions:{...e.postOptions.linkedMentions,...n.postOptions.linkedMentions||{}},graphView:{...e.postOptions.graphView,enabled:(h=(F=n.postOptions.graphView)==null?void 0:F.enabled)!=null?h:e.postOptions.graphView.enabled,showInSidebar:(k=(b=n.postOptions.graphView)==null?void 0:b.showInSidebar)!=null?k:e.postOptions.graphView.showInSidebar,maxNodes:(H=(w=n.postOptions.graphView)==null?void 0:w.maxNodes)!=null?H:e.postOptions.graphView.maxNodes,showOrphanedPosts:(L=($=n.postOptions.graphView)==null?void 0:$.showOrphanedPosts)!=null?L:e.postOptions.graphView.showOrphanedPosts},comments:e.postOptions.comments}),n.navigation&&(e.navigation={...e.navigation,showNavigation:(G=n.navigation.showNavigation)!=null?G:e.navigation.showNavigation,showMobileMenu:(R=n.navigation.showMobileMenu)!=null?R:e.navigation.showMobileMenu,style:(j=n.navigation.style)!=null?j:e.navigation.style}),t.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...t.config.tableOfContents}),n.optionalContentTypes&&(e.optionalContentTypes={projects:(V=n.optionalContentTypes.projects)!=null?V:!1,docs:(z=n.optionalContentTypes.docs)!=null?z:!1}),n.footer&&(e.footer={...e.footer,showSocialIconsInFooter:(B=n.footer.showSocialIconsInFooter)!=null?B:e.footer.showSocialIconsInFooter},e.features.showSocialIconsInFooter=(N=n.footer.showSocialIconsInFooter)!=null?N:e.features.showSocialIconsInFooter),await this.plugin.saveData(e),await this.plugin.loadSettings(),this.refreshSettingsTab()}refreshSettingsTab(){let a=this.plugin.settingsTab;a&&typeof a.display=="function"&&a.display()}openConfigFile(){try{let a=require("fs"),e=require("path"),{shell:t}=require("electron"),n=this.app.vault.adapter.basePath||this.app.vault.adapter.path,o=typeof n=="string"?n:n.toString(),s=e.join(o,"..","config.ts");a.existsSync(s)||a.writeFileSync(s,`// Astro Modular Configuration
// Customize your settings here

export const siteConfig = {
  // Add your configuration here
};
`),t.openPath(s),new Ee.Notice("Opening config.ts for direct editing"),this.modal.close()}catch(a){new Ee.Notice(`Error opening config file: ${a instanceof Error?a.message:String(a)}`)}}};var ke=class extends Q{render(a){let e=this.getState(),t=this.isObsidianDarkMode(),n=ne.filter(o=>o.id!=="custom");a.innerHTML=`
			<div class="theme-selection">
				<h2>Choose your theme</h2>
				<p>Select a color scheme that matches your style and content.</p>
				<div class="theme-options">
					${n.map(o=>`
						<div class="theme-option ${e.selectedTheme===o.id?"selected":""}" 
							 data-theme="${o.id}" 
							 style="background: ${t?o.backgroundColorDark:o.backgroundColorLight};">
							<div class="theme-preview" style="background: linear-gradient(135deg, ${o.previewColors.join(", ")});">
								<div class="theme-preview-content">
									<div class="preview-text">Sample Text</div>
									<div class="preview-accent">Accent</div>
								</div>
							</div>
							<div class="theme-info">
								<h3>${o.name}</h3>
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".theme-option").forEach(o=>{o.addEventListener("click",()=>{let s=o.getAttribute("data-theme");s&&(this.updateState({selectedTheme:s}),this.render(a))})})}isObsidianDarkMode(){let a=document.body,e=a.classList.contains("theme-dark")||a.classList.contains("dark"),t=getComputedStyle(document.documentElement),o=t.getPropertyValue("color-scheme").trim()==="dark",s=t.getPropertyValue("--background-primary").trim(),c=Boolean(s&&(s.includes("#")&&parseInt(s.slice(1,3),16)<128||s.includes("rgb")&&s.includes("0, 0, 0")||s.includes("hsl")&&s.includes("0, 0%, 0%")));return e||o||c}};var Ie=require("obsidian"),Le=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="font-selection">
				<h2>Choose your fonts</h2>
				<p>Select fonts for headings, body text, and code.</p>
			</div>
		`;let t=a.querySelector(".font-selection").createDiv("font-options"),n=(o,s,c,p)=>{new Ie.Setting(t).setName(o).setDesc(s).addDropdown(l=>{ve.forEach(i=>{l.addOption(i,i)}),l.setValue(c).onChange(p)})};n("Heading Font","Font for headings and titles",e.selectedTypography.headingFont,o=>this.updateTypographySetting("headingFont",o,e)),n("Body Font","Font for body text and paragraphs",e.selectedTypography.proseFont,o=>this.updateTypographySetting("proseFont",o,e)),n("Monospace Font","Font for code blocks and inline code",e.selectedTypography.monoFont,o=>this.updateTypographySetting("monoFont",o,e)),new Ie.Setting(t).setName("Font Source").setDesc("Choose how fonts are loaded").addDropdown(o=>{o.addOption("local","Local (Google Fonts)"),o.addOption("cdn","CDN (Custom)"),o.setValue(e.selectedTypography.fontSource).onChange(s=>{this.updateTypographySetting("fontSource",s,e),this.render(a)})}),e.selectedTypography.fontSource==="cdn"&&(new Ie.Setting(t).setName("Custom Font URLs").setDesc("Comma-separated URLs for custom fonts").addText(o=>{var s;return o.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.urls)||"").setPlaceholder("https://fonts.googleapis.com/css2?family=Custom+Font:wght@400;600&display=swap").onChange(c=>this.updateCustomFontSetting("urls",c,e))}),new Ie.Setting(t).setName("Custom Heading Font Name").setDesc("Font family name for headings").addText(o=>{var s;return o.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.heading)||"").setPlaceholder("Custom Heading Font").onChange(c=>this.updateCustomFontSetting("heading",c,e))}),new Ie.Setting(t).setName("Custom Body Font Name").setDesc("Font family name for body text").addText(o=>{var s;return o.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.prose)||"").setPlaceholder("Custom Body Font").onChange(c=>this.updateCustomFontSetting("prose",c,e))}),new Ie.Setting(t).setName("Custom Monospace Font Name").setDesc("Font family name for code").addText(o=>{var s;return o.setValue(((s=e.selectedTypography.customFonts)==null?void 0:s.mono)||"").setPlaceholder("Custom Monospace Font").onChange(c=>this.updateCustomFontSetting("mono",c,e))}))}updateTypographySetting(a,e,t){let n=this.getState();this.updateState({selectedTypography:{...n.selectedTypography,[a]:e}})}updateCustomFontSetting(a,e,t){let n=this.getState();this.updateState({selectedTypography:{...n.selectedTypography,customFonts:{...n.selectedTypography.customFonts,[a]:e}}})}};var xe=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="content-org-selection">
				<h2>Content organization</h2>
				<p>Choose how you want to organize your content and assets.</p>
				<div class="org-options">
					<div class="org-option ${e.selectedContentOrg==="file-based"?"selected":""}" 
						 data-org="file-based">
						<div class="org-header">
							<h3>File-based</h3>
							<span class="default-badge">Default</span>
						</div>
						<p>Single markdown files with images in attachments subfolder</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post.md
\u2514\u2500\u2500 attachments/
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
					<div class="org-option ${e.selectedContentOrg==="folder-based"?"selected":""}" 
						 data-org="folder-based">
						<div class="org-header">
							<h3>Folder-based</h3>
						</div>
						<p>Each post gets its own folder with co-located assets</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post/
\u2502   \u251C\u2500\u2500 index.md
\u2502   \u2514\u2500\u2500 image.jpg
\u2514\u2500\u2500 another-post/
    \u251C\u2500\u2500 index.md
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".org-option").forEach(t=>{t.addEventListener("click",()=>{let n=t.getAttribute("data-org");n&&(this.updateState({selectedContentOrg:n}),this.render(a))})})}};var ht=require("obsidian"),Ge=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="navigation-selection">
				<h2>Navigation setup</h2>
				<p>Configure your site navigation and social links.</p>
				
				<div class="navigation-sections">
					<div class="nav-section">
						<h3>Navigation Pages</h3>
						<p>Add pages to your main navigation menu. Leave URL empty to create dropdown-only parents.</p>
						<div class="nav-items" id="pages-list">
							${e.selectedNavigation.pages.map((t,n)=>{let o=t.children&&t.children.length>0;return`
								<div class="nav-item" data-index="${n}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Page Title" value="${t.title||""}" draggable="false">
											<input type="text" class="nav-url" placeholder="/page-url (leave empty for dropdown-only)" value="${t.url||""}" draggable="false">
										</div>
										<div class="nav-item-actions">
											<button class="nav-add-child" data-index="${n}" title="Add child page">+ Child</button>
											<button class="nav-remove mod-warning" data-index="${n}" data-icon="trash" title="Remove" aria-label="Remove"></button>
										</div>
									</div>
									<div class="nav-children-container" data-parent-index="${n}" ${o?"":'style="display: none;"'}>
										<div class="nav-children-label">Child Pages:</div>
										<div class="nav-children" data-parent-index="${n}">
											${o?t.children.map((s,c)=>`
												<div class="nav-child-item" data-index="${n}" data-child-index="${c}">
													<div class="nav-item-fields">
														<input type="text" class="nav-child-title" placeholder="Child Title" value="${s.title||""}" draggable="false">
														<input type="text" class="nav-child-url" placeholder="/child-url" value="${s.url||""}" draggable="false">
													</div>
													<button class="nav-child-remove mod-warning" data-index="${n}" data-child-index="${c}" data-icon="trash" title="Remove" aria-label="Remove"></button>
												</div>
											`).join(""):""}
										</div>
									</div>
								</div>
							`}).join("")}
						</div>
						<button class="nav-add" id="add-page">+ Add Page</button>
					</div>
					
					<div class="nav-section">
						<h3>Social Links</h3>
						<p>Add social media links for your footer.</p>
						<div class="nav-items" id="social-list">
							${e.selectedNavigation.social.map((t,n)=>`
								<div class="nav-item" data-index="${n}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Social Title" value="${t.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="https://example.com" value="${t.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${n}" data-icon="trash" title="Remove" aria-label="Remove"></button>
									</div>
									<div class="nav-icon-row">
										<input type="text" class="nav-icon" placeholder="icon-name" value="${t.icon||""}" draggable="false">
										<div class="nav-icon-help">
											<small>Icon names from FontAwesome Brands</small>
										</div>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-social">+ Add Social Link</button>
					</div>
				</div>
			</div>
		`,setTimeout(()=>{a.querySelectorAll('button[data-icon="trash"]').forEach(t=>{t.textContent="",(0,ht.setIcon)(t,"trash")})},0),this.setupEventHandlers(a)}setupEventHandlers(a){let e=this.getState(),t=a.querySelector("#pages-list");if(t){let p=l=>{let i=l.target;if(i.classList.contains("nav-title")){let d=i.closest(".nav-item"),r=parseInt((d==null?void 0:d.getAttribute("data-index"))||"0");e.selectedNavigation.pages[r].title=i.value}else if(i.classList.contains("nav-url")){let d=i.closest(".nav-item"),r=parseInt((d==null?void 0:d.getAttribute("data-index"))||"0");i.value.trim()===""?delete e.selectedNavigation.pages[r].url:e.selectedNavigation.pages[r].url=i.value}else if(i.classList.contains("nav-child-title")){let d=i.closest(".nav-child-item"),r=parseInt((d==null?void 0:d.getAttribute("data-index"))||"0"),u=parseInt((d==null?void 0:d.getAttribute("data-child-index"))||"0");e.selectedNavigation.pages[r].children||(e.selectedNavigation.pages[r].children=[]),e.selectedNavigation.pages[r].children[u]||(e.selectedNavigation.pages[r].children[u]={title:"",url:""}),e.selectedNavigation.pages[r].children[u].title=i.value}else if(i.classList.contains("nav-child-url")){let d=i.closest(".nav-child-item"),r=parseInt((d==null?void 0:d.getAttribute("data-index"))||"0"),u=parseInt((d==null?void 0:d.getAttribute("data-child-index"))||"0");e.selectedNavigation.pages[r].children||(e.selectedNavigation.pages[r].children=[]),e.selectedNavigation.pages[r].children[u]||(e.selectedNavigation.pages[r].children[u]={title:"",url:""}),e.selectedNavigation.pages[r].children[u].url=i.value}};t._inputHandler&&t.removeEventListener("input",t._inputHandler),t._inputHandler=p,t.addEventListener("input",p)}let n=a.querySelector("#social-list");if(n){let p=l=>{let i=l.target;if(i.classList.contains("nav-title")||i.classList.contains("nav-url")||i.classList.contains("nav-icon")){let d=i.closest(".nav-item"),r=parseInt((d==null?void 0:d.getAttribute("data-index"))||"0"),u=i.classList.contains("nav-title")?"title":i.classList.contains("nav-url")?"url":"icon";e.selectedNavigation.social[r][u]=i.value}};n._inputHandler&&n.removeEventListener("input",n._inputHandler),n._inputHandler=p,n.addEventListener("input",p)}let o=a.querySelector("#add-page");if(o){let p=()=>{e.selectedNavigation.pages.push({title:"New Page",url:"/new-page"}),this.render(a)};o._clickHandler&&o.removeEventListener("click",o._clickHandler),o._clickHandler=p,o.addEventListener("click",p)}let s=a.querySelector("#add-social");if(s){let p=()=>{e.selectedNavigation.social.push({title:"New Social",url:"https://example.com",icon:""}),this.render(a)};s._clickHandler&&s.removeEventListener("click",s._clickHandler),s._clickHandler=p,s.addEventListener("click",p)}let c=p=>{let l=p.target;if(l.classList.contains("nav-remove")){p.preventDefault(),p.stopPropagation();let i=parseInt(l.getAttribute("data-index")||"0");l.closest("#pages-list")?e.selectedNavigation.pages.splice(i,1):e.selectedNavigation.social.splice(i,1),this.render(a)}else if(l.classList.contains("nav-child-remove")){p.preventDefault(),p.stopPropagation();let i=parseInt(l.getAttribute("data-index")||"0"),d=parseInt(l.getAttribute("data-child-index")||"0");if(e.selectedNavigation.pages[i].children){e.selectedNavigation.pages[i].children.splice(d,1),e.selectedNavigation.pages[i].children.length===0&&delete e.selectedNavigation.pages[i].children;let r=l.closest(".nav-item"),u=r==null?void 0:r.querySelector(".nav-children-container");u&&(!e.selectedNavigation.pages[i].children||e.selectedNavigation.pages[i].children.length===0)&&(u.style.display="none")}this.render(a)}else if(l.classList.contains("nav-add-child")){p.preventDefault(),p.stopPropagation();let i=parseInt(l.getAttribute("data-index")||"0");e.selectedNavigation.pages[i].children||(e.selectedNavigation.pages[i].children=[]),e.selectedNavigation.pages[i].children.push({title:"New Child",url:"/new-child"});let d=l.closest(".nav-item"),r=d==null?void 0:d.querySelector(".nav-children-container");r&&(r.style.display="block"),this.render(a)}};a._removeHandler&&a.removeEventListener("click",a._removeHandler),a._removeHandler=c,a.addEventListener("click",c),this.setupDragAndDrop(a)}setupDragAndDrop(a){let e=this.getState(),t=null,n=l=>{let i=l.target;i.classList.contains("nav-item")&&(t=i,i.style.opacity="0.5")},o=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.opacity="1",t=null)},s=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&t&&i!==t){let d=i.getBoundingClientRect(),r=d.top+d.height/2;l.clientY<r?(i.style.borderTop="2px solid var(--interactive-accent)",i.style.borderBottom="none"):(i.style.borderBottom="2px solid var(--interactive-accent)",i.style.borderTop="none")}},c=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.borderTop="none",i.style.borderBottom="none")},p=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&t){let d=parseInt(i.getAttribute("data-index")||"0"),r=parseInt(t.getAttribute("data-index")||"0"),u=i.closest("#pages-list"),m=i.closest("#social-list");if(i.style.borderTop="none",i.style.borderBottom="none",d!==r){if(u){let S=e.selectedNavigation.pages.splice(r,1)[0];e.selectedNavigation.pages.splice(d,0,S)}else if(m){let S=e.selectedNavigation.social.splice(r,1)[0];e.selectedNavigation.social.splice(d,0,S)}this.render(a)}}};a._dragStartHandler&&(a.removeEventListener("dragstart",a._dragStartHandler),a.removeEventListener("dragend",a._dragEndHandler),a.removeEventListener("dragover",a._dragOverHandler),a.removeEventListener("dragleave",a._dragLeaveHandler),a.removeEventListener("drop",a._dropHandler)),a._dragStartHandler=n,a._dragEndHandler=o,a._dragOverHandler=s,a._dragLeaveHandler=c,a._dropHandler=p,a.addEventListener("dragstart",n),a.addEventListener("dragend",o),a.addEventListener("dragover",s),a.addEventListener("dragleave",c),a.addEventListener("drop",p)}};var _e=require("obsidian"),Re=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="features-selection">
				<h2>Optional features</h2>
				<p>Enable or disable specific features for your site.</p>
			</div>
		`;let t=a.querySelector(".features-selection").createDiv("features-list");this.renderProfilePictureFeatureNative(t,e),this.renderCommentsFeatureNative(t,e)}renderProfilePictureFeatureNative(a,e){var c,p,l;let t=((p=(c=e.selectedOptionalFeatures)==null?void 0:c.profilePicture)==null?void 0:p.enabled)||!1,n=((l=e.selectedOptionalFeatures)==null?void 0:l.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"};new _e.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(i=>i.setValue(t).onChange(d=>{var m;let r=this.getState();this.updateState({selectedFeatures:{...r.selectedFeatures,profilePicture:d},selectedOptionalFeatures:{...r.selectedOptionalFeatures,profilePicture:{...(m=r.selectedOptionalFeatures)==null?void 0:m.profilePicture,enabled:d}}});let u=a.querySelector(".profile-picture-options");u&&(u.style.display=d?"block":"none")}));let o=a.createDiv("profile-picture-options");o.style.display=t?"block":"none",o.className="profile-picture-options";let s=(i,d,r,u)=>{let m=new _e.Setting(o).setName(i).setDesc(d);r==="text"?m.addText(S=>{var T;return S.setValue(n[i]||"").setPlaceholder(((T=u==null?void 0:u[0])==null?void 0:T.value)||"").onChange(y=>this.updateProfileSetting(i,y,e))}):m.addDropdown(S=>{u==null||u.forEach(T=>S.addOption(T.value,T.label)),S.setValue(n[i]).onChange(T=>this.updateProfileSetting(i,T,e))})};s("image","Image path","text",[{value:"/profile.jpg",label:"/profile.jpg"}]),s("alt","Alt text","text",[{value:"Profile picture",label:"Profile picture"}]),s("size","Size","dropdown",[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]),s("url","URL (optional)","text",[{value:"https://example.com",label:"https://example.com"}]),s("placement","Placement","dropdown",[{value:"footer",label:"Footer"},{value:"header",label:"Header"}]),s("style","Style","dropdown",[{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"none",label:"None"}])}updateProfileSetting(a,e,t){var o;let n=this.getState();this.updateState({selectedOptionalFeatures:{...n.selectedOptionalFeatures,profilePicture:{...(o=n.selectedOptionalFeatures)==null?void 0:o.profilePicture,[a]:e}}})}renderCommentsFeatureNative(a,e){var m,S,T;let t=((S=(m=e.selectedOptionalFeatures)==null?void 0:m.comments)==null?void 0:S.enabled)||!1,n=((T=e.selectedOptionalFeatures)==null?void 0:T.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},o;new _e.Setting(a).setName("Comments").setDesc("Enable Giscus comment system for posts").addToggle(y=>{o=y,y.setValue(t).onChange(g=>{var F;let E=this.getState();this.updateState({selectedFeatures:{...E.selectedFeatures,comments:g},selectedOptionalFeatures:{...E.selectedOptionalFeatures,comments:{...(F=E.selectedOptionalFeatures)==null?void 0:F.comments,enabled:g}}});let A=a.querySelector(".comments-options");A&&(A.style.display=g?"block":"none")})});let s=a.createDiv("comments-options");s.style.display=t?"block":"none",s.className="comments-options";let c=s.createDiv("comments-instructions");c.style.marginBottom="15px",c.style.padding="10px",c.style.background="var(--background-modifier-border)",c.style.borderRadius="4px",c.style.borderLeft="3px solid var(--interactive-accent)";let p=c.createEl("p");p.style.margin="0",p.style.fontSize="13px",p.style.color="var(--text-muted)",p.style.whiteSpace="pre-line",p.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let l=p.querySelector("a");l&&(l.addEventListener("mouseenter",()=>{l.style.textDecoration="underline"}),l.addEventListener("mouseleave",()=>{l.style.textDecoration="none"}));let d=new _e.Setting(s).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});d.style.width="100%",d.style.fontFamily="var(--font-monospace)",d.style.fontSize="12px",d.style.padding="8px",d.style.border="1px solid var(--background-modifier-border)",d.style.borderRadius="4px",d.style.background="var(--background-primary)",d.style.color="var(--text-normal)",d.style.resize="none",d.value=n.rawScript||"";let r=s.createDiv("script-validation");r.style.marginTop="8px",r.style.fontSize="12px";let u=async()=>{var A,F,h,b,k,w,H,$;let y=d.value.trim();if(!y){r.innerHTML="";let L=this.getState(),G=(h=(F=(A=L.selectedOptionalFeatures)==null?void 0:A.comments)==null?void 0:F.enabled)!=null?h:!1;this.updateState({selectedOptionalFeatures:{...L.selectedOptionalFeatures,comments:{...(b=L.selectedOptionalFeatures)==null?void 0:b.comments,rawScript:"",repo:"",repoId:"",category:"",categoryId:"",mapping:"",strict:"",reactions:"",metadata:"",inputPosition:"",theme:"",lang:"",loading:"",enabled:G}}});return}let{GiscusScriptParser:g}=await Promise.resolve().then(()=>(dt(),pt)),E=g.validateScript(y);if(E.valid){r.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let L=g.parseScript(y);if(L){let G=this.getState(),R=(H=(w=(k=G.selectedOptionalFeatures)==null?void 0:k.comments)==null?void 0:w.enabled)!=null?H:!1;this.updateState({selectedOptionalFeatures:{...G.selectedOptionalFeatures,comments:{...($=G.selectedOptionalFeatures)==null?void 0:$.comments,rawScript:y,repo:L.repo,repoId:L.repoId,category:L.category,categoryId:L.categoryId,mapping:L.mapping,strict:L.strict,reactions:L.reactions,metadata:L.metadata,inputPosition:L.inputPosition,theme:L.theme,lang:L.lang,loading:L.loading,enabled:R}}})}}else r.innerHTML=`<span style="color: var(--text-error)">\u2717 ${E.error}</span>`};d.addEventListener("input",u),u()}updateCommentSetting(a,e,t){var o;let n=this.getState();this.updateState({selectedOptionalFeatures:{...n.selectedOptionalFeatures,comments:{...(o=n.selectedOptionalFeatures)==null?void 0:o.comments,[a]:e}}})}};var He=class extends Q{render(a){let e=this.getState();a.innerHTML=`
			<div class="deployment-selection">
				<h2>Deployment platform</h2>
				<p>Choose your preferred deployment platform.</p>
				<div class="deployment-options">
					<div class="deployment-option ${e.selectedDeployment==="netlify"?"selected":""}" 
						 data-deployment="netlify">
						<div class="deployment-header">
							<h3>Netlify</h3>
						</div>
						<p>Zero-config deployments with built-in CI/CD and serverless functions.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="vercel"?"selected":""}" 
						 data-deployment="vercel">
						<div class="deployment-header">
							<h3>Vercel</h3>
						</div>
						<p>Edge-optimized platform with instant deployments and global CDN.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="github-pages"?"selected":""}" 
						 data-deployment="github-pages">
						<div class="deployment-header">
							<h3>GitHub Pages</h3>
						</div>
						<p>Free static hosting integrated directly with your GitHub repository.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="cloudflare-workers"?"selected":""}" 
						 data-deployment="cloudflare-workers">
						<div class="deployment-header">
							<h3>Cloudflare Workers</h3>
						</div>
						<p>Global edge network with unlimited bandwidth and custom headers on all plans.</p>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".deployment-option").forEach(t=>{t.addEventListener("click",()=>{let n=t.getAttribute("data-deployment");n&&(this.updateState({selectedDeployment:n}),this.render(a))})})}};var we=require("obsidian"),$e=class extends Q{async render(a){let t=this.getState().selectedContentOrg,n=await this.plugin.pluginManager.getPluginStatus(t);a.innerHTML=`
			<div class="plugin-config">
				<h2>Plugin configuration</h2>
				<p>Configure your Obsidian plugins for optimal integration.</p>
				
				<div class="plugin-status">
      ${n.map(o=>{let s=o.name==="Attachment settings",c=o.installed,p=o.outOfSyncContentTypes&&o.outOfSyncContentTypes.length>0,l=p&&o.outOfSyncContentTypes&&o.outOfSyncContentTypes.length===4,i=p&&!l&&o.installed&&o.enabled,d=l&&o.installed&&o.enabled,u=o.name==="Image Inserter"&&o.installed&&o.enabled&&o.settingsMatch===!1,m=o.installed&&o.enabled&&!u&&!d&&!i,S;s?S=c?"Configured":"Doesn't match":o.installed?o.enabled?u||d?S="Doesn't match":i?S="Partially configured":S="Configured":S="Disabled":S="Not installed";let T="plugin-item";s?T+=c?" installed":" missing":u||d?T+=" missing":i?T+=" partially-configured":T+=o.installed&&o.enabled?" installed":" missing";let y;return s?y=c?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':u||d?y='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':i?y='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>':y=o.installed&&o.enabled?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>',`
						<div class="${T}">
							<div class="plugin-icon">
								${y}
							</div>
							<div class="plugin-info">
								<h3>${o.name}</h3>
								<p>${S}</p>
								${p&&o.outOfSyncContentTypes?`<p style="font-size: 0.9em; opacity: 0.8; margin-top: 4px;">Out of sync: ${o.outOfSyncContentTypes.join(", ")}</p>`:""}
							</div>
						</div>
					`}).join("")}
				</div>
				
				<div class="config-options">
					<button class="mod-button mod-cta" id="configure-plugins">Configure Automatically</button>
					<button class="mod-button" id="show-instructions">Show Manual Instructions</button>
				</div>
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){var t,n;let e=this.getState();(t=a.querySelector("#configure-plugins"))==null||t.addEventListener("click",async()=>{try{let o=e.selectedContentOrg,s={obsidianSettings:{attachmentLocation:o==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:o==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:o==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:o==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(s)){let p=await this.plugin.pluginManager.getPluginStatus(e.selectedContentOrg),l=a.querySelector(".plugin-status");l&&(l.innerHTML=p.map(u=>{let m=u.name==="Attachment settings",S=u.installed,T=u.outOfSyncContentTypes&&u.outOfSyncContentTypes.length>0,y=T&&u.outOfSyncContentTypes&&u.outOfSyncContentTypes.length===4,g=T&&!y&&u.installed&&u.enabled,E=y&&u.installed&&u.enabled,F=u.name==="Image Inserter"&&u.installed&&u.enabled&&u.settingsMatch===!1,h=u.installed&&u.enabled&&!F&&!E&&!g,b;m?b=S?"Configured":"Doesn't match":u.installed?u.enabled?F||E?b="Doesn't match":g?b="Partially configured":b="Configured":b="Disabled":b="Not installed";let k="plugin-item";m?k+=S?" installed":" missing":F||E?k+=" missing":g?k+=" partially-configured":k+=u.installed&&u.enabled?" installed":" missing";let w;return m?w=S?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':F||E?w='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':g?w='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>':w=u.installed&&u.enabled?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>',`
								<div class="${k}">
									<div class="plugin-icon">
										${w}
									</div>
									<div class="plugin-info">
										<h3>${u.name}</h3>
										<p>${b}</p>
										${T&&u.outOfSyncContentTypes?`<p style="font-size: 0.9em; opacity: 0.8; margin-top: 4px;">Out of sync: ${u.outOfSyncContentTypes.join(", ")}</p>`:""}
									</div>
								</div>
							`}).join(""));let i=e.selectedContentOrg,d=i==="file-based"?"subfolder (attachments/)":"same folder",r=i==="file-based"?"file":"folder";new we.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${d}
\u2022 Astro Composer: Creation mode \u2192 ${r}
\u2022 Image Inserter: Format updated for ${i}`,8e3)}else new we.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)}catch(o){new we.Notice(`Error configuring plugins: ${o instanceof Error?o.message:String(o)}`)}}),(n=a.querySelector("#show-instructions"))==null||n.addEventListener("click",async()=>{try{let o=e.selectedContentOrg,s={obsidianSettings:{attachmentLocation:o==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:o==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:o==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:o==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},c=await this.plugin.pluginManager.getManualConfigurationInstructions(s),{Modal:p}=require("obsidian"),l=new p(this.app);l.titleEl.setText("Manual Configuration Instructions");let i=l.contentEl.createDiv();i.style.padding="20px",i.style.lineHeight="1.6";let d=c.split(`
`),r=null;d.forEach(u=>{let m=u.trim();if(m==="")i.createEl("br");else if(m.startsWith("## ")){r&&(r=null);let S=i.createEl("h2");S.setText(m.substring(3)),S.style.marginTop="20px",S.style.marginBottom="10px",S.style.fontSize="1.2em",S.style.fontWeight="bold"}else if(m.match(/^\d+\.\s/)){if(r||(r=i.createEl("ol"),r&&(r.style.marginLeft="20px",r.style.marginBottom="15px")),r){let S=r.createEl("li");S.style.marginBottom="5px",this.parseBoldText(S,m.replace(/^\d+\.\s/,""))}}else if(m.startsWith("- ")||m.startsWith("* ")){if(r||(r=i.createEl("ul"),r&&(r.style.marginLeft="20px",r.style.marginBottom="15px")),r){let S=r.createEl("li");S.style.marginBottom="5px",this.parseBoldText(S,m.substring(2))}}else{r&&(r=null);let S=i.createEl("p");S.style.marginBottom="10px",this.parseBoldText(S,m)}}),l.open()}catch(o){new we.Notice(`Error getting instructions: ${o instanceof Error?o.message:String(o)}`)}})}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(n=>{n.startsWith("**")&&n.endsWith("**")?a.createEl("strong").setText(n.substring(2,n.length-2)):n.trim()!==""&&a.appendText(n)})}};var Ve=require("obsidian");var Be=class extends Q{render(a){let e=this.getState(),t=this.formatTemplateName(e.selectedTemplate),n=this.formatThemeName(e.selectedTheme),o=this.formatContentOrganization(e.selectedContentOrg),s=this.formatDeploymentName(e.selectedDeployment);a.innerHTML=`
			<div class="finalize-step">
				<h2>Finalize your configuration</h2>
				<p>Review your settings and complete the setup.</p>
				
				<div class="config-summary">
					<h3>Configuration Summary</h3>
					<div class="config-item">
						<strong>Template:</strong> ${t}
					</div>
					<div class="config-item">
						<strong>Theme:</strong> ${n}
					</div>
					<div class="config-item">
						<strong>Content Organization:</strong> ${o}
					</div>
					<div class="config-item">
						<strong>Deployment:</strong> ${s}
					</div>
					<div class="config-item">
						<strong>Site Title:</strong> ${e.selectedSiteInfo.title}
					</div>
					<div class="config-item">
						<strong>Site URL:</strong> ${e.selectedSiteInfo.site}
					</div>
				</div>
				
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){}async completeWizard(){let a=this.getState();try{this.stateManager.buildFinalSettings(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings();let e=this.plugin.settings;await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new Ve.Notice("Configuration applied successfully!"):new Ve.Notice("Failed to apply configuration. Check the console for errors."),this.stateManager.updateState({currentStep:this.stateManager.getState().totalSteps})}catch(e){new Ve.Notice(`Error completing wizard: ${e instanceof Error?e.message:String(e)}`)}}formatTemplateName(a){let e=oe.find(t=>t.id===a);return e?e.name:a}formatThemeName(a){let e=ne.find(t=>t.id===a);return e?e.name:a}formatContentOrganization(a){return a==="file-based"?"File-based":"Folder-based"}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";case"cloudflare-workers":return"Cloudflare Workers";default:return a}}};var se=class extends Pe.Modal{constructor(e,t){super(e);this.isCompleting=!1;this.initialSettingsSnapshot=null;this.plugin=t,this.stateManager=new Ae(t),this.steps=[new Fe(e,this,this.stateManager,this.plugin),new De(e,this,this.stateManager,this.plugin),new ke(e,this,this.stateManager,this.plugin),new Le(e,this,this.stateManager,this.plugin),new xe(e,this,this.stateManager,this.plugin),new Ge(e,this,this.stateManager,this.plugin),new Re(e,this,this.stateManager,this.plugin),new He(e,this,this.stateManager,this.plugin),new $e(e,this,this.stateManager,this.plugin),new Be(e,this,this.stateManager,this.plugin)]}async onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("astro-modular-wizard"),this.stateManager.refreshState(),this.initialSettingsSnapshot=this.createSettingsSnapshot(),await this.renderCurrentStep()}async onClose(){let{contentEl:e}=this;e.empty(),await this.saveWizardStateToDataJson(!this.isCompleting),this.isCompleting=!1}scrollToTop(){let{contentEl:e}=this,t=e;for(;t&&t!==document.body;){let s=window.getComputedStyle(t);if(t.scrollHeight>t.clientHeight&&(s.overflowY==="auto"||s.overflowY==="scroll"||s.overflow==="auto"||s.overflow==="scroll")){t.scrollTop=0;break}t=t.parentElement}let n=e.closest(".modal-content");n&&(n.scrollTop=0);let o=e.closest(".modal-container");o&&(o.scrollTop=0),e.scrollTop=0}async renderCurrentStep(){let{contentEl:e}=this,t=this.stateManager.getState();this.scrollToTop(),e.empty(),e.addClass("astro-modular-wizard"),this.scrollToTop(),this.renderProgress(e);let n=e.createDiv("wizard-content");await this.renderStepContent(n),this.renderFooter(e),requestAnimationFrame(()=>{this.scrollToTop()})}renderHeader(e){let t=e.createDiv("wizard-header");t.innerHTML=`
			<h1>Astro Modular Setup</h1>
		`}renderProgress(e){let t=this.stateManager.getState(),n=e.createDiv("wizard-progress");n.innerHTML=`
			<div class="progress-bar">
				<div class="progress-fill" style="width: ${this.stateManager.getProgress()}%"></div>
			</div>
		`;let o=n.createDiv("progress-text");o.textContent=`Step ${t.currentStep} of ${t.totalSteps}`}async renderStepContent(e){let n=this.stateManager.getState().currentStep-1;n>=0&&n<this.steps.length&&await this.steps[n].render(e)}renderFooter(e){let t=this.stateManager.getState(),o=e.createDiv("wizard-footer").createDiv("wizard-buttons");if(this.stateManager.canGoPrevious()&&o.createEl("button",{text:"Previous",cls:"mod-button"}).addEventListener("click",async()=>{this.discardCurrentStepChanges(),this.stateManager.previousStep(),await this.renderCurrentStep()}),this.stateManager.canGoNext()?o.createEl("button",{text:"Next",cls:"mod-button mod-cta"}).addEventListener("click",async()=>{await this.saveCurrentStepToWizardState(),this.stateManager.nextStep(),await this.renderCurrentStep()}):o.createEl("button",{text:"Complete Setup",cls:"mod-button mod-cta"}).addEventListener("click",async()=>{this.isCompleting=!0,await this.steps[this.steps.length-1].completeWizard(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings(),await this.plugin.triggerSettingsRefresh(),this.close()}),this.stateManager.canGoNext()){let s=o.createEl("button",{text:"Skip",cls:"mod-button"});s.style.opacity="0.6",s.addEventListener("click",async()=>{this.stateManager.nextStep(),await this.renderCurrentStep()})}}async saveCurrentStepToWizardState(){try{this.stateManager.buildFinalSettings(),await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings();let e=this.plugin.settings;await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})}catch(e){console.error("Error saving current step to data.json and config.ts:",e)}}discardCurrentStepChanges(){this.stateManager.refreshState()}async saveWizardStateToDataJson(e=!0){try{if(this.stateManager.buildFinalSettings(),!this.hasSettingsChanged())return;await this.plugin.saveData(this.plugin.settings),await this.plugin.loadSettings();let n=this.plugin.settings,o=await this.plugin.configManager.applyPreset({name:n.currentTemplate,description:"",features:n.features,theme:n.currentTheme,contentOrganization:n.contentOrganization,config:n});e&&(o?new Pe.Notice("Configuration saved to config.ts"):new Pe.Notice("Failed to save configuration to config.ts"))}catch(t){console.error("Error saving wizard state to data.json and config.ts:",t),e&&new Pe.Notice(`Failed to save configuration: ${t instanceof Error?t.message:String(t)}`)}}createSettingsSnapshot(){let e=this.plugin.settings;return JSON.parse(JSON.stringify({currentTemplate:e.currentTemplate,currentTheme:e.currentTheme,contentOrganization:e.contentOrganization,siteInfo:e.siteInfo,navigation:e.navigation,features:e.features,typography:e.typography,optionalFeatures:e.optionalFeatures,deployment:e.deployment,optionalContentTypes:e.optionalContentTypes}))}hasSettingsChanged(){if(!this.initialSettingsSnapshot)return!1;let e=this.createSettingsSnapshot();return e.currentTemplate!==this.initialSettingsSnapshot.currentTemplate||e.currentTheme!==this.initialSettingsSnapshot.currentTheme||e.contentOrganization!==this.initialSettingsSnapshot.contentOrganization||JSON.stringify(e.siteInfo)!==JSON.stringify(this.initialSettingsSnapshot.siteInfo)||JSON.stringify(e.navigation)!==JSON.stringify(this.initialSettingsSnapshot.navigation)||JSON.stringify(e.features)!==JSON.stringify(this.initialSettingsSnapshot.features)||JSON.stringify(e.typography)!==JSON.stringify(this.initialSettingsSnapshot.typography)||JSON.stringify(e.optionalFeatures)!==JSON.stringify(this.initialSettingsSnapshot.optionalFeatures)||JSON.stringify(e.deployment)!==JSON.stringify(this.initialSettingsSnapshot.deployment)||JSON.stringify(e.optionalContentTypes)!==JSON.stringify(this.initialSettingsSnapshot.optionalContentTypes)}applyDefaultValuesForCurrentStep(){}};function ft(D){D.addCommand({id:"open-settings",name:"Open Astro Modular Settings",icon:"settings-2",callback:()=>{D.app.setting.open(),D.app.setting.openTabById(D.manifest.id)}}),D.addCommand({id:"run-setup-wizard",name:"Run setup wizard",icon:"wand",callback:async()=>{await D.loadData().then(e=>{Object.assign(D.settings,e)}),new se(D.app,D).open()}})}var Ct=require("obsidian");var Me=require("obsidian");var ye=require("obsidian"),te=class{constructor(a,e){this.app=a,this.plugin=e}getSettings(){return this.plugin.settings||this.plugin.data||{}}async applyCurrentConfiguration(a=!1){try{let e=this.getSettings();await this.plugin.configManager.updateIndividualFeatures(e)?(a&&new ye.Notice("Configuration applied successfully!"),await this.plugin.configManager.triggerRebuild()):a&&new ye.Notice("Failed to apply configuration. Check the console for errors.")}catch(e){a&&new ye.Notice(`Error applying configuration: ${e instanceof Error?e.message:String(e)}`)}}createDropdownSetting(a,e,t,n,o,s){return new ye.Setting(a).setName(e).setDesc(t).addDropdown(c=>(Object.entries(o).forEach(([p,l])=>{c.addOption(p,l)}),c.setValue(n),c.onChange(async p=>{s(p),await this.plugin.saveData(this.getSettings())}),c))}createTextSetting(a,e,t,n,o,s=1e3,c,p){return new ye.Setting(a).setName(e).setDesc(t).addText(l=>{l.setValue(n),p&&l.setPlaceholder(p);let i=null;return l.onChange(async d=>{i&&clearTimeout(i),o(d),await this.plugin.saveData(this.getSettings()),i=window.setTimeout(async()=>{c&&await c()},s)}),l.inputEl.addEventListener("blur",async()=>{i&&(clearTimeout(i),c&&await c())}),l})}createToggleSetting(a,e,t,n,o){return new ye.Setting(a).setName(e).setDesc(t).addToggle(s=>(s.setValue(n),s.onChange(async c=>{o(c),await this.plugin.saveData(this.getSettings())}),s))}};var qe=class extends te{render(a){var d,r;a.empty();let e=this.getSettings(),n=a.createDiv("config-display").createDiv("config-info");new Me.Setting(n).setHeading().setName("Current Configuration");let o=n.createDiv("config-item");o.createEl("strong",{text:"Template: "}),o.createSpan({text:((d=oe.find(u=>u.id===e.currentTemplate))==null?void 0:d.name)||"Unknown"});let s=n.createDiv("config-item");s.createEl("strong",{text:"Theme: "}),s.createSpan({text:((r=ne.find(u=>u.id===e.currentTheme))==null?void 0:r.name)||"Unknown"});let c=n.createDiv("config-item");c.createEl("strong",{text:"Organization: "}),c.createSpan({text:e.contentOrganization==="file-based"?"File-based":"Folder-based"});let p=n.createDiv("config-item");p.createEl("strong",{text:"Deployment: "}),p.createSpan({text:this.formatDeploymentName(e.deployment.platform)});let l=n.createDiv("config-item");l.createEl("strong",{text:"Site Title: "}),l.createSpan({text:e.siteInfo.title});let i=n.createDiv("config-item");i.createEl("strong",{text:"Site URL: "}),i.createSpan({text:e.siteInfo.site}),new Me.Setting(a).setName("Setup wizard").setDesc("Run the setup wizard to reconfigure your theme").addButton(u=>u.setButtonText("Run Setup Wizard").setCta().onClick(async()=>{await this.plugin.loadData().then(S=>{Object.assign(this.plugin.settings,S)}),new se(this.app,this.plugin).open()})),new Me.Setting(a).setName("Run wizard on startup").setDesc("Show the setup wizard when Obsidian starts (if not disabled)").addToggle(u=>u.setValue(e.runWizardOnStartup).onChange(async m=>{e.runWizardOnStartup=m,await this.plugin.saveData(e)})),new Me.Setting(a).setName("Remove ribbon icon").setDesc("Remove the wizard icon from the left ribbon").addToggle(u=>{var m;return u.setValue((m=e.removeRibbonIcon)!=null?m:!1).onChange(async S=>{e.removeRibbonIcon=S,await this.plugin.saveData(e),this.plugin.updateRibbonIcon&&await this.plugin.updateRibbonIcon()})})}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";case"cloudflare-workers":return"Cloudflare Workers";default:return a}}};var X=require("obsidian");var ze=class extends te{render(a){var S,T;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section");this.createTextSetting(a,"Site URL","Your site's base URL (e.g., https://yoursite.com)",e.siteInfo.site,y=>{e.siteInfo.site=y}),this.createTextSetting(a,"Site Title","Your site's title",e.siteInfo.title,y=>{e.siteInfo.title=y}),this.createTextSetting(a,"Site Description","A brief description of your site",e.siteInfo.description,y=>{e.siteInfo.description=y}),this.createTextSetting(a,"Author Name","Your name or the site author's name",e.siteInfo.author,y=>{e.siteInfo.author=y}),this.createTextSetting(a,"Language","Your site's primary language (ISO 639-1 code)",e.siteInfo.language,y=>{e.siteInfo.language=y});let n=a.createDiv("settings-section");n.style.marginTop="30px",n.style.paddingTop="20px",n.style.borderTop="2px solid var(--background-modifier-border)",new X.Setting(n).setHeading().setName("Assets & Metadata");let o=n.createDiv();o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="space-between",o.style.gap="10px",o.style.marginBottom="20px";let s=o.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open public folder"}});s.style.marginLeft="auto",s.style.padding="4px",s.style.border="none",s.style.backgroundColor="transparent",s.style.color="var(--text-normal)",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center";let c=s.createDiv();c.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',s.addEventListener("click",async()=>{try{let y="../../public";await this.app.openWithDefaultApp(y)}catch(y){new X.Notice(`Failed to open public folder: ${y instanceof Error?y.message:String(y)}`)}});let p=async(y,g)=>{try{let E=require("fs"),A=require("path"),F=this.app.vault.adapter.basePath||this.app.vault.adapter.path,h=typeof F=="string"?F:F.toString(),b=A.join(h,"..","..","public"),k=A.join(b,g);E.existsSync(b)||E.mkdirSync(b,{recursive:!0}),E.copyFileSync(y,k),new X.Notice(`Successfully copied ${g} to public folder`)}catch(E){throw new Error(`Failed to copy file: ${E instanceof Error?E.message:String(E)}`)}},l=async y=>{let g=document.createElement("input");g.type="file",g.accept=".png";let E=null;g.onchange=A=>{var h;let F=(h=A.target.files)==null?void 0:h[0];if(F){if(!F.name.toLowerCase().endsWith(".png")){new X.Notice("Please select a PNG file");return}E=F,setTimeout(()=>{let b=new X.Modal(this.app);b.titleEl.setText("Replace Image");let k=b.contentEl.createDiv();k.createEl("p",{text:`Are you sure you want to replace ${y} in the public folder with the new image?`});let w=k.createDiv();w.style.marginTop="20px",w.style.display="flex",w.style.gap="10px",w.style.justifyContent="flex-end";let H=w.createEl("button",{text:"Cancel"});H.className="mod-button",H.addEventListener("click",()=>{b.close()});let $=w.createEl("button",{text:"Replace"});$.className="mod-warning",$.addEventListener("click",async()=>{if(b.close(),!E){new X.Notice("File selection was lost. Please try again.");return}try{let L=require("fs"),G=require("path"),R=E.path;if(R)await p(R,y);else{let j=await E.arrayBuffer(),V=Buffer.from(j),z=this.app.vault.adapter.basePath||this.app.vault.adapter.path,B=typeof z=="string"?z:z.toString(),N=G.join(B,"..","..","public"),P=G.join(N,y);L.existsSync(N)||L.mkdirSync(N,{recursive:!0}),L.writeFileSync(P,V),new X.Notice(`Successfully copied ${y} to public folder`)}}catch(L){new X.Notice(`Failed to copy file: ${L instanceof Error?L.message:String(L)}`)}}),b.open()},100)}},g.click()};new X.Setting(n).setName("Open Graph image").setDesc("Select a PNG image to replace open-graph.png in the public folder (recommended: 1200 x 630 pixels)").controlEl.createEl("button",{text:"Select PNG file",cls:"mod-cta"}).addEventListener("click",async()=>{await l("open-graph.png")}),this.createTextSetting(n,"Open Graph image alt text","Alternative text for the Open Graph image",e.siteInfo.defaultOgImageAlt||((S=e.seo)==null?void 0:S.defaultOgImageAlt)||"Astro Modular logo.",y=>{e.siteInfo.defaultOgImageAlt=y,e.seo||(e.seo={defaultOgImageAlt:""}),e.seo.defaultOgImageAlt=y},1e3,async()=>{await this.applyCurrentConfiguration(),new X.Notice("Open Graph image alt text updated and applied to config.ts")}),new X.Setting(n).setName("Favicon").setDesc("Select a PNG image to replace favicon.png in the public folder (recommended: 256 x 256 pixels). Standard favicon is used when browser preference cannot be determined.").controlEl.createEl("button",{text:"Select PNG file",cls:"mod-cta"}).addEventListener("click",async()=>{await l("favicon.png")});let m=new X.Setting(n).setName("Theme-adaptive favicon").setDesc("If enabled, favicon switches between light and dark variants based on browser theme preference. Standard favicon is used when browser's preference cannot be determined.").addToggle(y=>{var g;return y.setValue((g=e.siteInfo.faviconThemeAdaptive)!=null?g:!0).onChange(async E=>{e.siteInfo.faviconThemeAdaptive=E,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),this.render(a),new X.Notice(`Theme-adaptive favicon ${E?"enabled":"disabled"} and applied to config.ts`)})});((T=e.siteInfo.faviconThemeAdaptive)==null||T)&&(new X.Setting(n).setName("Light theme favicon").setDesc("Select a PNG image to replace favicon-light.png in the public folder (recommended: 256 x 256 pixels)").controlEl.createEl("button",{text:"Select PNG file",cls:"mod-cta"}).addEventListener("click",async()=>{await l("favicon-light.png")}),new X.Setting(n).setName("Dark theme favicon").setDesc("Select a PNG image to replace favicon-dark.png in the public folder (recommended: 256 x 256 pixels)").controlEl.createEl("button",{text:"Select PNG file",cls:"mod-cta"}).addEventListener("click",async()=>{await l("favicon-dark.png")}))}};var J=require("obsidian");var Ue=class extends te{constructor(){super(...arguments);this.saveTimeoutId=null;this.listenersAttached=!1}render(e){e.empty(),this.listenersAttached=!1;let t=this.getSettings(),n=e.createDiv("settings-section"),o=e.createDiv("settings-section");new J.Setting(o).setHeading().setName("Navigation Pages").setDesc("Add or remove pages from your main navigation menu.");let s=o.createDiv("nav-items");s.id="pages-list",s.innerHTML=`
			${t.navigation.pages.map((i,d)=>{let r=i.children&&i.children.length>0;return`
				<div class="nav-item" data-index="${d}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Page Title" value="${i.title||""}" draggable="false">
							<input type="text" class="nav-url" placeholder="/page-url (leave empty for dropdown-only)" value="${i.url||""}" draggable="false">
						</div>
						<div class="nav-item-actions">
							<button class="nav-add-child" data-index="${d}" title="Add child page">+ Child</button>
							<button class="nav-remove mod-warning" data-index="${d}" data-icon="trash" title="Remove" aria-label="Remove"></button>
						</div>
					</div>
					<div class="nav-children-container" data-parent-index="${d}" ${r?"":'style="display: none;"'}>
						<div class="nav-children-label">Child Pages:</div>
						<div class="nav-children" data-parent-index="${d}">
							${r?i.children.map((u,m)=>`
								<div class="nav-child-item" data-index="${d}" data-child-index="${m}">
									<div class="nav-item-fields">
										<input type="text" class="nav-child-title" placeholder="Child Title" value="${u.title||""}" draggable="false">
										<input type="text" class="nav-child-url" placeholder="/child-url" value="${u.url||""}" draggable="false">
									</div>
									<button class="nav-child-remove mod-warning" data-index="${d}" data-child-index="${m}" data-icon="trash" title="Remove" aria-label="Remove"></button>
								</div>
							`).join(""):""}
						</div>
					</div>
				</div>
			`}).join("")}
		`,setTimeout(()=>{s.querySelectorAll('button[data-icon="trash"]').forEach(i=>{i.textContent="",(0,J.setIcon)(i,"trash")})},0),new J.Setting(o).setName("Add Page").setDesc("Add a new page to your navigation").addButton(i=>i.setButtonText("+ Add Page").setCta().onClick(async()=>{t.navigation.pages.push({title:"New Page",url:"/new-page"}),await this.plugin.saveData(t),await this.applyCurrentConfiguration(!1),new J.Notice("Navigation page added and applied to config.ts"),this.render(e)}));let c=e.createDiv("settings-section");new J.Setting(c).setHeading().setName("Social Links").setDesc("Add or remove social media links.");let p=c.createDiv("nav-items");p.id="social-list",p.innerHTML=`
			${t.navigation.social.map((i,d)=>`
				<div class="nav-item" data-index="${d}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Social Title" value="${i.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="https://example.com" value="${i.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${d}" data-icon="trash" title="Remove" aria-label="Remove"></button>
					</div>
					<div class="nav-icon-row">
						<input type="text" class="nav-icon" placeholder="icon-name" value="${i.icon||""}" draggable="false">
						<div class="nav-icon-help">
							<small>Icon names from FontAwesome Brands</small>
						</div>
					</div>
				</div>
			`).join("")}
		`,setTimeout(()=>{p.querySelectorAll('button[data-icon="trash"]').forEach(i=>{i.textContent="",(0,J.setIcon)(i,"trash")})},0),new J.Setting(c).setName("Add Social Link").setDesc("Add a new social media link").addButton(i=>i.setButtonText("+ Add Social Link").setCta().onClick(async()=>{t.navigation.social.push({title:"New Social",url:"https://example.com",icon:""}),await this.plugin.saveData(t),await this.applyCurrentConfiguration(!1),new J.Notice("Social link added and applied to config.ts"),this.render(e)}));let l=e.createDiv("settings-section");l.style.marginTop="30px",l.style.paddingTop="20px",l.style.borderTop="2px solid var(--background-modifier-border)",new J.Setting(l).setHeading().setName("Navigation Options"),new J.Setting(l).setName("Show navigation").setDesc("Display navigation menu on your site").addToggle(i=>{var d;return i.setValue((d=t.navigation.showNavigation)!=null?d:!0).onChange(async r=>{t.navigation.showNavigation=r,await this.plugin.saveData(t),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new J.Notice(`Navigation ${r?"enabled":"disabled"} and applied to config.ts`)})}),new J.Setting(l).setName("Navigation style").setDesc("Choose between minimal or traditional navigation style").addDropdown(i=>i.addOption("traditional","Traditional").addOption("minimal","Minimal").setValue(t.navigation.style||"traditional").onChange(async d=>{t.navigation.style=d,await this.plugin.saveData(t),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new J.Notice(`Navigation style changed to ${d} and applied to config.ts`)})),new J.Setting(l).setName("Show mobile menu").setDesc("Display mobile navigation menu on smaller screens").addToggle(i=>{var d;return i.setValue((d=t.navigation.showMobileMenu)!=null?d:!0).onChange(async r=>{t.navigation.showMobileMenu=r,await this.plugin.saveData(t),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new J.Notice(`Mobile menu ${r?"enabled":"disabled"} and applied to config.ts`)})}),this.setupEventDelegation(e),this.setupDragAndDrop(e)}setupDragAndDrop(e){let t=null,n=l=>{let i=l.target;i.classList.contains("nav-item")&&(t=i,i.style.opacity="0.5")},o=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.opacity="1",t=null)},s=l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&t&&i!==t){let d=i.getBoundingClientRect(),r=d.top+d.height/2;l.clientY<r?(i.style.borderTop="2px solid var(--interactive-accent)",i.style.borderBottom="none"):(i.style.borderBottom="2px solid var(--interactive-accent)",i.style.borderTop="none")}},c=l=>{let i=l.target;i.classList.contains("nav-item")&&(i.style.borderTop="none",i.style.borderBottom="none")},p=async l=>{l.preventDefault();let i=l.target;if(i.classList.contains("nav-item")&&t){let d=parseInt(i.getAttribute("data-index")||"0"),r=parseInt(t.getAttribute("data-index")||"0"),u=i.closest("#pages-list"),m=i.closest("#social-list");if(i.style.borderTop="none",i.style.borderBottom="none",d!==r){let S=this.getSettings();if(u){let T=[...S.navigation.pages],y=T.splice(r,1)[0];T.splice(d,0,y),S.navigation.pages=T}else if(m){let T=[...S.navigation.social],y=T.splice(r,1)[0];T.splice(d,0,y),S.navigation.social=T}await this.plugin.saveData(S),await this.applyCurrentConfiguration(),this.render(e)}}};e._dragStartHandler&&(e.removeEventListener("dragstart",e._dragStartHandler),e.removeEventListener("dragend",e._dragEndHandler),e.removeEventListener("dragover",e._dragOverHandler),e.removeEventListener("dragleave",e._dragLeaveHandler),e.removeEventListener("drop",e._dropHandler)),e._dragStartHandler=n,e._dragEndHandler=o,e._dragOverHandler=s,e._dragLeaveHandler=c,e._dropHandler=p,e.addEventListener("dragstart",n),e.addEventListener("dragend",o),e.addEventListener("dragover",s),e.addEventListener("dragleave",c),e.addEventListener("drop",p)}setupEventDelegation(e){let t=this.getSettings(),n=e.querySelector("#pages-list"),o=e.querySelector("#social-list");n&&n.addEventListener("input",c=>{let p=c.target;if(p.classList.contains("nav-title")){let l=p.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0");t.navigation.pages[i].title=p.value,this.debouncedSave()}else if(p.classList.contains("nav-url")){let l=p.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0");p.value.trim()===""?delete t.navigation.pages[i].url:t.navigation.pages[i].url=p.value,this.debouncedSave()}else if(p.classList.contains("nav-child-title")){let l=p.closest(".nav-child-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=parseInt((l==null?void 0:l.getAttribute("data-child-index"))||"0");t.navigation.pages[i].children||(t.navigation.pages[i].children=[]),t.navigation.pages[i].children[d]||(t.navigation.pages[i].children[d]={title:"",url:""}),t.navigation.pages[i].children[d].title=p.value,this.debouncedSave()}else if(p.classList.contains("nav-child-url")){let l=p.closest(".nav-child-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=parseInt((l==null?void 0:l.getAttribute("data-child-index"))||"0");t.navigation.pages[i].children||(t.navigation.pages[i].children=[]),t.navigation.pages[i].children[d]||(t.navigation.pages[i].children[d]={title:"",url:""}),t.navigation.pages[i].children[d].url=p.value,this.debouncedSave()}}),o&&o.addEventListener("input",c=>{let p=c.target;if(p.classList.contains("nav-title")||p.classList.contains("nav-url")||p.classList.contains("nav-icon")){let l=p.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=p.classList.contains("nav-title")?"title":p.classList.contains("nav-url")?"url":"icon";t.navigation.social[i][d]=p.value,this.debouncedSave()}});let s=async c=>{let p=c.target;if(p.classList.contains("nav-remove")){c.preventDefault(),c.stopPropagation();let l=p.closest(".nav-item"),i=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=l==null?void 0:l.closest("#pages-list"),r=this.getSettings();d?(r.navigation.pages.splice(i,1),await this.plugin.saveData(r),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!1),new J.Notice("Navigation page removed and applied to config.ts"),this.render(e)):(r.navigation.social.splice(i,1),await this.plugin.saveData(r),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!1),new J.Notice("Social link removed and applied to config.ts"),this.render(e))}else if(p.classList.contains("nav-child-remove")){c.preventDefault(),c.stopPropagation();let l=parseInt(p.getAttribute("data-index")||"0"),i=parseInt(p.getAttribute("data-child-index")||"0"),d=this.getSettings();if(d.navigation.pages[l].children){d.navigation.pages[l].children.splice(i,1),d.navigation.pages[l].children.length===0&&delete d.navigation.pages[l].children,await this.plugin.saveData(d),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!1),new J.Notice("Child page removed and applied to config.ts");let r=p.closest(".nav-item"),u=r==null?void 0:r.querySelector(".nav-children-container");u&&(!d.navigation.pages[l].children||d.navigation.pages[l].children.length===0)&&(u.style.display="none"),this.render(e)}}else if(p.classList.contains("nav-add-child")){c.preventDefault(),c.stopPropagation();let l=parseInt(p.getAttribute("data-index")||"0"),i=this.getSettings();i.navigation.pages[l].children||(i.navigation.pages[l].children=[]),i.navigation.pages[l].children.push({title:"New Child",url:"/new-child"}),await this.plugin.saveData(i),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!1),new J.Notice("Child page added and applied to config.ts");let d=p.closest(".nav-item"),r=d==null?void 0:d.querySelector(".nav-children-container");r&&(r.style.display="block"),this.render(e),setTimeout(()=>{e.querySelectorAll('button[data-icon="trash"]').forEach(u=>{u.textContent="",(0,J.setIcon)(u,"trash")})},0)}};e.removeEventListener("click",e._removeHandler),e._removeHandler=s,e.addEventListener("click",s)}debouncedSave(){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=window.setTimeout(async()=>{await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!1)},1e3)}};var Z=require("obsidian");var Ot=require("obsidian"),je=class extends Ot.Modal{constructor(e,t,n,o){super(e);this.changes=t,this.onConfirm=n,this.onCancel=o}onOpen(){let{contentEl:e}=this;e.empty();let t=e.createEl("h2",{text:"Apply Template Preset"});t.style.marginTop="0";let n=e.createEl("p",{text:"Applying this template will change the following settings:"});n.style.marginBottom="16px";let o=e.createEl("ul");o.style.marginBottom="24px",o.style.paddingLeft="20px",this.changes.forEach(i=>{let d=o.createEl("li",{text:i});d.style.marginBottom="4px"});let s=e.createEl("p",{text:"Do you want to apply this template?"});s.style.fontWeight="bold",s.style.marginBottom="24px";let c=e.createDiv("modal-button-container");c.style.display="flex",c.style.gap="12px",c.style.justifyContent="flex-end";let p=c.createEl("button",{text:"Cancel"});p.className="mod-cta",p.addEventListener("click",()=>{this.onCancel(),this.close()});let l=c.createEl("button",{text:"Continue"});l.className="mod-warning",l.addEventListener("click",()=>{this.onConfirm(),this.close()}),l.focus()}onClose(){let{contentEl:e}=this;e.empty()}};var We=class extends te{async render(a){a.empty();let e=this.getSettings(),t=a.createDiv("settings-section");new Z.Setting(a).setName("Template").setDesc("Choose your content template").addDropdown(n=>{oe.forEach(o=>{n.addOption(o.id,o.name)}),n.setValue(e.currentTemplate),n.onChange(async o=>{let s=this.getTemplateChanges(o);new je(this.app,s,async()=>{try{await this.updatePluginSettingsWithTemplate(o),await this.plugin.loadSettings();let p=this.plugin.settings;await this.plugin.configManager.applyPreset({name:p.currentTemplate,description:"",features:p.features,theme:p.currentTheme,contentOrganization:p.contentOrganization,config:p})?new Z.Notice(`Template changed to ${o} and applied to config.ts`):new Z.Notice("Failed to apply template to config.ts")}catch(p){new Z.Notice(`Failed to apply template change: ${p instanceof Error?p.message:String(p)}`),n.setValue(e.currentTemplate)}},()=>{n.setValue(e.currentTemplate)}).open()})}),new Z.Setting(a).setName("Deployment").setDesc("Choose your deployment platform").addDropdown(n=>{n.addOption("netlify","Netlify"),n.addOption("vercel","Vercel"),n.addOption("github-pages","GitHub Pages"),n.addOption("cloudflare-workers","Cloudflare Workers"),n.setValue(e.deployment.platform),n.onChange(async o=>{e.deployment.platform=o,await this.plugin.saveData(e),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new Z.Notice(`Deployment platform changed to ${o} and applied to config.ts`)}catch(s){new Z.Notice(`Failed to apply deployment platform change: ${s instanceof Error?s.message:String(s)}`)}})}),new Z.Setting(a).setName("Content organization").setDesc("Choose how to organize your content and assets").addDropdown(n=>{n.addOption("file-based","File-based"),n.addOption("folder-based","Folder-based"),n.setValue(e.contentOrganization),n.onChange(async o=>{e.contentOrganization=o,await this.plugin.saveData(e),await this.plugin.loadSettings();let s=o,c={obsidianSettings:{attachmentLocation:s==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:s==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};try{await this.plugin.pluginManager.configurePlugins(c);let p=s==="file-based"?"subfolder (attachments/)":"same folder",l=s==="file-based"?"file":"folder";new Z.Notice(`Content organization changed to ${o}

\u2022 Obsidian: Attachments \u2192 ${p}
\u2022 Astro Composer: Creation mode \u2192 ${l}
\u2022 Image Inserter: Format updated`,8e3)}catch(p){new Z.Notice(`Failed to configure plugins for content organization: ${p instanceof Error?p.message:String(p)}`)}})}),new Z.Setting(a).setHeading().setName("Plugin configuration"),this.renderPluginStatus(a,e)}async renderPluginStatus(a,e){let t=e.contentOrganization,n=await this.plugin.pluginManager.getPluginStatus(t),s=a.createDiv("plugin-status-container").createDiv("plugin-status");for(let c of n){let p=c.name==="Attachment settings",l=c.installed,i=c.outOfSyncContentTypes&&c.outOfSyncContentTypes.length>0,d=i&&c.outOfSyncContentTypes&&c.outOfSyncContentTypes.length===4,r=i&&!d&&c.installed&&c.enabled,u=d&&c.installed&&c.enabled,S=c.name==="Image Inserter"&&c.installed&&c.enabled&&c.settingsMatch===!1,T="plugin-item";p?T+=l?" installed":" missing":S||u?T+=" missing":r?T+=" partially-configured":T+=c.installed&&c.enabled?" installed":" missing";let y=s.createDiv(T),g=y.createDiv("plugin-icon");p?g.innerHTML=l?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':S||u?g.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>':r?g.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>':g.innerHTML=c.installed&&c.enabled?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>';let E=y.createDiv("plugin-info");E.createEl("h3",{text:c.name});let A;if(p?A=l?"Configured":"Doesn't match":c.installed?c.enabled?S||u?A="Doesn't match":r?A="Partially configured":A="Configured":A="Disabled":A="Not installed",E.createEl("p",{text:A}),i&&c.outOfSyncContentTypes){let F=E.createEl("p",{text:`Out of sync: ${c.outOfSyncContentTypes.join(", ")}`,cls:"sync-details"});F.style.fontSize="0.9em",F.style.opacity="0.8",F.style.marginTop="4px"}}new Z.Setting(a).setName("Re-apply configuration").setDesc("Re-apply plugin settings based on your content organization choice (useful if settings were changed manually or configuration failed)").addButton(c=>c.setButtonText("Re-apply Configuration").setCta().onClick(async()=>{let p=e.contentOrganization,l={obsidianSettings:{attachmentLocation:p==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:p==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:p==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:p==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(l)){let d=e.contentOrganization,r=d==="file-based"?"subfolder (attachments/)":"same folder",u=d==="file-based"?"file":"folder";new Z.Notice(`Configuration re-applied successfully!

\u2022 Obsidian: Attachments \u2192 ${r}
\u2022 Astro Composer: Creation mode \u2192 ${u}
\u2022 Image Inserter: Format updated for ${d}`,8e3);let m=a.querySelector(".plugin-status-container");m&&(m.remove(),await this.renderPluginStatus(a,e))}else new Z.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)})),new Z.Setting(a).setName("Show manual instructions").setDesc("Get step-by-step instructions for manual configuration").addButton(c=>c.setButtonText("Show Manual Instructions").onClick(async()=>{let p=e.contentOrganization,l={obsidianSettings:{attachmentLocation:p==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:p==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:p==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:p==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},i=await this.plugin.pluginManager.getManualConfigurationInstructions(l),d=new Z.Modal(this.app);d.titleEl.setText("Manual Configuration Instructions");let r=d.contentEl.createDiv();r.style.padding="20px",r.style.lineHeight="1.6";let u=i.split(`
`),m=null;u.forEach(S=>{let T=S.trim();if(T==="")r.createEl("br");else if(T.startsWith("## ")){m&&(m=null);let y=r.createEl("h2");y.setText(T.substring(3)),y.style.marginTop="20px",y.style.marginBottom="10px",y.style.fontSize="1.2em",y.style.fontWeight="bold"}else if(T.match(/^\d+\.\s/)){m||(m=r.createEl("ol"),m.style.marginLeft="20px",m.style.marginBottom="15px");let y=m.createEl("li");y.style.marginBottom="5px",this.parseBoldText(y,T.replace(/^\d+\.\s/,""))}else if(T.startsWith("- ")||T.startsWith("* ")){m||(m=r.createEl("ul"),m.style.marginLeft="20px",m.style.marginBottom="15px");let y=m.createEl("li");y.style.marginBottom="5px",this.parseBoldText(y,T.substring(2))}else{m&&(m=null);let y=r.createEl("p");y.style.marginBottom="10px",this.parseBoldText(y,T)}}),d.open()}))}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(n=>{n.startsWith("**")&&n.endsWith("**")?a.createEl("strong").setText(n.substring(2,n.length-2)):n.trim()!==""&&a.appendText(n)})}async updatePluginSettingsWithTemplate(a){var o,s,c,p,l,i,d,r,u,m,S,T,y,g,E,A,F,h,b,k,w,H,$,L,G,R,j,V,z,B,N;let e=this.plugin.settings,t=this.plugin.configManager.getTemplatePreset(a);if(!t||!t.config){new Z.Notice("Template preset not found");return}let n=this.plugin.configManager.getTemplateConfig(a,e);if(e.currentTemplate=a,t.config.features){let P=e.features.comments,ae=e.features.profilePicture;e.features={...e.features,...t.config.features},e.features.comments=P,e.features.profilePicture=ae,(o=e.postOptions)!=null&&o.graphView&&(e.postOptions.graphView.enabled=(s=t.config.features.graphView)!=null?s:!1,e.features.graphView=e.postOptions.graphView.enabled),(c=e.postOptions)!=null&&c.linkedMentions&&(e.postOptions.linkedMentions.enabled=(p=t.config.features.linkedMentions)!=null?p:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(l=t.config.features.linkedMentionsCompact)!=null?l:!1),(i=e.commandPalette)!=null&&i.quickActions&&t.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...t.config.features.quickActions})}n.commandPalette&&(e.commandPalette={...e.commandPalette,enabled:(d=n.commandPalette.enabled)!=null?d:e.commandPalette.enabled,placeholder:(r=n.commandPalette.placeholder)!=null?r:e.commandPalette.placeholder,shortcut:(u=n.commandPalette.shortcut)!=null?u:e.commandPalette.shortcut,search:{...e.commandPalette.search,...n.commandPalette.search||{}},sections:{...e.commandPalette.sections,...n.commandPalette.sections||{}},quickActions:{...e.commandPalette.quickActions,...t.config.features.quickActions||{}}},t.config.features.quickActions&&(e.features.quickActions={...e.features.quickActions,...t.config.features.quickActions})),n.homeOptions&&(e.homeOptions={...e.homeOptions,featuredPost:{...e.homeOptions.featuredPost,...n.homeOptions.featuredPost||{}},recentPosts:{...e.homeOptions.recentPosts,...n.homeOptions.recentPosts||{}},projects:{...e.homeOptions.projects,...n.homeOptions.projects||{}},docs:{...e.homeOptions.docs,...n.homeOptions.docs||{}},blurb:{...e.homeOptions.blurb,...n.homeOptions.blurb||{}}}),n.postOptions&&(e.postOptions={...e.postOptions,postsPerPage:(m=n.postOptions.postsPerPage)!=null?m:e.postOptions.postsPerPage,readingTime:(S=n.postOptions.readingTime)!=null?S:e.postOptions.readingTime,wordCount:(T=n.postOptions.wordCount)!=null?T:e.postOptions.wordCount,tags:(y=n.postOptions.tags)!=null?y:e.postOptions.tags,postNavigation:(g=n.postOptions.postNavigation)!=null?g:e.postOptions.postNavigation,showPostCardCoverImages:(E=n.postOptions.showPostCardCoverImages)!=null?E:e.postOptions.showPostCardCoverImages,postCardAspectRatio:(A=n.postOptions.postCardAspectRatio)!=null?A:e.postOptions.postCardAspectRatio,linkedMentions:{...e.postOptions.linkedMentions,...n.postOptions.linkedMentions||{}},graphView:{...e.postOptions.graphView,enabled:(h=(F=n.postOptions.graphView)==null?void 0:F.enabled)!=null?h:e.postOptions.graphView.enabled,showInSidebar:(k=(b=n.postOptions.graphView)==null?void 0:b.showInSidebar)!=null?k:e.postOptions.graphView.showInSidebar,maxNodes:(H=(w=n.postOptions.graphView)==null?void 0:w.maxNodes)!=null?H:e.postOptions.graphView.maxNodes,showOrphanedPosts:(L=($=n.postOptions.graphView)==null?void 0:$.showOrphanedPosts)!=null?L:e.postOptions.graphView.showOrphanedPosts},comments:e.postOptions.comments}),n.navigation&&(e.navigation={...e.navigation,showNavigation:(G=n.navigation.showNavigation)!=null?G:e.navigation.showNavigation,showMobileMenu:(R=n.navigation.showMobileMenu)!=null?R:e.navigation.showMobileMenu,style:(j=n.navigation.style)!=null?j:e.navigation.style}),t.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...t.config.tableOfContents}),n.optionalContentTypes&&(e.optionalContentTypes={projects:(V=n.optionalContentTypes.projects)!=null?V:!1,docs:(z=n.optionalContentTypes.docs)!=null?z:!1}),n.footer&&(e.footer={...e.footer,showSocialIconsInFooter:(B=n.footer.showSocialIconsInFooter)!=null?B:e.footer.showSocialIconsInFooter},e.features.showSocialIconsInFooter=(N=n.footer.showSocialIconsInFooter)!=null?N:e.features.showSocialIconsInFooter),await this.plugin.saveData(e)}getTemplateChanges(a){var p,l,i,d;let e=[],t=this.getSettings(),n=this.plugin.configManager.getTemplatePreset(a);if(!n||!n.config)return e.push("This will apply the template settings to your configuration."),e;let o=n.config,s=[];o.features&&([{key:"graphView",label:"Graph view"},{key:"tableOfContents",label:"Table of contents"},{key:"readingTime",label:"Reading time"},{key:"linkedMentions",label:"Linked mentions"},{key:"linkedMentionsCompact",label:"Compact linked mentions"},{key:"postNavigation",label:"Post navigation"},{key:"showSocialIconsInFooter",label:"Social icons in footer"},{key:"featureButton",label:"Feature button"}].forEach(({key:u,label:m})=>{let S=t.features[u],T=o.features[u];if(T!==void 0&&S!==T){let y=typeof S=="boolean"?S?"ON":"OFF":S,g=typeof T=="boolean"?T?"ON":"OFF":T;s.push(`${m}: ${y} \u2192 ${g}`)}}),o.features.quickActions&&t.features.quickActions&&o.features.quickActions.enabled!==t.features.quickActions.enabled&&s.push(`Quick actions: ${t.features.quickActions.enabled?"ON":"OFF"} \u2192 ${o.features.quickActions.enabled?"ON":"OFF"}`));let c=a==="standard";return((p=t.optionalContentTypes)==null?void 0:p.projects)!==c&&s.push(`Projects content type: ${(l=t.optionalContentTypes)!=null&&l.projects?"enabled":"disabled"} \u2192 ${c?"enabled":"disabled"}`),((i=t.optionalContentTypes)==null?void 0:i.docs)!==c&&s.push(`Docs content type: ${(d=t.optionalContentTypes)!=null&&d.docs?"enabled":"disabled"} \u2192 ${c?"enabled":"disabled"}`),s.length>0?e.push(...s):e.push("No changes needed - your settings already match this template."),e}};var x=require("obsidian");var ce=class{static async extractObsidianThemeColors(){let a=getComputedStyle(document.body),e=this.extractPrimaryColors(a),t=this.extractHighlightColors(a);return{primary:e,highlight:t}}static extractPrimaryColors(a){let e=this.getColorValue(a,"--background-primary"),t=this.getColorValue(a,"--background-secondary"),n=this.getColorValue(a,"--background-modifier-border"),o=this.hexToRgb(e),s=o?(.299*o.r+.587*o.g+.114*o.b)/255<.5:!0;return s?{50:this.lightenColor(t,95),100:this.lightenColor(t,90),200:this.lightenColor(t,80),300:this.lightenColor(t,70),400:this.lightenColor(t,55),500:this.lightenColor(t,40),600:this.lightenColor(t,25),700:t,800:this.darkenColor(e,20),900:this.darkenColor(e,35),950:this.darkenColor(e,50)}:this.createBetterColorScale(e,!0,s)}static extractHighlightColors(a){let e=this.getColorValue(a,"--text-accent")||this.getColorValue(a,"--interactive-accent")||this.getColorValue(a,"--text-a")||this.getColorValue(a,"--text-link"),t=this.getColorValue(a,"--text-accent-hover")||this.getColorValue(a,"--text-a-hover")||e;return{50:t,100:t,200:t,300:e,400:e,500:e,600:e,700:e,800:e,900:e}}static getColorValue(a,e){let t=a.getPropertyValue(e).trim();if(!t)switch(e){case"--background-primary":return"#1e1e1e";case"--background-secondary":return"#2d2d2d";case"--background-modifier-border":return"#3a3a3a";case"--text-normal":return"#dcddde";case"--text-muted":return"#72767d";case"--text-faint":return"#484b51";case"--text-accent":return"#708794";case"--ax1":return"#708794";case"--ax2":return"#889eaa";case"--ax3":return"#5a6d77";case"--text-accent-hover":return"#889eaa";case"--text-a":return"#f8c537";case"--text-a-hover":return"#f8c537";case"--text-link":return"#83a598";case"--interactive-accent":return"#5865f2";default:return"#666666"}return this.convertToHex(t)}static convertToHex(a){if(a.startsWith("#"))return a;let e=document.createElement("div");e.style.color=a,document.body.appendChild(e);let t=getComputedStyle(e).color;document.body.removeChild(e);let n=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(n){let s=parseInt(n[1]),c=parseInt(n[2]),p=parseInt(n[3]);return this.rgbToHex(s,c,p)}let o=a.match(/hsl\(\s*(\d+),\s*(\d+)%,\s*(\d+)%\s*\)/);if(o){let s=parseInt(o[1]),c=parseInt(o[2]),p=parseInt(o[3]);return this.hslToHex(s,c,p)}return"#666666"}static hslToHex(a,e,t){let n=a/360,o=e/100,s=t/100,c=(d,r,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<1/6?d+(r-d)*6*u:u<1/2?r:u<2/3?d+(r-d)*(2/3-u)*6:d),p,l,i;if(o===0)p=l=i=s;else{let d=s<.5?s*(1+o):s+o-s*o,r=2*s-d;p=c(r,d,n+1/3),l=c(r,d,n),i=c(r,d,n-1/3)}return this.rgbToHex(Math.round(p*255),Math.round(l*255),Math.round(i*255))}static generateColorScaleFromSimple(a,e){return{primary:this.generatePrimaryScale(e),highlight:this.generateHighlightScale(a)}}static generatePrimaryScale(a){return{50:this.lightenColor(a,95),100:this.lightenColor(a,85),200:this.lightenColor(a,75),300:this.lightenColor(a,50),400:this.lightenColor(a,25),500:a,600:this.darkenColor(a,15),700:this.darkenColor(a,30),800:this.darkenColor(a,45),900:this.darkenColor(a,60),950:this.darkenColor(a,75)}}static generateHighlightScale(a){return{50:this.lightenColor(a,95),100:this.lightenColor(a,85),200:this.lightenColor(a,75),300:this.lightenColor(a,65),400:this.lightenColor(a,55),500:a,600:this.darkenColor(a,10),700:this.darkenColor(a,20),800:this.darkenColor(a,30),900:this.darkenColor(a,40)}}static lightenColor(a,e){let t=this.hexToRgb(a);if(!t)return a;let{r:n,g:o,b:s}=t,c=e/100;return this.rgbToHex(Math.round(n+(255-n)*c),Math.round(o+(255-o)*c),Math.round(s+(255-s)*c))}static darkenColor(a,e){let t=this.hexToRgb(a);if(!t)return a;let{r:n,g:o,b:s}=t,c=e/100;return this.rgbToHex(Math.round(n*(1-c)),Math.round(o*(1-c)),Math.round(s*(1-c)))}static aggressiveLighten(a,e){let t=this.hexToRgb(a);if(!t)return a;let{r:n,g:o,b:s}=t,c=e/100;return this.rgbToHex(Math.round(Math.min(255,n+(255-n)*c*1.2)),Math.round(Math.min(255,o+(255-o)*c*1.2)),Math.round(Math.min(255,s+(255-s)*c*1.2)))}static aggressiveDarken(a,e){let t=this.hexToRgb(a);if(!t)return a;let{r:n,g:o,b:s}=t,c=e/100;return this.rgbToHex(Math.round(Math.max(0,n*(1-c*1.2))),Math.round(Math.max(0,o*(1-c*1.2))),Math.round(Math.max(0,s*(1-c*1.2))))}static createBetterColorScale(a,e=!0,t=!0){let n=this.hexToRgb(a);if(!n)return this.generatePrimaryScale(a);let{r:o,g:s,b:c}=n,l=(.299*o+.587*s+.114*c)/255<.5;return e?{50:l?this.lightenColor(a,95):this.darkenColor(a,95),100:l?this.lightenColor(a,90):this.darkenColor(a,90),200:l?this.lightenColor(a,80):this.darkenColor(a,80),300:l?this.lightenColor(a,70):this.darkenColor(a,70),400:l?this.lightenColor(a,55):this.darkenColor(a,55),500:l?this.lightenColor(a,40):this.darkenColor(a,40),600:l?this.lightenColor(a,25):this.darkenColor(a,25),700:a,800:l?this.darkenColor(a,20):this.lightenColor(a,20),900:l?this.darkenColor(a,35):this.lightenColor(a,35),950:l?this.darkenColor(a,50):this.lightenColor(a,50)}:t?{50:this.lightenColor(a,95),100:this.lightenColor(a,85),200:this.lightenColor(a,75),300:this.lightenColor(a,65),400:this.lightenColor(a,25),500:a,600:this.darkenColor(a,15),700:this.darkenColor(a,30),800:this.darkenColor(a,45),900:this.darkenColor(a,60)}:{50:this.lightenColor(a,60),100:this.lightenColor(a,50),200:this.lightenColor(a,40),300:this.lightenColor(a,30),400:this.lightenColor(a,20),500:a,600:this.darkenColor(a,20),700:this.darkenColor(a,40),800:this.darkenColor(a,60),900:this.darkenColor(a,80)}}static hexToRgb(a){if(a=a.replace("#",""),a.length===3&&(a=a.split("").map(e=>e+e).join("")),a.length===6){let e=parseInt(a.substr(0,2),16),t=parseInt(a.substr(2,2),16),n=parseInt(a.substr(4,2),16);return{r:e,g:t,b:n}}return null}static rgbToHex(a,e,t){let n=o=>{let s=Math.round(Math.max(0,Math.min(255,o))).toString(16);return s.length===1?"0"+s:s};return`#${n(a)}${n(e)}${n(t)}`}static isValidHexColor(a){return/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(a)}static generateThemeFileContent(a,e="custom"){return`// Custom theme extracted from Obsidian
// Generated: ${new Date().toISOString()}

export const ${e}Theme = {
  primary: {
    50: "${a.primary[50]}",
    100: "${a.primary[100]}",
    200: "${a.primary[200]}",
    300: "${a.primary[300]}",
    400: "${a.primary[400]}",
    500: "${a.primary[500]}",
    600: "${a.primary[600]}",
    700: "${a.primary[700]}",
    800: "${a.primary[800]}",
    900: "${a.primary[900]}",
    950: "${a.primary[950]}"
  },
  highlight: {
    50: "${a.highlight[50]}",
    100: "${a.highlight[100]}",
    200: "${a.highlight[200]}",
    300: "${a.highlight[300]}",
    400: "${a.highlight[400]}",
    500: "${a.highlight[500]}",
    600: "${a.highlight[600]}",
    700: "${a.highlight[700]}",
    800: "${a.highlight[800]}",
    900: "${a.highlight[900]}"
  }
};
`}};var Ke=class extends te{constructor(){super(...arguments);this.mainContainer=null}render(e){var c,p,l,i,d;e.empty(),this.mainContainer=e;let t=this.getSettings(),n=e.createDiv("settings-section");if(new x.Setting(e).setHeading().setName("Colors"),new x.Setting(e).setName("Theme").setDesc("Choose your color theme").addDropdown(r=>{ne.forEach(u=>{r.addOption(u.id,u.name)}),r.setValue(t.currentTheme),r.onChange(async u=>{t.currentTheme=u,await this.plugin.saveData(t),await this.plugin.loadSettings(),this.render(e);try{await this.plugin.configManager.updateThemeOnly(u)?new x.Notice(`Theme changed to ${u} and applied to config.ts`):new x.Notice("Failed to apply theme change to config.ts")}catch(m){new x.Notice(`Failed to apply theme change: ${m instanceof Error?m.message:String(m)}`)}})}),new x.Setting(e).setName("Customize available themes").setDesc("Control which themes are shown to users in the theme selector").addToggle(r=>{let u=Array.isArray(t.availableThemes);r.setValue(u),r.onChange(async m=>{if(m){let S=ne.filter(T=>T.id!=="custom").map(T=>T.id);t.availableThemes=S}else t.availableThemes="default";await this.plugin.saveData(t),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new x.Notice(`Available themes ${m?"customized":"set to default"} and applied to config.ts`)}catch(S){new x.Notice(`Failed to apply available themes change: ${S instanceof Error?S.message:String(S)}`)}})}),Array.isArray(t.availableThemes)){let r=e.createDiv("theme-pills-container");r.style.marginTop="10px",r.style.marginBottom="20px";let u=r.createEl("p",{text:"Available themes (click to toggle selection):",cls:"theme-pills-header"});u.style.fontSize="14px",u.style.marginBottom="8px",u.style.color="var(--text-muted)";let m=r.createDiv("theme-pills-wrapper");m.style.display="flex",m.style.flexWrap="wrap",m.style.gap="8px",ne.filter(b=>b.id!=="custom").forEach(b=>{let k=t.availableThemes.includes(b.id),w=m.createDiv("theme-pill");w.style.display="inline-flex",w.style.alignItems="center",w.style.padding="4px 8px",w.style.borderRadius="12px",w.style.fontSize="12px",w.style.gap="6px",w.style.cursor="pointer",w.style.transition="all 0.2s ease",k?(w.style.backgroundColor="var(--interactive-accent)",w.style.color="var(--text-on-accent)",w.style.border="1px solid var(--interactive-accent)"):(w.style.backgroundColor="var(--background-secondary)",w.style.color="var(--text-muted)",w.style.border="1px solid var(--background-modifier-border)"),w.createSpan({text:b.name});let H=w.createSpan({text:k?"\u2713":"\u25CB"});H.style.fontSize="10px",H.style.opacity="0.8",w.addEventListener("click",async()=>{let $=t.availableThemes,L;k?L=$.filter(G=>G!==b.id):L=[...$,b.id],t.availableThemes=L,await this.plugin.saveData(t),await this.plugin.loadSettings(),this.mainContainer&&this.render(this.mainContainer);try{await this.applyCurrentConfiguration(),new x.Notice(`Theme "${b.name}" ${k?"removed from":"added to"} available themes`)}catch(G){new x.Notice(`Failed to apply theme change: ${G instanceof Error?G.message:String(G)}`)}})});let T=r.createDiv("custom-themes-section");T.style.marginTop="15px",T.style.padding="10px",T.style.backgroundColor="var(--background-secondary)",T.style.borderRadius="6px",T.style.border="1px solid var(--background-modifier-border)";let y=T.createEl("label",{text:"Custom themes (comma-separated):",cls:"custom-themes-label"});y.style.display="block",y.style.fontSize="12px",y.style.color="var(--text-muted)",y.style.marginBottom="6px";let g=T.createDiv("custom-themes-input-container");g.style.display="flex",g.style.gap="6px",g.style.alignItems="center";let E=g.createEl("input",{type:"text",placeholder:"custom,obsidinite",value:t.customThemes||"",attr:{spellcheck:"false"}});E.style.flex="1",E.style.padding="6px 8px",E.style.border="1px solid var(--background-modifier-border)",E.style.borderRadius="4px",E.style.backgroundColor="var(--background-primary)",E.style.color="var(--text-normal)",E.style.fontSize="12px";let A=g.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Open themes folder"}});A.style.padding="4px",A.style.border="none",A.style.backgroundColor="transparent",A.style.color="var(--text-normal)",A.style.display="flex",A.style.alignItems="center",A.style.justifyContent="center",A.style.marginTop="2px";let F=A.createDiv();F.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"></path></svg>',A.addEventListener("click",async()=>{try{let b="../../src/themes/custom";await this.app.openWithDefaultApp(b)}catch(b){new x.Notice(`Failed to open themes folder: ${b instanceof Error?b.message:String(b)}`)}});let h=null;E.addEventListener("input",async()=>{t.customThemes=E.value.trim(),await this.plugin.saveData(t),await this.plugin.loadSettings(),h&&clearTimeout(h),h=window.setTimeout(async()=>{try{await this.applyCurrentConfiguration(),new x.Notice("Custom themes updated and applied to config.ts")}catch(b){new x.Notice(`Failed to apply custom themes: ${b instanceof Error?b.message:String(b)}`)}},1e3)})}let o=e.createDiv("settings-section");if(new x.Setting(o).setName("Generate custom theme").setDesc("Enable to extract colors from your Obsidian theme and generate custom theme files").addToggle(r=>{r.setValue(t.customThemeGenerationEnabled||!1),r.onChange(async u=>{t.customThemeGenerationEnabled=u,u&&(t.themeColors||(t.themeColors={mode:"simple",extractedColors:void 0,simpleColors:{accent:"#5865f2",background:"#1e1e1e"},lastExtracted:void 0})),await this.plugin.saveData(t),await this.plugin.loadSettings(),this.render(e)})}),t.customThemeGenerationEnabled){if(this.createTextSetting(o,"Custom theme file name","Filename for the generated theme file (without .ts extension)",t.customThemeFile||"custom",r=>{t.customThemeFile=r}),new x.Setting(o).setName("Extract from Obsidian Theme").setDesc("Extract colors from your currently active Obsidian theme").addButton(r=>{r.setButtonText("Extract Colors"),r.setCta(),r.onClick(async()=>{try{let u=await ce.extractObsidianThemeColors();t.themeColors.extractedColors=u,t.themeColors.lastExtracted=new Date().toISOString(),await this.plugin.saveData(t),await this.plugin.loadSettings(),this.render(e),new x.Notice("Colors extracted successfully from Obsidian theme!")}catch(u){new x.Notice(`Failed to extract colors: ${u instanceof Error?u.message:String(u)}`)}})}),t.themeColors.lastExtracted){let r=new Date(t.themeColors.lastExtracted).toLocaleString();o.createEl("p",{text:`Last extracted: ${r}`,cls:"theme-extraction-timestamp"}).style.color="var(--text-muted)"}new x.Setting(o).setName("Color editing mode").setDesc("Choose how to edit your theme colors").addDropdown(r=>{r.addOption("simple","Simple (accent + background)"),r.addOption("advanced","Advanced (individual shades)"),r.setValue(t.themeColors.mode),r.onChange(async u=>{t.themeColors.mode=u,await this.plugin.saveData(t),await this.plugin.loadSettings(),this.render(e)})}),t.themeColors.extractedColors&&this.renderColorPreview(o,t.themeColors.extractedColors),t.themeColors.extractedColors&&(t.themeColors.mode==="simple"?this.renderSimpleColorEditor(o,t):this.renderAdvancedColorEditor(o,t)),new x.Setting(o).setName("Save to Custom Theme File").setDesc("Generate a custom theme file from your extracted colors").addButton(r=>{r.setButtonText("Save Theme File"),r.setCta(),r.onClick(async()=>{try{if(!t.themeColors.extractedColors){new x.Notice("No colors available to save. Please extract colors first.");return}let u=t.customThemeFile||"custom",m=ce.generateThemeFileContent(t.themeColors.extractedColors,u),S=`../../src/themes/custom/${u}.ts`;await this.app.vault.adapter.write(S,m),t.customThemeFile=u,await this.plugin.saveData(t);try{await this.plugin.configManager.updateIndividualFeatures(t)?new x.Notice(`${u}.ts saved successfully! Use the main theme dropdown to switch to "custom" if you want to use this theme.`):new x.Notice("Theme file saved but failed to apply to config.ts")}catch(T){new x.Notice(`Theme file saved but failed to apply: ${T instanceof Error?T.message:String(T)}`)}}catch(u){new x.Notice(`Failed to save theme file: ${u instanceof Error?u.message:String(u)}`)}})})}let s=e.createDiv("settings-section");new x.Setting(s).setHeading().setName("Typography"),new x.Setting(s).setName("Heading Font").setDesc("Font for headings and titles").addDropdown(r=>{ve.forEach(u=>{r.addOption(u,u)}),r.setValue(t.typography.headingFont),r.onChange(async u=>{t.typography.headingFont=u,await this.plugin.saveData(t),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("heading",u)?new x.Notice("Heading font updated and applied to config.ts"):new x.Notice("Failed to apply heading font change to config.ts")}catch(m){new x.Notice(`Failed to apply heading font change: ${m instanceof Error?m.message:String(m)}`)}})}),new x.Setting(s).setName("Prose Font").setDesc("Font for body text and content").addDropdown(r=>{ve.forEach(u=>{r.addOption(u,u)}),r.setValue(t.typography.proseFont),r.onChange(async u=>{t.typography.proseFont=u,await this.plugin.saveData(t),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("prose",u)?new x.Notice("Prose font updated and applied to config.ts"):new x.Notice("Failed to apply prose font change to config.ts")}catch(m){new x.Notice(`Failed to apply prose font change: ${m instanceof Error?m.message:String(m)}`)}})}),new x.Setting(s).setName("Monospace Font").setDesc("Font for code blocks and technical content").addDropdown(r=>{ve.forEach(u=>{r.addOption(u,u)}),r.setValue(t.typography.monoFont),r.onChange(async u=>{t.typography.monoFont=u,await this.plugin.saveData(t),await this.plugin.loadSettings();try{await this.plugin.configManager.updateFontOnly("mono",u)?new x.Notice("Monospace font updated and applied to config.ts"):new x.Notice("Failed to apply monospace font change to config.ts")}catch(m){new x.Notice(`Failed to apply monospace font change: ${m instanceof Error?m.message:String(m)}`)}})}),new x.Setting(s).setName("Font Source").setDesc("How fonts are loaded").addDropdown(r=>{r.addOption("local","Local (Google Fonts)"),r.addOption("cdn","CDN (Custom)"),r.setValue(t.typography.fontSource),r.onChange(async u=>{t.typography.fontSource=u,await this.plugin.saveData(t),await this.plugin.loadSettings(),this.render(e);try{await this.applyCurrentConfiguration(),new x.Notice(`Font source changed to ${u} and applied to config.ts`)}catch(m){new x.Notice(`Failed to apply font source change: ${m instanceof Error?m.message:String(m)}`)}})}),new x.Setting(s).setName("Font Display").setDesc("Font display strategy").addDropdown(r=>{r.addOption("swap","Swap (recommended)"),r.addOption("fallback","Fallback"),r.addOption("optional","Optional"),r.setValue(t.typography.fontDisplay||"swap"),r.onChange(async u=>{t.typography.fontDisplay=u,await this.plugin.saveData(t),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new x.Notice("Font display updated and applied to config.ts")}catch(m){new x.Notice(`Failed to apply font display change: ${m instanceof Error?m.message:String(m)}`)}})}),t.typography.fontSource==="cdn"&&(this.createTextSetting(s,"Custom Font URLs","Comma-separated URLs for custom fonts (e.g., Google Fonts URL)",((c=t.typography.customFonts)==null?void 0:c.urls)||"",r=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.urls=r}),this.createTextSetting(s,"Custom Heading Font Name","Font family name for headings",((p=t.typography.customFonts)==null?void 0:p.heading)||"",r=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.heading=r}),this.createTextSetting(s,"Custom Body Font Name","Font family name for body text",((l=t.typography.customFonts)==null?void 0:l.prose)||"",r=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.prose=r}),this.createTextSetting(s,"Custom Monospace Font Name","Font family name for code",((i=t.typography.customFonts)==null?void 0:i.mono)||"",r=>{t.typography.customFonts||(t.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),t.typography.customFonts.mono=r})),this.createTextSetting(s,"Content width","Maximum width for content (e.g., 45rem)",((d=t.layout)==null?void 0:d.contentWidth)||"45rem",r=>{t.layout||(t.layout={contentWidth:"45rem"}),t.layout.contentWidth=r})}renderColorPreview(e,t){let n=e.createDiv("color-preview-section");n.createEl("h4",{text:"Color Preview"});let o=n.createDiv("color-preview-container");o.style.display="flex",o.style.gap="10px",o.style.marginTop="10px",[50,100,200,300,400,500,600,700,800,900,950].forEach(p=>{let l=t.primary[p];if(l){let i=o.createDiv("color-box");i.style.width="20px",i.style.height="20px",i.style.backgroundColor=l,i.style.border="1px solid var(--background-modifier-border)",i.style.borderRadius="3px",i.title=`Primary ${p}: ${l}`}}),[50,100,200,300,400,500,600,700,800,900].forEach(p=>{let l=t.highlight[p];if(l){let i=o.createDiv("color-box");i.style.width="20px",i.style.height="20px",i.style.backgroundColor=l,i.style.border="1px solid var(--background-modifier-border)",i.style.borderRadius="3px",i.title=`Highlight ${p}: ${l}`}})}renderSimpleColorEditor(e,t){var u,m,S,T;let n=e.createDiv("simple-color-inputs");n.style.marginBottom="20px",n.createEl("h4",{text:"Simple Color Editor"});let o=((m=(u=t.themeColors.extractedColors)==null?void 0:u.highlight)==null?void 0:m[500])||"#5865f2",s=((T=(S=t.themeColors.extractedColors)==null?void 0:S.primary)==null?void 0:T[800])||"#1e1e1e";t.themeColors.simpleColors={accent:o,background:s};let c=n.createDiv("simple-color-input");c.createEl("label",{text:"Accent Color:"});let p=c.createEl("input",{type:"text",value:t.themeColors.simpleColors.accent});p.style.fontFamily="var(--font-monospace)";let l=c.createEl("input",{type:"color"});l.value=t.themeColors.simpleColors.accent,l.className="color-picker",p.oninput=async()=>{ce.isValidHexColor(p.value)&&(t.themeColors.simpleColors.accent=p.value,l.value=p.value,await this.plugin.saveData(t))},l.onchange=async()=>{t.themeColors.simpleColors.accent=l.value,p.value=l.value,await this.plugin.saveData(t)};let i=n.createDiv("simple-color-input");i.createEl("label",{text:"Background Color:"});let d=i.createEl("input",{type:"text",value:t.themeColors.simpleColors.background});d.style.fontFamily="var(--font-monospace)";let r=i.createEl("input",{type:"color"});r.value=t.themeColors.simpleColors.background,r.className="color-picker",d.oninput=async()=>{ce.isValidHexColor(d.value)&&(t.themeColors.simpleColors.background=d.value,r.value=d.value,await this.plugin.saveData(t))},r.onchange=async()=>{t.themeColors.simpleColors.background=r.value,d.value=r.value,await this.plugin.saveData(t)}}renderAdvancedColorEditor(e,t){let n=e.createDiv("advanced-mode-section");n.createEl("h4",{text:"Advanced Color Editor"});let o=n.createDiv("color-scale-editor");o.createEl("h5",{text:"Primary Colors"}),[50,100,200,300,400,500,600,700,800,900,950].forEach(l=>{var d,r;let i=(r=(d=t.themeColors.extractedColors)==null?void 0:d.primary)==null?void 0:r[l];if(i){let u=o.createDiv("setting-item");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px",u.style.marginBottom="8px";let m=u.createDiv("setting-item-name");m.textContent=`${l}:`,m.style.minWidth="40px",m.style.fontSize="12px",m.style.color="var(--text-muted)";let S=u.createDiv("setting-item-control");S.style.display="flex",S.style.gap="8px",S.style.alignItems="center";let T=S.createEl("input",{type:"text",value:i});T.style.width="100px",T.style.fontFamily="var(--font-monospace)",T.style.fontSize="12px";let y=S.createEl("input",{type:"color",value:i});y.className="color-picker",T.oninput=async()=>{ce.isValidHexColor(T.value)&&(t.themeColors.extractedColors.primary[l]=T.value,y.value=T.value,await this.plugin.saveData(t))},y.onchange=async()=>{t.themeColors.extractedColors.primary[l]=y.value,T.value=y.value,await this.plugin.saveData(t)}}});let c=n.createDiv("color-scale-editor");c.createEl("h5",{text:"Highlight Colors"}),[50,100,200,300,400,500,600,700,800,900].forEach(l=>{var d,r;let i=(r=(d=t.themeColors.extractedColors)==null?void 0:d.highlight)==null?void 0:r[l];if(i){let u=c.createDiv("setting-item");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px",u.style.marginBottom="8px";let m=u.createDiv("setting-item-name");m.textContent=`${l}:`,m.style.minWidth="40px",m.style.fontSize="12px",m.style.color="var(--text-muted)";let S=u.createDiv("setting-item-control");S.style.display="flex",S.style.gap="8px",S.style.alignItems="center";let T=S.createEl("input",{type:"text",value:i});T.style.width="100px",T.style.fontFamily="var(--font-monospace)",T.style.fontSize="12px";let y=S.createEl("input",{type:"color",value:i});y.className="color-picker",T.oninput=async()=>{ce.isValidHexColor(T.value)&&(t.themeColors.extractedColors.highlight[l]=T.value,y.value=T.value,await this.plugin.saveData(t))},y.onchange=async()=>{t.themeColors.extractedColors.highlight[l]=y.value,T.value=y.value,await this.plugin.saveData(t)}}})}};var _=require("obsidian");var Ye=class extends te{render(a){var b,k,w,H,$,L,G,R,j,V,z,B,N,P,ae,pe,de,ue,ge,me,he,fe,Oe,Ce,Te,Se,Y,ie,q,re,W,U,le;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section"),n=a.createDiv("settings-section");n.style.marginTop="20px",new _.Setting(n).setHeading().setName("Global Options"),new _.Setting(n).setName("Enable Projects").setDesc("Enable projects as a unique content type for showcasing work and portfolios").addToggle(O=>{var f,C;return O.setValue((C=(f=e.optionalContentTypes)==null?void 0:f.projects)!=null?C:!0).onChange(async I=>{e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.projects=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Projects ${I?"enabled":"disabled"} and applied to config.ts`)})}),new _.Setting(n).setName("Enable Docs").setDesc("Enable docs as a unique content type for documentation and knowledge base").addToggle(O=>{var f,C;return O.setValue((C=(f=e.optionalContentTypes)==null?void 0:f.docs)!=null?C:!0).onChange(async I=>{e.optionalContentTypes||(e.optionalContentTypes={projects:!0,docs:!0}),e.optionalContentTypes.docs=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Docs ${I?"enabled":"disabled"} and applied to config.ts`)})}),new _.Setting(n).setName("Table of contents").setDesc("Show table of contents on content pages").addToggle(O=>{var f,C;return O.setValue((C=(f=e.tableOfContents)==null?void 0:f.enabled)!=null?C:!0).onChange(async I=>{e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.enabled=I,await this.plugin.saveData(e),await this.plugin.loadSettings();let v=n.querySelector(".toc-depth-option");v&&(v.style.display=I?"block":"none"),await this.applyCurrentConfiguration(),new _.Notice(`Table of contents ${I?"enabled":"disabled"} and applied to config.ts`)})});let o=n.createDiv("toc-depth-option");o.style.display=(k=(b=e.tableOfContents)==null?void 0:b.enabled)==null||k?"block":"none",o.style.paddingLeft="20px",new _.Setting(o).setName("Table of contents depth").setDesc("Maximum heading depth to include in ToC (2=H2, 3=H3, 4=H4, 5=H5, 6=H6)").addText(O=>{var f;return O.setPlaceholder("4").setValue(String(((f=e.tableOfContents)==null?void 0:f.depth)||4)).onChange(async C=>{let I=parseInt(C)||4,v=Math.max(2,Math.min(6,I));e.tableOfContents||(e.tableOfContents={enabled:!0,depth:4}),e.tableOfContents.depth=v,O.setValue(String(v)),await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Table of contents depth set to ${v} and applied to config.ts`)})}),new _.Setting(n).setName("Footer").setDesc("Enable footer on your site").addToggle(O=>{var f,C;return O.setValue((C=(f=e.footer)==null?void 0:f.enabled)!=null?C:!0).onChange(async I=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.enabled=I,await this.plugin.saveData(e),await this.plugin.loadSettings();let v=n.querySelector(".footer-options");v&&(v.style.display=I?"block":"none"),await this.applyCurrentConfiguration(),new _.Notice(`Footer ${I?"enabled":"disabled"} and applied to config.ts`)})});let s=n.createDiv("footer-options");s.style.display=(H=(w=e.footer)==null?void 0:w.enabled)==null||H?"block":"none",s.style.paddingLeft="20px",new _.Setting(s).setName("Footer content").setDesc("Text to display in footer. Use {author} for site author and {title} for site title").addText(O=>{var f;return O.setPlaceholder("\xA9 2025 {author}. Built with the Astro Modular theme.").setValue(((f=e.footer)==null?void 0:f.content)||'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.').onChange(async C=>{e.footer||(e.footer={enabled:!0,content:"",showSocialIconsInFooter:!0}),e.footer.content=C,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(s).setName("Show social icons in footer").setDesc("Display social media icons in the footer").addToggle(O=>{var f,C;return O.setValue((C=(f=e.footer)==null?void 0:f.showSocialIconsInFooter)!=null?C:!0).onChange(async I=>{e.footer||(e.footer={enabled:!0,content:'\xA9 2025 {author}. Built with the <a href="https://github.com/davidvkimball/astro-modular" target="_blank">Astro Modular</a> theme.',showSocialIconsInFooter:!0}),e.footer.showSocialIconsInFooter=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Social icons in footer ${I?"enabled":"disabled"} and applied to config.ts`)})}),new _.Setting(n).setName("Hide scroll bar").setDesc("Hide the browser scroll bar for a cleaner look").addToggle(O=>{var f,C;return O.setValue((C=(f=e.features)==null?void 0:f.hideScrollBar)!=null?C:!1).onChange(async I=>{e.features.hideScrollBar=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Hide scroll bar ${I?"enabled":"disabled"} and applied to config.ts`)})}),new _.Setting(n).setName("Scroll to top").setDesc("Show scroll to top button").addToggle(O=>{var f,C;return O.setValue((C=(f=e.features)==null?void 0:f.scrollToTop)!=null?C:!0).onChange(async I=>{e.features.scrollToTop=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Scroll to top ${I?"enabled":"disabled"} and applied to config.ts`)})}),new _.Setting(n).setName("Feature button").setDesc("Choose which feature button appears in the header").addDropdown(O=>{var f;return O.addOption("mode","Dark/Light Mode Toggle").addOption("graph","View Graph").addOption("theme","Change Theme").addOption("none","None").setValue(((f=e.features)==null?void 0:f.featureButton)||"mode").onChange(async C=>{e.features.featureButton=C,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(),new _.Notice(`Feature button updated to "${C}" and applied to config.ts`)})});let c=a.createDiv("settings-section");c.style.marginTop="30px",c.style.paddingTop="20px",c.style.borderTop="2px solid var(--background-modifier-border)",new _.Setting(c).setHeading().setName("Command Palette"),new _.Setting(c).setName("Enable Command Palette").setDesc("Add a command palette to your site").addToggle(O=>{var f,C;return O.setValue((C=(f=e.commandPalette)==null?void 0:f.enabled)!=null?C:!0).onChange(async I=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.enabled=I,e.features.commandPalette=I,await this.plugin.saveData(e),await this.plugin.loadSettings();let v=c.querySelector(".command-palette-options");v&&(v.style.display=I?"block":"none"),await this.applyCurrentConfiguration(),new _.Notice(`Command Palette ${I?"enabled":"disabled"} and applied to config.ts`)})});let p=c.createDiv("command-palette-options");p.style.display=(L=($=e.commandPalette)==null?void 0:$.enabled)==null||L?"block":"none",p.style.paddingLeft="20px",this.createTextSetting(p,"Shortcut","Keyboard shortcut to open command palette (Ctrl = Cmd on Mac)",((G=e.commandPalette)==null?void 0:G.shortcut)||"ctrl+K",O=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.shortcut=O}),this.createTextSetting(p,"Placeholder","Placeholder text in command palette search box",((R=e.commandPalette)==null?void 0:R.placeholder)||"Search posts",O=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.placeholder=O});let l=p.createDiv();l.createEl("h4",{text:"Search Content Types"}),new _.Setting(l).setName("Search posts").setDesc("Include posts in search results").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.search)==null?void 0:C.posts)!=null?I:!0).onChange(async v=>{e.commandPalette||(e.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),e.commandPalette.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.posts=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(l).setName("Search pages").setDesc("Include pages in search results").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.search)==null?void 0:C.pages)!=null?I:!1).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.pages=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(l).setName("Search projects").setDesc("Include projects in search results").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.search)==null?void 0:C.projects)!=null?I:!1).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.projects=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(l).setName("Search docs").setDesc("Include docs in search results").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.search)==null?void 0:C.docs)!=null?I:!1).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.search||(e.commandPalette.search={posts:!0,pages:!1,projects:!1,docs:!1}),e.commandPalette.search.docs=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})});let i=p.createDiv();i.style.marginTop="15px",i.createEl("h4",{text:"Command Palette Sections"}),new _.Setting(i).setName("Show quick actions section").setDesc("Display quick actions in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.sections)==null?void 0:C.quickActions)!=null?I:!0).onChange(async v=>{var ee;(ee=e.commandPalette)!=null&&ee.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.quickActions=v,await this.plugin.saveData(e);let M=i.querySelector(".quick-actions-options");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let d=i.createDiv("quick-actions-options");d.style.display=(z=(V=(j=e.commandPalette)==null?void 0:j.sections)==null?void 0:V.quickActions)==null||z?"block":"none",d.style.paddingLeft="20px",d.style.marginTop="10px",new _.Setting(d).setName("Toggle dark/light mode").setDesc("Show mode toggle button in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.quickActions)==null?void 0:C.toggleMode)!=null?I:!0).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.toggleMode=v,e.features.quickActions.toggleMode=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(d).setName("View graph").setDesc("Show graph view button in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.quickActions)==null?void 0:C.graphView)!=null?I:!0).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.graphView=v,e.features.quickActions.graphView=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(d).setName("Change theme").setDesc("Show theme selector button in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.quickActions)==null?void 0:C.changeTheme)!=null?I:!0).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.quickActions||(e.commandPalette.quickActions={enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}),e.commandPalette.quickActions.changeTheme=v,e.features.quickActions.changeTheme=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(i).setName("Show pages section").setDesc("Display navigation pages in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.sections)==null?void 0:C.pages)!=null?I:!0).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.pages=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(i).setName("Show social section").setDesc("Display social links in command palette").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.commandPalette)==null?void 0:f.sections)==null?void 0:C.social)!=null?I:!0).onChange(async v=>{var M;(M=e.commandPalette)!=null&&M.sections||(e.commandPalette.sections={quickActions:!0,pages:!0,social:!0}),e.commandPalette.sections.social=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})});let r=a.createDiv("settings-section");r.style.marginTop="30px",r.style.paddingTop="20px",r.style.borderTop="2px solid var(--background-modifier-border)",new _.Setting(r).setHeading().setName("Home Options"),new _.Setting(r).setName("Featured post").setDesc("Show featured post on homepage").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.homeOptions)==null?void 0:f.featuredPost)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{e.homeOptions||(e.homeOptions={featuredPost:{enabled:!0,type:"latest",slug:"getting-started"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}}),e.homeOptions.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.enabled=v,await this.plugin.saveData(e),await this.plugin.loadSettings();let M=r.querySelector(".featured-post-options");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration(),new _.Notice(`Featured post ${v?"enabled":"disabled"} and applied to config.ts`)})});let u=r.createDiv("featured-post-options");u.style.display=(P=(N=(B=e.homeOptions)==null?void 0:B.featuredPost)==null?void 0:N.enabled)==null||P?"block":"none",u.style.paddingLeft="20px",new _.Setting(u).setName("Featured post type").setDesc("Show latest post or a specific featured post").addDropdown(O=>{var f,C;return O.addOption("latest","Latest").addOption("featured","Featured").setValue(((C=(f=e.homeOptions)==null?void 0:f.featuredPost)==null?void 0:C.type)||"latest").onChange(async I=>{var M;(M=e.homeOptions)!=null&&M.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"latest",slug:"getting-started"}),e.homeOptions.featuredPost.type=I,await this.plugin.saveData(e);let v=u.querySelector(".featured-post-slug");v&&(v.style.display=I==="featured"?"block":"none"),await this.applyCurrentConfiguration()})});let m=u.createDiv("featured-post-slug");m.style.display=((pe=(ae=e.homeOptions)==null?void 0:ae.featuredPost)==null?void 0:pe.type)==="featured"?"block":"none",new _.Setting(m).setName("Featured post slug").setDesc('Slug of the post to feature (e.g., "getting-started" for /posts/getting-started)').addText(O=>{var f,C;return O.setPlaceholder("getting-started").setValue(((C=(f=e.homeOptions)==null?void 0:f.featuredPost)==null?void 0:C.slug)||"getting-started").onChange(async I=>{var v;(v=e.homeOptions)!=null&&v.featuredPost||(e.homeOptions.featuredPost={enabled:!0,type:"featured",slug:"getting-started"}),e.homeOptions.featuredPost.slug=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(r).setName("Recent posts").setDesc("Show recent posts on homepage").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.homeOptions)==null?void 0:f.recentPosts)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{var ee;(ee=e.homeOptions)!=null&&ee.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.enabled=v,await this.plugin.saveData(e),await this.plugin.loadSettings();let M=r.querySelector(".recent-posts-count");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let S=r.createDiv("recent-posts-count");S.style.display=(ge=(ue=(de=e.homeOptions)==null?void 0:de.recentPosts)==null?void 0:ue.enabled)==null||ge?"block":"none",S.style.paddingLeft="20px",new _.Setting(S).setName("Recent posts count").setDesc("Number of recent posts to show").addText(O=>{var f,C;return O.setPlaceholder("7").setValue(String(((C=(f=e.homeOptions)==null?void 0:f.recentPosts)==null?void 0:C.count)||7)).onChange(async I=>{var M;let v=parseInt(I)||7;(M=e.homeOptions)!=null&&M.recentPosts||(e.homeOptions.recentPosts={enabled:!0,count:7}),e.homeOptions.recentPosts.count=v,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(r).setName("Projects on homepage").setDesc("Show featured projects on homepage").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.homeOptions)==null?void 0:f.projects)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{var ee;(ee=e.homeOptions)!=null&&ee.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.enabled=v,await this.plugin.saveData(e);let M=r.querySelector(".projects-count");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let T=r.createDiv("projects-count");T.style.display=(fe=(he=(me=e.homeOptions)==null?void 0:me.projects)==null?void 0:he.enabled)==null||fe?"block":"none",T.style.paddingLeft="20px",new _.Setting(T).setName("Projects count").setDesc("Number of projects to show").addText(O=>{var f,C;return O.setPlaceholder("2").setValue(String(((C=(f=e.homeOptions)==null?void 0:f.projects)==null?void 0:C.count)||2)).onChange(async I=>{var M;let v=parseInt(I)||2;(M=e.homeOptions)!=null&&M.projects||(e.homeOptions.projects={enabled:!0,count:2}),e.homeOptions.projects.count=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(r).setName("Docs on homepage").setDesc("Show featured docs on homepage").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.homeOptions)==null?void 0:f.docs)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{var ee;(ee=e.homeOptions)!=null&&ee.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.enabled=v,await this.plugin.saveData(e);let M=r.querySelector(".docs-count");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let y=r.createDiv("docs-count");y.style.display=(Te=(Ce=(Oe=e.homeOptions)==null?void 0:Oe.docs)==null?void 0:Ce.enabled)==null||Te?"block":"none",y.style.paddingLeft="20px",new _.Setting(y).setName("Docs count").setDesc("Number of docs to show").addText(O=>{var f,C;return O.setPlaceholder("3").setValue(String(((C=(f=e.homeOptions)==null?void 0:f.docs)==null?void 0:C.count)||3)).onChange(async I=>{var M;let v=parseInt(I)||3;(M=e.homeOptions)!=null&&M.docs||(e.homeOptions.docs={enabled:!0,count:3}),e.homeOptions.docs.count=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(r).setName("Blurb placement").setDesc("Where to place the blurb text on homepage").addDropdown(O=>{var f,C;return O.addOption("above","Above").addOption("below","Below").addOption("none","None").setValue(((C=(f=e.homeOptions)==null?void 0:f.blurb)==null?void 0:C.placement)||"below").onChange(async I=>{var v;(v=e.homeOptions)!=null&&v.blurb||(e.homeOptions.blurb={placement:"below"}),e.homeOptions.blurb.placement=I,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})});let g=a.createDiv("settings-section");g.style.marginTop="30px",g.style.paddingTop="20px",g.style.borderTop="2px solid var(--background-modifier-border)",new _.Setting(g).setHeading().setName("Post Options"),new _.Setting(g).setName("Posts per page").setDesc("Number of posts to show per page").addText(O=>{var f;return O.setPlaceholder("6").setValue(String(((f=e.postOptions)==null?void 0:f.postsPerPage)||6)).onChange(async C=>{var v;let I=parseInt(C)||6;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postsPerPage=I,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Reading time").setDesc("Display estimated reading time on posts").addToggle(O=>{var f,C;return O.setValue((C=(f=e.postOptions)==null?void 0:f.readingTime)!=null?C:!0).onChange(async I=>{var v;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.readingTime=I,e.features.readingTime=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Word count").setDesc("Display word count on posts").addToggle(O=>{var f,C;return O.setValue((C=(f=e.postOptions)==null?void 0:f.wordCount)!=null?C:!0).onChange(async I=>{var v;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.wordCount=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Tags").setDesc("Show tags on posts").addToggle(O=>{var f,C;return O.setValue((C=(f=e.postOptions)==null?void 0:f.tags)!=null?C:!0).onChange(async I=>{var v;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.tags=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Linked mentions").setDesc("Show linked mentions and backlinks on posts").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.postOptions)==null?void 0:f.linkedMentions)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{var ee;(ee=e.postOptions)!=null&&ee.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.enabled=v,e.features.linkedMentions=v,await this.plugin.saveData(e),await this.plugin.loadSettings();let M=g.querySelector(".linked-mentions-compact");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let E=g.createDiv("linked-mentions-compact");E.style.display=(ie=(Y=(Se=e.postOptions)==null?void 0:Se.linkedMentions)==null?void 0:Y.enabled)==null||ie?"block":"none",E.style.paddingLeft="20px",new _.Setting(E).setName("Compact view").setDesc("Use compact view for linked mentions").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.postOptions)==null?void 0:f.linkedMentions)==null?void 0:C.linkedMentionsCompact)!=null?I:!1).onChange(async v=>{var M;(M=e.postOptions)!=null&&M.linkedMentions||(e.postOptions.linkedMentions={enabled:!0,linkedMentionsCompact:!1}),e.postOptions.linkedMentions.linkedMentionsCompact=v,e.features.linkedMentionsCompact=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Graph view").setDesc("Show graph view of post connections").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.postOptions)==null?void 0:f.graphView)==null?void 0:C.enabled)!=null?I:!0).onChange(async v=>{var ee;(ee=e.postOptions)!=null&&ee.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.enabled=v,e.features.graphView=v,await this.plugin.saveData(e),await this.plugin.loadSettings();let M=g.querySelector(".graph-view-options");M&&(M.style.display=v?"block":"none"),await this.applyCurrentConfiguration()})});let A=g.createDiv("graph-view-options");A.style.display=(W=(re=(q=e.postOptions)==null?void 0:q.graphView)==null?void 0:re.enabled)==null||W?"block":"none",A.style.paddingLeft="20px",new _.Setting(A).setName("Show in sidebar").setDesc("Display graph view in post sidebar").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.postOptions)==null?void 0:f.graphView)==null?void 0:C.showInSidebar)!=null?I:!0).onChange(async v=>{var M;(M=e.postOptions)!=null&&M.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showInSidebar=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(A).setName("Maximum nodes").setDesc("Maximum number of nodes to show in graph").addText(O=>{var f,C;return O.setPlaceholder("100").setValue(String(((C=(f=e.postOptions)==null?void 0:f.graphView)==null?void 0:C.maxNodes)||100)).onChange(async I=>{var M;let v=parseInt(I)||100;(M=e.postOptions)!=null&&M.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.maxNodes=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(A).setName("Show orphaned posts").setDesc("Include posts with no connections in graph view").addToggle(O=>{var f,C,I;return O.setValue((I=(C=(f=e.postOptions)==null?void 0:f.graphView)==null?void 0:C.showOrphanedPosts)!=null?I:!0).onChange(async v=>{var M;(M=e.postOptions)!=null&&M.graphView||(e.postOptions.graphView={enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0}),e.postOptions.graphView.showOrphanedPosts=v,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Post navigation").setDesc("Show next/previous post navigation").addToggle(O=>{var f,C;return O.setValue((C=(f=e.postOptions)==null?void 0:f.postNavigation)!=null?C:!0).onChange(async I=>{var v;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postNavigation=I,e.features.postNavigation=I,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Show post card cover images").setDesc("Where to display cover images on post cards").addDropdown(O=>{var f;return O.addOption("all","All").addOption("featured","Featured").addOption("home","Home").addOption("posts","Posts").addOption("featured-and-posts","Featured and Posts").addOption("none","None").setValue(((f=e.postOptions)==null?void 0:f.showPostCardCoverImages)||"featured-and-posts").onChange(async C=>{var I;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((I=e.optionalFeatures)==null?void 0:I.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.showPostCardCoverImages=C,e.features.showPostCardCoverImages=C,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})}),new _.Setting(g).setName("Post card aspect ratio").setDesc("Aspect ratio for post card cover images").addDropdown(O=>{var f;return O.addOption("16:9","16:9").addOption("4:3","4:3").addOption("3:2","3:2").addOption("og","Open Graph").addOption("square","Square").addOption("golden","Golden").addOption("custom","Custom").setValue(((f=e.postOptions)==null?void 0:f.postCardAspectRatio)||"og").onChange(async C=>{var v;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((v=e.optionalFeatures)==null?void 0:v.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.postCardAspectRatio=C,e.features.postCardAspectRatio=C,await this.plugin.saveData(e),await this.plugin.loadSettings();let I=g.querySelector(".custom-aspect-ratio");I&&(I.style.display=C==="custom"?"block":"none"),await this.applyCurrentConfiguration()})});let F=g.createDiv("custom-aspect-ratio");F.style.display=((U=e.postOptions)==null?void 0:U.postCardAspectRatio)==="custom"?"block":"none",F.style.paddingLeft="20px",this.createTextSetting(F,"Custom aspect ratio",'Custom aspect ratio in format "width/height" (e.g., "2.5/1")',((le=e.postOptions)==null?void 0:le.customPostCardAspectRatio)||"2.5/1",O=>{var f;e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:((f=e.optionalFeatures)==null?void 0:f.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.postOptions.customPostCardAspectRatio=O,e.features.customPostCardAspectRatio=O},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()});let h=a.createDiv("settings-section");h.style.marginTop="30px",h.style.paddingTop="20px",h.style.borderTop="2px solid var(--background-modifier-border)",new _.Setting(h).setHeading().setName("Optional Features"),this.renderProfilePictureSetting(h,e),this.renderCommentsSetting(h,e)}renderProfilePictureSetting(a,e){var p,l,i,d;let t=((p=e.features)==null?void 0:p.profilePicture)||((i=(l=e.optionalFeatures)==null?void 0:l.profilePicture)==null?void 0:i.enabled),n=((d=e.optionalFeatures)==null?void 0:d.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},o=new _.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(r=>r.setValue(t).onChange(async u=>{var S;e.features.profilePicture=u,e.optionalFeatures||(e.optionalFeatures={profilePicture:n,comments:((S=e.postOptions)==null?void 0:S.comments)||{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}}),e.optionalFeatures.profilePicture.enabled=u,await this.plugin.saveData(e),await this.plugin.loadSettings();let m=a.querySelector(".profile-picture-options");m&&(m.style.display=u?"block":"none");try{await this.applyCurrentConfiguration(),new _.Notice(`Profile picture ${u?"enabled":"disabled"} and applied to config.ts`)}catch(T){new _.Notice(`Failed to apply profile picture to config.ts: ${T instanceof Error?T.message:String(T)}`)}})),s=a.createDiv("profile-picture-options");s.style.display=t?"block":"none",s.style.marginTop="10px",s.style.paddingLeft="20px";let c=s.createDiv("options-grid");c.style.display="grid",c.style.gridTemplateColumns="1fr 1fr",c.style.gap="10px",c.style.marginTop="10px",this.createTextSetting(c,"Image path","Path to the profile picture image (in the public folder)",n.image,r=>{n.image=r},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"/profile.jpg"),this.createTextSetting(c,"Alt text","Alternative text for the profile picture",n.alt,r=>{n.alt=r},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"Profile picture"),new _.Setting(c).setName("Size").setDesc("Size of the profile picture").addDropdown(r=>r.addOption("sm","Small").addOption("md","Medium").addOption("lg","Large").setValue(n.size).onChange(async u=>{n.size=u,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})),this.createTextSetting(c,"URL (optional)","Optional URL to link the profile picture to",n.url||"",r=>{n.url=r},1e3,async()=>{await this.plugin.loadSettings(),await this.applyCurrentConfiguration()},"/about"),new _.Setting(c).setName("Placement").setDesc("Where to show the profile picture").addDropdown(r=>r.addOption("footer","Footer").addOption("header","Header").setValue(n.placement).onChange(async u=>{n.placement=u,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()})),new _.Setting(c).setName("Style").setDesc("Visual style of the profile picture").addDropdown(r=>r.addOption("circle","Circle").addOption("square","Square").addOption("none","None").setValue(n.style).onChange(async u=>{n.style=u,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration()}))}renderCommentsSetting(a,e){var S,T,y,g,E,A,F,h,b,k,w,H,$,L;let t=(h=(F=(g=(T=(S=e.optionalFeatures)==null?void 0:S.comments)==null?void 0:T.enabled)!=null?g:(y=e.features)==null?void 0:y.comments)!=null?F:(A=(E=e.postOptions)==null?void 0:E.comments)==null?void 0:A.enabled)!=null?h:!1,n=((b=e.postOptions)==null?void 0:b.comments)||((k=e.optionalFeatures)==null?void 0:k.comments)||{enabled:!1,provider:"giscus",rawScript:"",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},o=new _.Setting(a).setName("Post comments").setDesc("Enable Giscus comment system for posts").addToggle(G=>G.setValue(t).onChange(async R=>{e.features.comments=R,e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:{...n}}),e.postOptions.comments.enabled=R,e.optionalFeatures||(e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{...n}}),e.optionalFeatures.comments.enabled=R,await this.plugin.saveData(e),await this.plugin.loadSettings();let j=a.querySelector(".comments-options");j&&(j.style.display=R?"block":"none");try{await this.applyCurrentConfiguration(),new _.Notice(`Comments system ${R?"enabled":"disabled"} and applied to config.ts`)}catch(V){new _.Notice(`Failed to apply comments system to config.ts: ${V instanceof Error?V.message:String(V)}`)}})),s=a.createDiv("comments-options");s.style.display=t?"block":"none",s.style.marginTop="10px",s.style.paddingLeft="20px";let c=s.createDiv("comments-instructions");c.style.marginBottom="15px",c.style.padding="10px",c.style.background="var(--background-modifier-border)",c.style.borderRadius="4px",c.style.borderLeft="3px solid var(--interactive-accent)";let p=c.createEl("p");p.style.margin="0",p.style.fontSize="13px",p.style.color="var(--text-muted)",p.style.whiteSpace="pre-line",p.innerHTML=`1. Go to <a href="https://giscus.app/" target="_blank" rel="noopener noreferrer" style="color: var(--interactive-accent); text-decoration: none;">giscus.app</a> and configure your comments
2. Copy the generated script
3. Paste it below`;let l=p.querySelector("a");l&&(l.addEventListener("mouseenter",()=>{l.style.textDecoration="underline"}),l.addEventListener("mouseleave",()=>{l.style.textDecoration="none"}));let d=new _.Setting(s).setName("Giscus Script").setDesc("Paste your Giscus script here (the plugin will automatically parse all settings)").controlEl.createEl("textarea",{attr:{placeholder:`<script src="https://giscus.app/client.js"
        data-repo="davidvkimball/astro-modular"
        data-repo-id="R_kgDOPllfKw"
        data-category="General"
        data-category-id="DIC_kwDOPllfK84CvUpx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
<\/script>`,rows:"8"}});d.style.width="100%",d.style.fontFamily="var(--font-monospace)",d.style.fontSize="12px",d.style.padding="8px",d.style.border="1px solid var(--background-modifier-border)",d.style.borderRadius="4px",d.style.background="var(--background-primary)",d.style.color="var(--text-normal)",d.style.resize="none",d.value=((H=(w=e.optionalFeatures)==null?void 0:w.comments)==null?void 0:H.rawScript)||((L=($=e.postOptions)==null?void 0:$.comments)==null?void 0:L.rawScript)||"";let r=s.createDiv("script-validation");r.style.marginTop="8px",r.style.fontSize="12px";let u=null,m=async(G=!1)=>{var z,B,N,P,ae,pe,de,ue,ge,me,he,fe,Oe,Ce,Te,Se;let R=d.value.trim();if(!R){r.innerHTML="";let Y=(ue=(de=(P=(B=(z=e.optionalFeatures)==null?void 0:z.comments)==null?void 0:B.enabled)!=null?P:(N=e.features)==null?void 0:N.comments)!=null?de:(pe=(ae=e.postOptions)==null?void 0:ae.comments)==null?void 0:pe.enabled)!=null?ue:!1;e.optionalFeatures?e.optionalFeatures.comments={...e.optionalFeatures.comments,rawScript:"",repo:"",repoId:"",category:"",categoryId:"",mapping:"",strict:"",reactions:"",metadata:"",inputPosition:"",theme:"",lang:"",loading:"",enabled:Y}:e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:Y,provider:"giscus",rawScript:"",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},e.postOptions?e.postOptions.comments={...e.optionalFeatures.comments}:e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:e.optionalFeatures.comments},e.features||(e.features={}),e.features.comments=Y,await this.plugin.saveData(e),await this.plugin.loadSettings(),G&&(await this.applyCurrentConfiguration(),new _.Notice("Giscus script cleared and applied to config.ts"));return}let{GiscusScriptParser:j}=await Promise.resolve().then(()=>(dt(),pt)),V=j.validateScript(R);if(V.valid){r.innerHTML='<span style="color: var(--text-success)">\u2713 Valid Giscus script detected</span>';let Y=j.parseScript(R);if(Y){let ie=(Se=(Te=(fe=(me=(ge=e.optionalFeatures)==null?void 0:ge.comments)==null?void 0:me.enabled)!=null?fe:(he=e.features)==null?void 0:he.comments)!=null?Te:(Ce=(Oe=e.postOptions)==null?void 0:Oe.comments)==null?void 0:Ce.enabled)!=null?Se:!1;if(n.rawScript=R,n.repo=Y.repo,n.repoId=Y.repoId,n.category=Y.category,n.categoryId=Y.categoryId,n.mapping=Y.mapping,n.strict=Y.strict,n.reactions=Y.reactions,n.metadata=Y.metadata,n.inputPosition=Y.inputPosition,n.theme=Y.theme,n.lang=Y.lang,n.loading=Y.loading,n.enabled=ie,e.optionalFeatures||(e.optionalFeatures={profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:n}),e.optionalFeatures.comments={...n},e.postOptions||(e.postOptions={postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,maxNodes:100,showOrphanedPosts:!0},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",customPostCardAspectRatio:"2.5/1",comments:n}),e.postOptions.comments={...n},e.features||(e.features={}),e.features.comments=ie,await this.plugin.saveData(e),await this.plugin.loadSettings(),G)try{await this.applyCurrentConfiguration();let q=ie?"Giscus script parsed and applied to config.ts":"Giscus script parsed and saved. Enable comments to apply to config.ts";new _.Notice(q)}catch(q){new _.Notice(`Failed to apply Giscus script to config.ts: ${q instanceof Error?q.message:String(q)}`)}}}else r.innerHTML=`<span style="color: var(--text-error)">\u2717 ${V.error}</span>`};d.addEventListener("input",()=>{u&&clearTimeout(u),m(!1),u=window.setTimeout(async()=>{await m(!0)},1e3)}),d.addEventListener("blur",async()=>{u&&(clearTimeout(u),u=null),await m(!0)}),m(!1)}};var K=require("obsidian");var Je=class extends te{render(a){var n;a.empty();let e=this.getSettings(),t=a.createDiv("settings-section");new K.Setting(a).setName("Edit config.ts directly").setDesc("Open your Astro configuration file in the editor").addButton(o=>o.setButtonText("Open config.ts").onClick(async()=>{await this.openConfigFile()})),new K.Setting(a).setName("Sync from config.ts").setDesc("Read current config.ts file and update plugin settings to match").addButton(o=>o.setButtonText("Sync from config.ts").setCta().onClick(async()=>{var s,c,p,l,i,d,r,u,m,S,T,y,g,E,A,F,h,b,k,w,H,$,L,G,R,j,V,z;try{let B=await this.plugin.configManager.fileManager.readConfig();if(!B){new K.Notice("Could not read config.ts file");return}let N=await this.plugin.configManager.fileManager.parseConfigFile(B);if(!N){new K.Notice("Could not parse config.ts file");return}let P=this.getSettings();N.siteInfo&&(P.siteInfo.site=(s=N.siteInfo.site)!=null?s:P.siteInfo.site,P.siteInfo.title=(c=N.siteInfo.title)!=null?c:P.siteInfo.title,P.siteInfo.description=(p=N.siteInfo.description)!=null?p:P.siteInfo.description,P.siteInfo.author=(l=N.siteInfo.author)!=null?l:P.siteInfo.author,P.siteInfo.language=(i=N.siteInfo.language)!=null?i:P.siteInfo.language),N.faviconThemeAdaptive!==void 0&&(P.siteInfo.faviconThemeAdaptive=N.faviconThemeAdaptive),N.defaultOgImageAlt&&(P.siteInfo.defaultOgImageAlt=N.defaultOgImageAlt,P.seo||(P.seo={defaultOgImageAlt:""}),P.seo.defaultOgImageAlt=N.defaultOgImageAlt),N.navigation&&(N.navigation.pages&&(P.navigation.pages=N.navigation.pages),N.navigation.social&&(P.navigation.social=N.navigation.social)),N.currentTheme&&(P.currentTheme=N.currentTheme),N.typography&&(P.typography.fontSource=(d=N.typography.fontSource)!=null?d:P.typography.fontSource,P.typography.proseFont=(r=N.typography.proseFont)!=null?r:P.typography.proseFont,P.typography.headingFont=(u=N.typography.headingFont)!=null?u:P.typography.headingFont,P.typography.monoFont=(m=N.typography.monoFont)!=null?m:P.typography.monoFont),N.tableOfContents&&(P.tableOfContents||(P.tableOfContents={enabled:!0,depth:4}),P.tableOfContents.enabled=(S=N.tableOfContents.enabled)!=null?S:P.tableOfContents.enabled,P.tableOfContents.depth=(T=N.tableOfContents.depth)!=null?T:P.tableOfContents.depth),N.postOptions&&(P.features.readingTime=(y=N.postOptions.readingTime)!=null?y:P.features.readingTime,P.features.linkedMentions=(E=(g=N.postOptions.linkedMentions)==null?void 0:g.enabled)!=null?E:P.features.linkedMentions,P.features.linkedMentionsCompact=(F=(A=N.postOptions.linkedMentions)==null?void 0:A.linkedMentionsCompact)!=null?F:P.features.linkedMentionsCompact,P.features.graphView=(b=(h=N.postOptions.graphView)==null?void 0:h.enabled)!=null?b:P.features.graphView,P.features.postNavigation=(k=N.postOptions.postNavigation)!=null?k:P.features.postNavigation,P.features.comments=(H=(w=N.postOptions.comments)==null?void 0:w.enabled)!=null?H:P.features.comments),N.optionalContentTypes&&(P.optionalContentTypes.projects=($=N.optionalContentTypes.projects)!=null?$:P.optionalContentTypes.projects,P.optionalContentTypes.docs=(L=N.optionalContentTypes.docs)!=null?L:P.optionalContentTypes.docs),N.footer&&(P.features.showSocialIconsInFooter=(G=N.footer.showSocialIconsInFooter)!=null?G:!1),N.commandPalette&&(P.features.commandPalette=(R=N.commandPalette.enabled)!=null?R:!1,P.commandPalette||(P.commandPalette={enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0},quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}),P.commandPalette.enabled=(j=N.commandPalette.enabled)!=null?j:P.commandPalette.enabled,P.commandPalette.placeholder=(V=N.commandPalette.placeholder)!=null?V:P.commandPalette.placeholder,P.commandPalette.shortcut=(z=N.commandPalette.shortcut)!=null?z:P.commandPalette.shortcut,N.commandPalette.search&&(P.commandPalette.search={...P.commandPalette.search,...N.commandPalette.search}),N.commandPalette.sections&&(P.commandPalette.sections={...P.commandPalette.sections,...N.commandPalette.sections}),N.commandPalette.quickActions&&(P.commandPalette.quickActions={...P.commandPalette.quickActions,...N.commandPalette.quickActions},P.features.quickActions={...P.features.quickActions,...N.commandPalette.quickActions})),N.theme&&(P.currentTheme=N.theme),N.site&&(P.siteInfo.site=N.site),N.title&&(P.siteInfo.title=N.title),N.description&&(P.siteInfo.description=N.description),N.author&&(P.siteInfo.author=N.author),N.language&&(P.siteInfo.language=N.language),P.currentTemplate="standard",await this.plugin.saveData(P),await this.plugin.triggerSettingsRefresh(),new K.Notice("Settings synced from config.ts successfully")}catch(B){new K.Notice(`Failed to sync from config.ts: ${B instanceof Error?B.message:String(B)}`)}})),new K.Setting(a).setName("Reset to Template").setDesc(`Reset all settings to the current template (${(n=oe.find(o=>o.id===e.currentTemplate))==null?void 0:n.name})`).addButton(o=>o.setButtonText("Reset to Template").setWarning().onClick(async()=>{var s,c,p,l,i,d;try{let r=this.plugin.configManager.getTemplatePreset(e.currentTemplate);if(r&&r.config){let u=e.siteInfo,m=e.navigation,S=e.currentTheme,T=e.contentOrganization,y=e.typography,g=e.optionalFeatures,E=e.runWizardOnStartup;r.config.features&&(e.features={...e.features,...r.config.features},(s=e.postOptions)!=null&&s.graphView&&(e.postOptions.graphView.enabled=(c=r.config.features.graphView)!=null?c:!1,e.features.graphView=e.postOptions.graphView.enabled),(p=e.postOptions)!=null&&p.linkedMentions&&(e.postOptions.linkedMentions.enabled=(l=r.config.features.linkedMentions)!=null?l:!1,e.postOptions.linkedMentions.linkedMentionsCompact=(i=r.config.features.linkedMentionsCompact)!=null?i:!1),(d=e.commandPalette)!=null&&d.quickActions&&r.config.features.quickActions&&(e.commandPalette.quickActions={...e.commandPalette.quickActions,...r.config.features.quickActions})),r.config.tableOfContents&&(e.tableOfContents={...e.tableOfContents,...r.config.tableOfContents}),e.currentTemplate=r.config.currentTemplate||e.currentTemplate,e.siteInfo=u,e.navigation=m,e.currentTheme=S,e.contentOrganization=T,e.typography=y,e.optionalFeatures=g,e.runWizardOnStartup=E,await this.plugin.saveData(e),await this.plugin.loadSettings(),await this.applyCurrentConfiguration(!0),new K.Notice(`Reset to ${e.currentTemplate} template and applied to config.ts`)}else new K.Notice("Template not found")}catch(r){new K.Notice(`Failed to reset to template: ${r instanceof Error?r.message:String(r)}`)}})),new K.Setting(a).setName("Reset to defaults").setDesc("Reset all settings to their default values").addButton(o=>o.setButtonText("Reset to Defaults").setWarning().onClick(async()=>{let s=new K.Modal(this.app);s.titleEl.setText("Reset to Defaults");let c=s.contentEl.createDiv();c.createEl("p",{text:"Are you sure you want to reset all configuration settings to defaults?"}),c.createEl("p",{text:"This will preserve your site info and navigation pages/links."});let p=c.createDiv();p.style.marginTop="20px",p.style.display="flex",p.style.gap="10px",p.style.justifyContent="flex-end";let l=p.createEl("button",{text:"Cancel"});l.className="mod-button",l.addEventListener("click",()=>{s.close()});let i=p.createEl("button",{text:"Reset to Defaults"});i.className="mod-warning",i.addEventListener("click",async()=>{s.close();let d=this.getSettings(),r=d.siteInfo,u=d.navigation.pages,m=d.navigation.social,S={...be};S.siteInfo=r,S.navigation.pages=u,S.navigation.social=m,this.plugin.settings=S,await this.plugin.saveData(S),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new K.Notice("Configuration reset to defaults and applied to config.ts (site info and navigation pages/links preserved)")}catch(T){new K.Notice(`Configuration reset but failed to apply to config.ts: ${T instanceof Error?T.message:String(T)}`)}await this.plugin.triggerSettingsRefresh()}),i.focus(),s.open()})),new K.Setting(a).setName("Export configuration").setDesc("Export your current configuration as JSON").addButton(o=>o.setButtonText("Export JSON").onClick(()=>{this.exportConfiguration()})),new K.Setting(a).setName("Import configuration").setDesc("Import configuration from JSON file").addButton(o=>o.setButtonText("Import JSON").onClick(()=>{this.importConfiguration()}))}exportConfiguration(){let a=JSON.stringify(this.getSettings(),null,2),e=new Blob([a],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="astro-modular-config.json",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),new K.Notice("Configuration exported successfully!")}importConfiguration(){let a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=async e=>{var n;let t=(n=e.target.files)==null?void 0:n[0];if(t)try{let o=await t.text(),s=JSON.parse(o),c=this.getSettings();Object.assign(c,s),await this.plugin.saveData(c),new K.Notice("Configuration imported successfully!")}catch(o){new K.Notice("Failed to import configuration. Please check the file format.")}},a.click()}async openConfigFile(){try{let a=require("fs"),e=require("path"),{shell:t}=require("electron"),n=this.app.vault.adapter.basePath||this.app.vault.adapter.path,o=typeof n=="string"?n:n.toString(),s=e.join(o,"..","config.ts");a.existsSync(s)?t.openPath(s):new K.Notice(`Config file not found at: ${s}`)}catch(a){new K.Notice(`Error opening config file: ${a instanceof Error?a.message:String(a)}`)}}};var Qe=class extends Ct.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){this.render()}render(){let{containerEl:e}=this;e.empty(),e.addClass("astro-modular-settings");let t=e.createDiv("tab-container"),n=t.createDiv("tab-nav"),o=t.createDiv("tab-content"),s=[{id:"general",name:"General",renderer:new qe(this.app,this.plugin)},{id:"site-info",name:"Site Info",renderer:new ze(this.app,this.plugin)},{id:"navigation",name:"Navigation",renderer:new Ue(this.app,this.plugin)},{id:"config",name:"Config",renderer:new We(this.app,this.plugin)},{id:"style",name:"Style",renderer:new Ke(this.app,this.plugin)},{id:"features",name:"Features",renderer:new Ye(this.app,this.plugin)},{id:"advanced",name:"Advanced",renderer:new Je(this.app,this.plugin)}];s.forEach((p,l)=>{let i=n.createEl("button",{text:p.name,cls:`tab-button ${l===0?"active":""}`});i.addEventListener("click",async()=>{n.querySelectorAll(".tab-button").forEach(d=>d.classList.remove("active")),i.classList.add("active"),o.empty(),await p.renderer.render(o)})});let c=s[0].renderer.render(o);c&&typeof c.then=="function"&&c.catch(p=>{console.error("Error rendering initial tab:",p)})}};var Ze=class{constructor(a){this.app=a,this.configPath="../../src/config.ts"}async getConfigFileInfo(){try{let a=require("fs"),e=require("path"),t=this.app.vault.adapter,n=t.basePath||t.path,o=typeof n=="string"?n:n?String(n):"",s=e.join(o,"..","..","src","config.ts"),c=e.dirname(s);if(a.existsSync(s)){let p=a.readFileSync(s,"utf8"),l=a.statSync(s);return{exists:!0,path:s,content:p,lastModified:new Date(l.mtime),valid:!0,errors:[]}}else return{exists:!1,path:s,content:"",lastModified:new Date,valid:!1,errors:["Config file not found"]}}catch(a){return{exists:!1,path:this.configPath,content:"",lastModified:new Date,valid:!1,errors:["Cannot access file outside vault"]}}}validateConfigContent(a){return a.includes("defineConfig")||a.includes("export default")||a.includes("astro/config")}async readConfig(){return(await this.getConfigFileInfo()).content}async writeConfig(a){try{let e=require("fs"),t=require("path"),n=this.app.vault.adapter,o=n.basePath||n.path,s=typeof o=="string"?o:o?String(o):"",c=t.join(s,"..","..","src","config.ts");return e.writeFileSync(c,a,"utf8"),!0}catch(e){return console.error("\u274C Error writing config:",e),!1}}async detectAstroDevServer(){let a=this.app.vault.getAbstractFileByPath("package.json");if(a)try{let e=await this.app.vault.read(a);return e.includes("astro")&&e.includes("dev")}catch(e){return!1}return!1}async parseConfigFile(a){var Y,ie;let e=a||await this.readConfig();if(!e)return null;let t={};t.siteInfo={};let n=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"([^"]*)"/);n&&(t.siteInfo.site=n[1]);let o=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"([^"]*)"/);o&&(t.siteInfo.title=o[1]);let s=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"([^"]*)"/);s&&(t.siteInfo.description=s[1]);let c=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"([^"]*)"/);c&&(t.siteInfo.author=c[1]);let p=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"([^"]*)"/);p&&(t.siteInfo.language=p[1]);let l=e.match(/\/\/ \[CONFIG:FAVICON_THEME_ADAPTIVE\]\s*\n\s*faviconThemeAdaptive:\s*(true|false)/);l&&(t.faviconThemeAdaptive=l[1]==="true");let i=e.match(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"([^"]*)"/);i&&(t.defaultOgImageAlt=i[1]);let d=e.match(/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"([^"]*)"/);d&&(t.currentTheme=d[1]);let r=e.match(/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"default"|\[[^\]]*\])/);if(r){let q=(Y=r[0].match(/availableThemes:\s*(.+)$/))==null?void 0:Y[1];if(q==='"default"')t.availableThemes="default";else if(q!=null&&q.startsWith("[")&&(q!=null&&q.endsWith("]"))){let re=q.slice(1,-1).split(",").map(W=>W.trim().replace(/"/g,""));t.availableThemes=re}}let u=e.match(/\/\/ \[CONFIG:CUSTOM_THEMES\]\s*\n\s*customThemes:\s*"[^"]*"/);if(u){let q=(ie=u[0].match(/customThemes:\s*"([^"]*)"/))==null?void 0:ie[1];t.customThemes=q||""}t.typography={};let m=e.match(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"([^"]*)"/);m&&(t.typography.fontSource=m[1]);let S=e.match(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"([^"]*)"/);S&&(t.typography.proseFont=S[1]);let T=e.match(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"([^"]*)"/);T&&(t.typography.headingFont=T[1]);let y=e.match(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"([^"]*)"/);y&&(t.typography.monoFont=y[1]),t.navigation={pages:[],social:[]};let g=e.match(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[([\s\S]*?)\]/);if(g){let q=g[1],re=(U,le=0)=>{let O=le,f={};for(;O<U.length&&/\s/.test(U[O]);)O++;if(U[O]!=="{")return{item:null,endPos:O};for(O++;O<U.length;){for(;O<U.length&&/\s/.test(U[O]);)O++;if(U[O]==="}"){O++;break}let C=U.slice(O).match(/^(\w+):\s*/);if(!C){O++;continue}let I=C[1];if(O+=C[0].length,I==="title"||I==="url"){let v=U.slice(O).match(/^"([^"]*)"/);v&&(f[I]=v[1],O+=v[0].length)}else if(I==="children")for(O++,f.children=[];O<U.length;){for(;O<U.length&&/\s/.test(U[O]);)O++;if(U[O]==="]"){O++;break}let v=re(U,O);if(v.item)f.children.push(v.item),O=v.endPos;else break;for(;O<U.length&&/\s/.test(U[O]);)O++;U[O]===","&&O++}for(;O<U.length&&/\s/.test(U[O]);)O++;U[O]===","&&O++}return{item:f,endPos:O}},W=0;for(;W<q.length;){for(;W<q.length&&/\s/.test(q[W]);)W++;if(W>=q.length||q[W]==="]")break;let U=re(q,W);if(U.item)t.navigation.pages.push(U.item),W=U.endPos;else{let le=q.slice(W).match(/\{\s*title:\s*"([^"]*)",\s*url:\s*"([^"]*)"\s*\}/);if(le)t.navigation.pages.push({title:le[1],url:le[2]}),W+=le[0].length;else break}for(;W<q.length&&/\s/.test(q[W]);)W++;q[W]===","&&W++}}let E=e.match(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[([\s\S]*?)\]/);if(E){let re=E[1].matchAll(/\{\s*\n\s*title:\s*"([^"]*)",\s*\n\s*url:\s*"([^"]*)",\s*\n\s*icon:\s*"([^"]*)",?\s*\n\s*\}/g);for(let W of re)t.navigation.social.push({title:W[1],url:W[2],icon:W[3]})}t.postOptions={};let A=e.match(/\/\/ \[CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS\]\s*tableOfContents:\s*(true|false)/);A&&(t.postOptions.tableOfContents=A[1]==="true");let F=e.match(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/);F&&(t.postOptions.readingTime=F[1]==="true");let h=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/),b=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/);(h||b)&&(t.postOptions.linkedMentions={enabled:h?h[1]==="true":!1,linkedMentionsCompact:b?b[1]==="true":!1});let k=e.match(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/);k&&(t.postOptions.graphView={enabled:k[1]==="true"});let w=e.match(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/);w&&(t.postOptions.postNavigation=w[1]==="true");let H=e.match(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/);H&&(t.postOptions.comments={enabled:H[1]==="true"}),t.optionalContentTypes={};let $=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*projects:\s*(true|false)/);$&&(t.optionalContentTypes.projects=$[1]==="true");let L=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*docs:\s*(true|false)/);L&&(t.optionalContentTypes.docs=L[1]==="true"),t.footer={};let G=e.match(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*(true|false)/);G&&(t.footer.showSocialIconsInFooter=G[1]==="true"),t.commandPalette={};let R=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/);R&&(t.commandPalette.enabled=R[1]==="true");let j=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*['"`]([^'"`]+)['"`]/);j&&(t.commandPalette.placeholder=j[1]);let V=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*['"`]([^'"`]+)['"`]/);V&&(t.commandPalette.shortcut=V[1]),t.commandPalette.search={};let z=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/);z&&(t.commandPalette.search.posts=z[1]==="true");let B=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/);B&&(t.commandPalette.search.pages=B[1]==="true");let N=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/);N&&(t.commandPalette.search.projects=N[1]==="true");let P=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/);P&&(t.commandPalette.search.docs=P[1]==="true"),t.commandPalette.sections={};let ae=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/);ae&&(t.commandPalette.sections.quickActions=ae[1]==="true");let pe=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/);pe&&(t.commandPalette.sections.pages=pe[1]==="true");let de=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/);de&&(t.commandPalette.sections.social=de[1]==="true"),t.commandPalette.quickActions={};let ue=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/);ue&&(t.commandPalette.quickActions.enabled=ue[1]==="true");let ge=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/);ge&&(t.commandPalette.quickActions.toggleMode=ge[1]==="true");let me=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/);me&&(t.commandPalette.quickActions.graphView=me[1]==="true");let he=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/);he&&(t.commandPalette.quickActions.changeTheme=he[1]==="true");let fe=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*site:\s*['"`]([^'"`]+)['"`]/);fe&&(t.site=fe[1]);let Oe=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*title:\s*['"`]([^'"`]+)['"`]/);Oe&&(t.title=Oe[1]);let Ce=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*description:\s*['"`]([^'"`]+)['"`]/);Ce&&(t.description=Ce[1]);let Te=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*author:\s*['"`]([^'"`]+)['"`]/);Te&&(t.author=Te[1]);let Se=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*language:\s*['"`]([^'"`]+)['"`]/);return Se&&(t.language=Se[1]),t}};var Xe=class{interpolateTemplate(a,e,t){return a.replace(/\$\{settings\.currentTheme\}/g,e.currentTheme).replace(/\$\{settings\.typography\.fontSource\}/g,e.typography.fontSource).replace(/\$\{settings\.typography\.proseFont\}/g,e.typography.proseFont).replace(/\$\{settings\.typography\.headingFont\}/g,e.typography.headingFont).replace(/\$\{settings\.typography\.monoFont\}/g,e.typography.monoFont).replace(/\$\{settings\.typography\.customFonts\.prose\}/g,e.typography.customFonts.prose).replace(/\$\{settings\.typography\.customFonts\.heading\}/g,e.typography.customFonts.heading).replace(/\$\{settings\.typography\.customFonts\.mono\}/g,e.typography.customFonts.mono).replace(/\$\{settings\.optionalFeatures\.comments\.enabled\}/g,e.optionalFeatures.comments.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.enabled\}/g,e.optionalFeatures.profilePicture.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.image\}/g,e.optionalFeatures.profilePicture.image).replace(/\$\{settings\.optionalFeatures\.profilePicture\.alt\}/g,e.optionalFeatures.profilePicture.alt).replace(/\$\{settings\.optionalFeatures\.profilePicture\.size\}/g,e.optionalFeatures.profilePicture.size).replace(/\$\{settings\.optionalFeatures\.profilePicture\.url\}/g,e.optionalFeatures.profilePicture.url||"").replace(/\$\{settings\.optionalFeatures\.profilePicture\.placement\}/g,e.optionalFeatures.profilePicture.placement).replace(/\$\{settings\.optionalFeatures\.profilePicture\.style\}/g,e.optionalFeatures.profilePicture.style).replace(/\$\{settings\.deployment\.platform\}/g,e.deployment.platform).replace(/\$\{templateName\}/g,t)}getTemplateConfig(a,e){switch(a){case"standard":return{layout:{contentWidth:"45rem"},footer:{enabled:!0,showSocialIconsInFooter:!0},darkModeToggleButton:"both",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0}},optionalContentTypes:{projects:!0,docs:!0},homeOptions:{featuredPost:{enabled:!0,type:"latest"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,showInCommandPalette:!0,maxNodes:100},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"traditional"}};case"compact":return{layout:{contentWidth:"42rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!1,social:!0}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!0},graphView:{enabled:!1},postNavigation:!0,showPostCardCoverImages:"posts",postCardAspectRatio:"custom",customPostCardAspectRatio:"2.5/1"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"minimal"}};case"minimal":return{layout:{contentWidth:"40rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"",placeholder:"Search content",search:{posts:!0,pages:!0,projects:!1,docs:!1},sections:{quickActions:!1,pages:!1,social:!1}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"none"}},postOptions:{postsPerPage:6,readingTime:!1,wordCount:!1,tableOfContents:!1,tags:!1,linkedMentions:{enabled:!1,linkedMentionsCompact:!1},graphView:{enabled:!1},postNavigation:!1,showPostCardCoverImages:"none",postCardAspectRatio:"og"},navigation:{showNavigation:!1,showMobileMenu:!1,style:"minimal"}};default:return{}}}};var et=class{validateMarkers(a){let t=["CONFIG:SITE_URL","CONFIG:SITE_TITLE","CONFIG:SITE_DESCRIPTION","CONFIG:SITE_AUTHOR","CONFIG:SITE_LANGUAGE","CONFIG:THEME","CONFIG:AVAILABLE_THEMES","CONFIG:FONT_SOURCE","CONFIG:FONT_BODY","CONFIG:FONT_HEADING","CONFIG:FONT_MONO","CONFIG:LAYOUT_CONTENT_WIDTH","CONFIG:TABLE_OF_CONTENTS_ENABLED","CONFIG:TABLE_OF_CONTENTS_DEPTH","CONFIG:FOOTER_ENABLED","CONFIG:FOOTER_SHOW_SOCIAL_ICONS","CONFIG:SCROLL_TO_TOP","CONFIG:FEATURE_BUTTON","CONFIG:DEPLOYMENT_PLATFORM","CONFIG:COMMAND_PALETTE_ENABLED","CONFIG:COMMAND_PALETTE_SHORTCUT","CONFIG:COMMAND_PALETTE_PLACEHOLDER","CONFIG:COMMAND_PALETTE_SEARCH_POSTS","CONFIG:COMMAND_PALETTE_SEARCH_PAGES","CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS","CONFIG:COMMAND_PALETTE_SEARCH_DOCS","CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS","CONFIG:COMMAND_PALETTE_SECTIONS_PAGES","CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME","CONFIG:PROFILE_PICTURE_ENABLED","CONFIG:PROFILE_PICTURE_IMAGE","CONFIG:PROFILE_PICTURE_ALT","CONFIG:PROFILE_PICTURE_SIZE","CONFIG:PROFILE_PICTURE_URL","CONFIG:PROFILE_PICTURE_PLACEMENT","CONFIG:PROFILE_PICTURE_STYLE","CONFIG:NAVIGATION_SHOW_NAVIGATION","CONFIG:NAVIGATION_STYLE","CONFIG:NAVIGATION_SHOW_MOBILE_MENU","CONFIG:NAVIGATION_PAGES","CONFIG:NAVIGATION_SOCIAL","CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS","CONFIG:OPTIONAL_CONTENT_TYPES_DOCS","CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED","CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE","CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG","CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED","CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT","CONFIG:HOME_OPTIONS_PROJECTS_ENABLED","CONFIG:HOME_OPTIONS_PROJECTS_COUNT","CONFIG:HOME_OPTIONS_DOCS_ENABLED","CONFIG:HOME_OPTIONS_DOCS_COUNT","CONFIG:HOME_OPTIONS_BLURB_PLACEMENT","CONFIG:POST_OPTIONS_POSTS_PER_PAGE","CONFIG:POST_OPTIONS_READING_TIME","CONFIG:POST_OPTIONS_WORD_COUNT","CONFIG:POST_OPTIONS_TAGS","CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED","CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT","CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR","CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS","CONFIG:POST_OPTIONS_POST_NAVIGATION","CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES","CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_COMMENTS_ENABLED","CONFIG:POST_OPTIONS_COMMENTS_PROVIDER","CONFIG:POST_OPTIONS_COMMENTS_REPO","CONFIG:POST_OPTIONS_COMMENTS_REPO_ID","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY","CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID","CONFIG:POST_OPTIONS_COMMENTS_MAPPING","CONFIG:POST_OPTIONS_COMMENTS_STRICT","CONFIG:POST_OPTIONS_COMMENTS_REACTIONS","CONFIG:POST_OPTIONS_COMMENTS_METADATA","CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION","CONFIG:POST_OPTIONS_COMMENTS_THEME","CONFIG:POST_OPTIONS_COMMENTS_LANG","CONFIG:POST_OPTIONS_COMMENTS_LOADING"].filter(n=>!a.includes(`// [${n}]`));return{valid:t.length===0,missing:t}}validateSyntax(a){let e=[];try{let t=(a.match(/\{/g)||[]).length,n=(a.match(/\}/g)||[]).length,o=(a.match(/\[/g)||[]).length,s=(a.match(/\]/g)||[]).length;t!==n&&e.push("Mismatched braces"),o!==s&&e.push("Mismatched brackets")}catch(t){e.push(`Validation failed: ${t instanceof Error?t.message:String(t)}`)}return{valid:e.length===0,errors:e}}};var tt=class{constructor(){this.templateManager=new Xe,this.markerValidator=new et}getTemplateConfig(a,e){return this.templateManager.getTemplateConfig(a,e)}updateThemeInConfig(a,e){if(a.includes("// [CONFIG:THEME]")){let n=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/;return a.replace(n,`// [CONFIG:THEME]
  theme: "${e}"`)}return a}updateFontInConfig(a,e,t){let n=`// [CONFIG:FONT_${e.toUpperCase()}]`;if(a.includes(n)){let s=new RegExp(`${n}\\s*\\n\\s*${e}:\\s*"[^"]*"`);return a.replace(s,`${n}
      ${e}: "${t}"`)}return a}updateFeatureInConfig(a,e,t){return a}modifyConfigFromPreset(a,e){var T,y,g,E,A,F;let t={...a.config,features:a.features,currentTheme:a.theme,contentOrganization:a.contentOrganization},n=this.modifyConfigFromFeatures(t,e),o=this.templateManager.getTemplateConfig(a.name,t);if(n.includes("// [CONFIG:THEME]")){let h=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,b=n.match(h);n=n.replace(h,`// [CONFIG:THEME]
  theme: "${t.currentTheme}"`)}if(n=n.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${t.typography.fontSource}"`),n=n.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${t.typography.fontSource==="cdn"?t.typography.customFonts.prose:t.typography.proseFont}"`),n=n.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${t.typography.fontSource==="cdn"?t.typography.customFonts.heading:t.typography.headingFont}"`),n=n.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${t.typography.fontSource==="cdn"?t.typography.customFonts.mono:t.typography.monoFont}"`),n=n.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${t.deployment.platform}"`),t.optionalContentTypes){if(t.optionalContentTypes.projects!==void 0){let h=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/;n=n.replace(h,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${t.optionalContentTypes.projects}`)}if(t.optionalContentTypes.docs!==void 0){let h=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/;n=n.replace(h,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${t.optionalContentTypes.docs}`)}}(T=o.layout)!=null&&T.contentWidth&&(n=n.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${o.layout.contentWidth}"`)),o.optionalContentTypes&&(o.optionalContentTypes.projects!==void 0&&(n=n.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${o.optionalContentTypes.projects}`)),o.optionalContentTypes.docs!==void 0&&(n=n.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${o.optionalContentTypes.docs}`))),o.featureButton&&(n=n.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*\n\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${o.featureButton}"`)),o.footer&&(o.footer.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${o.footer.enabled}`)),o.footer.showSocialIconsInFooter!==void 0&&(n=n.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${o.footer.showSocialIconsInFooter}`))),o.navigation&&(o.navigation.style&&(n=n.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${o.navigation.style}"`)),o.navigation.showNavigation!==void 0&&(n=n.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${o.navigation.showNavigation}`)),o.navigation.showMobileMenu!==void 0&&(n=n.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${o.navigation.showMobileMenu}`))),o.commandPalette&&(o.commandPalette.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${o.commandPalette.enabled}`)),o.commandPalette.shortcut!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${o.commandPalette.shortcut}"`)),o.commandPalette.placeholder!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${o.commandPalette.placeholder}"`)),o.commandPalette.search&&(o.commandPalette.search.posts!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${o.commandPalette.search.posts}`)),o.commandPalette.search.pages!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${o.commandPalette.search.pages}`)),o.commandPalette.search.projects!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${o.commandPalette.search.projects}`)),o.commandPalette.search.docs!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${o.commandPalette.search.docs}`))),o.commandPalette.sections&&(o.commandPalette.sections.quickActions!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${o.commandPalette.sections.quickActions}`)),o.commandPalette.sections.pages!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${o.commandPalette.sections.pages}`)),o.commandPalette.sections.social!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${o.commandPalette.sections.social}`))),o.commandPalette.quickActions&&(o.commandPalette.quickActions.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${o.commandPalette.quickActions.enabled}`)),o.commandPalette.quickActions.toggleMode!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${o.commandPalette.quickActions.toggleMode}`)),o.commandPalette.quickActions.graphView!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${o.commandPalette.quickActions.graphView}`)),o.commandPalette.quickActions.changeTheme!==void 0&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${o.commandPalette.quickActions.changeTheme}`)))),o.homeOptions&&(o.homeOptions.featuredPost&&(o.homeOptions.featuredPost.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${o.homeOptions.featuredPost.enabled}`)),o.homeOptions.featuredPost.type&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${o.homeOptions.featuredPost.type}"`))),o.homeOptions.recentPosts&&(o.homeOptions.recentPosts.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${o.homeOptions.recentPosts.enabled}`)),o.homeOptions.recentPosts.count&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${o.homeOptions.recentPosts.count}`))),o.homeOptions.projects&&(o.homeOptions.projects.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${o.homeOptions.projects.enabled}`)),o.homeOptions.projects.count&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${o.homeOptions.projects.count}`))),o.homeOptions.docs&&(o.homeOptions.docs.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${o.homeOptions.docs.enabled}`)),o.homeOptions.docs.count&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${o.homeOptions.docs.count}`))),(y=o.homeOptions.blurb)!=null&&y.placement&&(n=n.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${o.homeOptions.blurb.placement}"`))),o.postOptions&&(o.postOptions.postsPerPage&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${o.postOptions.postsPerPage}`)),[{key:"readingTime",marker:"CONFIG:POST_OPTIONS_READING_TIME"},{key:"wordCount",marker:"CONFIG:POST_OPTIONS_WORD_COUNT"},{key:"tags",marker:"CONFIG:POST_OPTIONS_TAGS"},{key:"postNavigation",marker:"CONFIG:POST_OPTIONS_POST_NAVIGATION"}].forEach(b=>{o.postOptions[b.key]!==void 0&&(n=n.replace(new RegExp(`// \\[${b.marker}\\]\\s*${b.key}:\\s*(true|false)`),`// [${b.marker}]
    ${b.key}: ${o.postOptions[b.key]}`))}),o.postOptions.linkedMentions&&(o.postOptions.linkedMentions.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${o.postOptions.linkedMentions.enabled}`)),o.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${o.postOptions.linkedMentions.linkedMentionsCompact}`))),o.postOptions.graphView&&(o.postOptions.graphView.enabled!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${o.postOptions.graphView.enabled}`)),o.postOptions.graphView.showInSidebar!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n?\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${o.postOptions.graphView.showInSidebar}`)),o.postOptions.graphView.showInCommandPalette!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE\]\s*showInCommandPalette:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE]
      showInCommandPalette: ${o.postOptions.graphView.showInCommandPalette}`)),o.postOptions.graphView.maxNodes&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${o.postOptions.graphView.maxNodes}`)),o.postOptions.graphView.showOrphanedPosts!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${o.postOptions.graphView.showOrphanedPosts}`))),o.postOptions.showPostCardCoverImages&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${o.postOptions.showPostCardCoverImages}"`)),o.postOptions.postCardAspectRatio&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${o.postOptions.postCardAspectRatio}"`)),o.postOptions.customPostCardAspectRatio&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${o.postOptions.customPostCardAspectRatio}"`))),((E=(g=t.optionalFeatures)==null?void 0:g.comments)==null?void 0:E.enabled)!==void 0&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${t.optionalFeatures.comments.enabled}`)),(F=(A=t.optionalFeatures)==null?void 0:A.comments)!=null&&F.enabled&&(t.optionalFeatures.comments.provider&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${t.optionalFeatures.comments.provider}"`)),t.optionalFeatures.comments.repo&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${t.optionalFeatures.comments.repo}"`)),t.optionalFeatures.comments.repoId&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${t.optionalFeatures.comments.repoId}"`)),t.optionalFeatures.comments.category&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${t.optionalFeatures.comments.category}"`)),t.optionalFeatures.comments.categoryId&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${t.optionalFeatures.comments.categoryId}"`)),t.optionalFeatures.comments.mapping&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${t.optionalFeatures.comments.mapping}"`)),t.optionalFeatures.comments.strict&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${t.optionalFeatures.comments.strict}"`)),t.optionalFeatures.comments.reactions&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${t.optionalFeatures.comments.reactions}"`)),t.optionalFeatures.comments.metadata&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${t.optionalFeatures.comments.metadata}"`)),t.optionalFeatures.comments.inputPosition&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${t.optionalFeatures.comments.inputPosition}"`)),t.optionalFeatures.comments.theme&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${t.optionalFeatures.comments.theme}"`)),t.optionalFeatures.comments.lang&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${t.optionalFeatures.comments.lang}"`)),t.optionalFeatures.comments.loading&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${t.optionalFeatures.comments.loading}"`)));let c=this.markerValidator.validateMarkers(n);if(!c.valid)return console.error("\u274C Config modification failed: Missing markers:",c.missing),console.error("Please ensure all CONFIG markers are present in your config.ts file"),e;let p=this.markerValidator.validateSyntax(n);if(!p.valid)return console.error("\u274C Config modification failed: Syntax errors:",p.errors),e;n=n.replace(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"[^"]*"/,`// [CONFIG:SITE_URL]
  site: "${t.siteInfo.site}"`),n=n.replace(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"[^"]*"/,`// [CONFIG:SITE_TITLE]
  title: "${t.siteInfo.title}"`),n=n.replace(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"[^"]*"/,`// [CONFIG:SITE_DESCRIPTION]
  description: "${t.siteInfo.description}"`),n=n.replace(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"[^"]*"/,`// [CONFIG:SITE_AUTHOR]
  author: "${t.siteInfo.author}"`),n=n.replace(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"[^"]*"/,`// [CONFIG:SITE_LANGUAGE]
  language: "${t.siteInfo.language}"`),t.siteInfo.faviconThemeAdaptive!==void 0&&(n=n.replace(/\/\/ \[CONFIG:FAVICON_THEME_ADAPTIVE\]\s*\n\s*faviconThemeAdaptive:\s*(true|false)/,`// [CONFIG:FAVICON_THEME_ADAPTIVE]
  faviconThemeAdaptive: ${t.siteInfo.faviconThemeAdaptive}`)),t.siteInfo.defaultOgImageAlt&&(n=n.replace(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:DEFAULT_OG_IMAGE_ALT]
  defaultOgImageAlt: "${t.siteInfo.defaultOgImageAlt}"`));let l=(h,b="      ")=>{let k=`${b}{ title: "${h.title}"`;return h.url&&(k+=`, url: "${h.url}"`),h.children&&h.children.length>0&&(k+=`,
${b}  children: [
`,k+=h.children.map(w=>`${b}    { title: "${w.title}", url: "${w.url}" }`).join(`,
`),k+=`
${b}  ]`),k+=" }",k},i=t.navigation.pages.map(h=>l(h)).join(`,
`),d="// [CONFIG:NAVIGATION_PAGES]",r="// [CONFIG:NAVIGATION_SOCIAL]",u=n.indexOf(d),m=n.indexOf(r);if(u!==-1&&m!==-1&&n.indexOf("pages: [",u)!==-1){let b=n.substring(0,u+d.length),k=n.substring(m);n=`${b}
    pages: [
${i}
    ],
    ${k}`}let S=t.navigation.social.map(h=>`      {
        title: "${h.title}",
        url: "${h.url}",
        icon: "${h.icon}",
      }`).join(`,
`);return n=n.replace(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_SOCIAL]
    social: [
${S},
    ]`),n}modifyConfigFromFeatures(a,e){var s,c,p,l,i,d,r,u,m,S,T,y,g,E,A,F,h,b,k;let t=e,n=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/;if(t=t.replace(n,`// [CONFIG:THEME]
  theme: "${a.currentTheme}"`),a.customThemeFile&&(t=t.replace(/\/\/ \[CONFIG:CUSTOM_THEME_FILE\]\s*\n\s*customThemeFile:\s*"[^"]*"/,`// [CONFIG:CUSTOM_THEME_FILE]
  customThemeFile: "${a.customThemeFile}"`)),a.optionalContentTypes){if(a.optionalContentTypes.projects!==void 0){let w=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/;t=t.replace(w,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${a.optionalContentTypes.projects}`)}if(a.optionalContentTypes.docs!==void 0){let w=/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/;t=t.replace(w,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${a.optionalContentTypes.docs}`)}}if(a.availableThemes!==void 0){let w;if(a.availableThemes==="default")w='"default"';else{let $=[...a.availableThemes];if(a.customThemes&&a.customThemes.trim()){let G=a.customThemes.split(",").map(R=>R.trim()).filter(R=>R);$=[...$,...G]}w=`[${$.map(G=>`"${G}"`).join(", ")}]`}let H=/\/\/ \[CONFIG:AVAILABLE_THEMES\]\s*\n\s*availableThemes:\s*(?:"default"|\[[^\]]*\])/;t=t.replace(H,`// [CONFIG:AVAILABLE_THEMES]
  availableThemes: ${w}`)}if(a.customThemes!==void 0){let w=a.customThemes?`"${a.customThemes}"`:'""',H=/\/\/ \[CONFIG:CUSTOM_THEMES\]\s*\n\s*customThemes:\s*"[^"]*"/;t=t.replace(H,`// [CONFIG:CUSTOM_THEMES]
  customThemes: ${w}`)}if(t=t.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${a.typography.fontSource}"`),a.typography.fontDisplay&&(t=t.replace(/\/\/ \[CONFIG:FONT_DISPLAY\]\s*\n\s*display:\s*"[^"]*"/,`// [CONFIG:FONT_DISPLAY]
    display: "${a.typography.fontDisplay}"`)),t=t.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${a.typography.fontSource==="cdn"?a.typography.customFonts.prose:a.typography.proseFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${a.typography.fontSource==="cdn"?a.typography.customFonts.heading:a.typography.headingFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${a.typography.fontSource==="cdn"?a.typography.customFonts.mono:a.typography.monoFont}"`),t=t.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${a.deployment.platform}"`),(s=a.layout)!=null&&s.contentWidth&&(t=t.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${a.layout.contentWidth}"`)),a.tableOfContents&&(t=t.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:TABLE_OF_CONTENTS_ENABLED]
    enabled: ${a.tableOfContents.enabled}`),t=t.replace(/\/\/ \[CONFIG:TABLE_OF_CONTENTS_DEPTH\]\s*\n\s*depth:\s*\d+/,`// [CONFIG:TABLE_OF_CONTENTS_DEPTH]
    depth: ${a.tableOfContents.depth}`)),a.footer){if(a.footer.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${a.footer.enabled}`)),a.footer.content){let w=a.footer.content.replace(/"/g,'\\"').replace(/\n/g,"\\n");t=t.replace(/\/\/ \[CONFIG:FOOTER_CONTENT\]\s*\n\s*content:\s*`[^`]*`/,`// [CONFIG:FOOTER_CONTENT]
    content: \`${a.footer.content}\``)}a.footer.showSocialIconsInFooter!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*\n\s*showSocialIconsInFooter:\s*(true|false)/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${a.footer.showSocialIconsInFooter}`))}((c=a.siteInfo)==null?void 0:c.faviconThemeAdaptive)!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FAVICON_THEME_ADAPTIVE\]\s*\n\s*faviconThemeAdaptive:\s*(true|false)/,`// [CONFIG:FAVICON_THEME_ADAPTIVE]
  faviconThemeAdaptive: ${a.siteInfo.faviconThemeAdaptive}`));let o=((p=a.siteInfo)==null?void 0:p.defaultOgImageAlt)||((l=a.seo)==null?void 0:l.defaultOgImageAlt);if(o&&(t=t.replace(/\/\/ \[CONFIG:SEO_DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:SEO_DEFAULT_OG_IMAGE_ALT]
    defaultOgImageAlt: "${o}"`),t=t.replace(/\/\/ \[CONFIG:DEFAULT_OG_IMAGE_ALT\]\s*\n\s*defaultOgImageAlt:\s*"[^"]*"/,`// [CONFIG:DEFAULT_OG_IMAGE_ALT]
  defaultOgImageAlt: "${o}"`)),a.navigation){if(a.navigation.showNavigation!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*\n\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${a.navigation.showNavigation}`)),a.navigation.style&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*\n\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${a.navigation.style}"`)),a.navigation.showMobileMenu!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*\n\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${a.navigation.showMobileMenu}`)),a.navigation.pages){let w=(V,z="      ")=>{let B=`${z}{ title: "${V.title}"`;return V.url&&(B+=`, url: "${V.url}"`),V.children&&V.children.length>0&&(B+=`,
${z}  children: [
`,B+=V.children.map(N=>`${z}    { title: "${N.title}", url: "${N.url}" }`).join(`,
`),B+=`
${z}  ]`),B+=" }",B},H=a.navigation.pages.map(V=>w(V)).join(`,
`),$=H?`[
${H}
    ]`:"[]",L="// [CONFIG:NAVIGATION_PAGES]",G="// [CONFIG:NAVIGATION_SOCIAL]",R=t.indexOf(L),j=t.indexOf(G);if(R!==-1&&j!==-1&&t.indexOf("pages: [",R)!==-1){let z=t.substring(0,R+L.length),B=t.substring(j);t=`${z}
    pages: ${$},
    ${B}`}}if(a.navigation.social){let w=a.navigation.social.map($=>`      {
        title: "${$.title}",
        url: "${$.url}",
        icon: "${$.icon}",
      }`).join(`,
`),H=w?`[
${w},
    ]`:"[]";t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_SOCIAL]
    social: ${H}`)}}return a.commandPalette&&(a.commandPalette.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${a.commandPalette.enabled}`)),a.commandPalette.shortcut&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*\n\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${a.commandPalette.shortcut}"`)),a.commandPalette.placeholder&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*\n\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${a.commandPalette.placeholder}"`)),a.commandPalette.search&&(a.commandPalette.search.posts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*\n\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${a.commandPalette.search.posts}`)),a.commandPalette.search.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${a.commandPalette.search.pages}`)),a.commandPalette.search.projects!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${a.commandPalette.search.projects}`)),a.commandPalette.search.docs!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${a.commandPalette.search.docs}`))),a.commandPalette.sections&&(a.commandPalette.sections.quickActions!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*\n\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${a.commandPalette.sections.quickActions}`)),a.commandPalette.sections.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*\n\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${a.commandPalette.sections.pages}`)),a.commandPalette.sections.social!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*\n\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${a.commandPalette.sections.social}`)))),a.homeOptions&&(a.homeOptions.featuredPost&&(a.homeOptions.featuredPost.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${a.homeOptions.featuredPost.enabled}`)),a.homeOptions.featuredPost.type&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*\n\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${a.homeOptions.featuredPost.type}"`)),a.homeOptions.featuredPost.slug&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG\]\s*\n\s*slug:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG]
      slug: "${a.homeOptions.featuredPost.slug}"`))),a.homeOptions.recentPosts&&(a.homeOptions.recentPosts.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${a.homeOptions.recentPosts.enabled}`)),a.homeOptions.recentPosts.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${a.homeOptions.recentPosts.count}`))),a.homeOptions.projects&&(a.homeOptions.projects.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${a.homeOptions.projects.enabled}`)),a.homeOptions.projects.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${a.homeOptions.projects.count}`))),a.homeOptions.docs&&(a.homeOptions.docs.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${a.homeOptions.docs.enabled}`)),a.homeOptions.docs.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*\n\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${a.homeOptions.docs.count}`))),(i=a.homeOptions.blurb)!=null&&i.placement&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*\n\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${a.homeOptions.blurb.placement}"`))),a.postOptions&&(a.postOptions.postsPerPage&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*\n\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${a.postOptions.postsPerPage}`)),a.postOptions.wordCount!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*\n\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${a.postOptions.wordCount}`)),a.postOptions.tags!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*\n\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${a.postOptions.tags}`)),a.postOptions.linkedMentions&&a.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*\n\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${a.postOptions.linkedMentions.linkedMentionsCompact}`)),a.postOptions.graphView&&(a.postOptions.graphView.showInSidebar!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*\n\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${a.postOptions.graphView.showInSidebar}`)),a.postOptions.graphView.maxNodes&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*\n\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${a.postOptions.graphView.maxNodes}`)),a.postOptions.graphView.showOrphanedPosts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*\n\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${a.postOptions.graphView.showOrphanedPosts}`))),a.postOptions.customPostCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*\n\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${a.postOptions.customPostCardAspectRatio}"`))),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*\n\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${(r=(d=a.commandPalette)==null?void 0:d.enabled)!=null?r:a.features.commandPalette}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_READING_TIME]
    readingTime: ${a.features.readingTime}`),"wordCount"in a.features&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${a.features.wordCount}`)),"tags"in a.features&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${a.features.tags}`)),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${a.features.linkedMentions}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${(u=a.features.linkedMentionsCompact)!=null?u:!1}`),((S=(m=a.optionalFeatures)==null?void 0:m.comments)==null?void 0:S.enabled)!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${a.optionalFeatures.comments.enabled}`)),(T=a.optionalFeatures)!=null&&T.comments&&a.optionalFeatures.comments.enabled&&(a.optionalFeatures.comments.provider!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_PROVIDER\]\s*provider:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_PROVIDER]
      provider: "${a.optionalFeatures.comments.provider||""}"`)),a.optionalFeatures.comments.repo!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO\]\s*repo:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO]
      repo: "${a.optionalFeatures.comments.repo||""}"`)),a.optionalFeatures.comments.repoId!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REPO_ID\]\s*repoId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REPO_ID]
      repoId: "${a.optionalFeatures.comments.repoId||""}"`)),a.optionalFeatures.comments.category!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY\]\s*category:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY]
      category: "${a.optionalFeatures.comments.category||""}"`)),a.optionalFeatures.comments.categoryId!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID\]\s*categoryId:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_CATEGORY_ID]
      categoryId: "${a.optionalFeatures.comments.categoryId||""}"`)),a.optionalFeatures.comments.mapping!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_MAPPING\]\s*mapping:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_MAPPING]
      mapping: "${a.optionalFeatures.comments.mapping||""}"`)),a.optionalFeatures.comments.strict!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_STRICT\]\s*strict:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_STRICT]
      strict: "${a.optionalFeatures.comments.strict||""}"`)),a.optionalFeatures.comments.reactions!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_REACTIONS\]\s*reactions:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_REACTIONS]
      reactions: "${a.optionalFeatures.comments.reactions||""}"`)),a.optionalFeatures.comments.metadata!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_METADATA\]\s*metadata:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_METADATA]
      metadata: "${a.optionalFeatures.comments.metadata||""}"`)),a.optionalFeatures.comments.inputPosition!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION\]\s*inputPosition:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_INPUT_POSITION]
      inputPosition: "${a.optionalFeatures.comments.inputPosition||""}"`)),a.optionalFeatures.comments.theme!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_THEME\]\s*theme:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_THEME]
      theme: "${a.optionalFeatures.comments.theme||""}"`)),a.optionalFeatures.comments.lang!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LANG\]\s*lang:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LANG]
      lang: "${a.optionalFeatures.comments.lang||""}"`)),a.optionalFeatures.comments.loading!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_LOADING\]\s*loading:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_COMMENTS_LOADING]
      loading: "${a.optionalFeatures.comments.loading||""}"`))),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
      enabled: ${(E=(g=(y=a.postOptions)==null?void 0:y.graphView)==null?void 0:g.enabled)!=null?E:a.features.graphView}`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_POST_NAVIGATION]
    postNavigation: ${a.features.postNavigation}`),t=t.replace(/\/\/\s*\[CONFIG:HIDE_SCROLL_BAR\]\s*hideScrollBar:\s*(true|false)/,`//[CONFIG:HIDE_SCROLL_BAR]
  hideScrollBar: ${a.features.hideScrollBar}`),t=t.replace(/\/\/ \[CONFIG:SCROLL_TO_TOP\]\s*scrollToTop:\s*(true|false)/,`// [CONFIG:SCROLL_TO_TOP]
  scrollToTop: ${a.features.scrollToTop}`),t=t.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${a.features.showSocialIconsInFooter}`),t=t.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${a.features.featureButton}"`),(A=a.features)!=null&&A.quickActions&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${a.features.quickActions.enabled}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${a.features.quickActions.toggleMode}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${a.features.quickActions.graphView}`),t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${a.features.quickActions.changeTheme}`)),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${a.postOptions.showPostCardCoverImages}"`),t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${a.postOptions.postCardAspectRatio}"`),a.postOptions.customPostCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${a.postOptions.customPostCardAspectRatio}"`)),((h=(F=a.optionalFeatures)==null?void 0:F.profilePicture)==null?void 0:h.enabled)!==void 0&&(t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:PROFILE_PICTURE_ENABLED]
    enabled: ${a.optionalFeatures.profilePicture.enabled}`)),(k=(b=a.optionalFeatures)==null?void 0:b.profilePicture)!=null&&k.enabled&&(t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_IMAGE\]\s*image:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_IMAGE]
    image: "${a.optionalFeatures.profilePicture.image}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ALT\]\s*alt:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_ALT]
    alt: "${a.optionalFeatures.profilePicture.alt}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_SIZE\]\s*size:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_SIZE]
    size: "${a.optionalFeatures.profilePicture.size}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_URL\]\s*url:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_URL]
    url: "${a.optionalFeatures.profilePicture.url||""}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_PLACEMENT]
    placement: "${a.optionalFeatures.profilePicture.placement}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_STYLE]
    style: "${a.optionalFeatures.profilePicture.style}"`)),t}};var ut={};Ne(ut,{config:()=>_t,default:()=>wt,description:()=>Et,name:()=>bt});var bt="Standard",Et="Full-featured blog with all options enabled",_t={currentTemplate:"standard",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},tableOfContents:{enabled:!0,depth:4}},wt={name:bt,description:Et,config:_t};var gt={};Ne(gt,{config:()=>Ft,default:()=>Dt,description:()=>At,name:()=>Mt});var Mt="Minimal",At="Clean, simple blog with minimal features",Ft={currentTemplate:"minimal",features:{commandPalette:!0,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,hideScrollBar:!0,scrollToTop:!1,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!1,toggleMode:!1,graphView:!1,changeTheme:!1}},tableOfContents:{enabled:!1,depth:4}},Dt={name:Mt,description:At,config:Ft};var mt={};Ne(mt,{config:()=>xt,default:()=>Gt,description:()=>Lt,name:()=>kt});var kt="Compact",Lt="Balanced setup for smaller sites",xt={currentTemplate:"compact",features:{commandPalette:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,hideScrollBar:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!0,toggleMode:!0,graphView:!1,changeTheme:!0}},tableOfContents:{enabled:!0,depth:2}},Gt={name:kt,description:Lt,config:xt};var st=class{constructor(a){this.app=a,this.fileManager=new Ze(a),this.presetModifier=new tt}async getConfigFileInfo(){return this.fileManager.getConfigFileInfo()}async readConfig(){return this.fileManager.readConfig()}async writeConfig(a){return this.fileManager.writeConfig(a)}async applyPreset(a){let e=await this.readConfig(),t=this.presetModifier.modifyConfigFromPreset(a,e);return await this.writeConfig(t)}async detectAstroDevServer(){return this.fileManager.detectAstroDevServer()}async updateIndividualFeatures(a){let e=await this.readConfig(),t=this.presetModifier.modifyConfigFromFeatures(a,e);return await this.writeConfig(t)}async updateThemeOnly(a){let e=await this.readConfig(),t=this.presetModifier.updateThemeInConfig(e,a);return await this.writeConfig(t)}async updateFontOnly(a,e){let t=await this.readConfig(),n=this.presetModifier.updateFontInConfig(t,a,e);return await this.writeConfig(n)}async updateFeatureOnly(a,e){let t=await this.readConfig(),n=this.presetModifier.updateFeatureInConfig(t,a,e);return await this.writeConfig(n)}async triggerRebuild(){}getTemplatePreset(a){try{switch(a){case"standard":return ut;case"minimal":return gt;case"compact":return mt;default:return console.error(`Unknown template ID: ${a}`),null}}catch(e){return console.error("Error loading template preset:",e),null}}getTemplateConfig(a,e){return this.presetModifier.getTemplateConfig(a,e)}};var it=class{constructor(a,e){this.app=a,this.getContentOrganization=e}async getPluginStatus(a){var s;let e=this.app.plugins,t=["astro-composer","insert-unsplash-image"],n=[],o=this.checkObsidianSettings(a);n.push(o);for(let c of t){let p=(s=e==null?void 0:e.plugins)==null?void 0:s[c],l=(e==null?void 0:e.enabledPlugins)&&e.enabledPlugins.has(c),i=this.isPluginInstalled(c),d;if(c==="astro-composer"&&p){let u=await this.checkAstroComposerSettings(p,a);u&&(d=u.outOfSyncContentTypes)}let r=!0;c==="insert-unsplash-image"&&p&&i&&l&&(r=this.checkImageInserterSettings(p,a)),n.push({name:this.getPluginDisplayName(c),installed:i,enabled:l||!1,configurable:this.isPluginConfigurable(c),currentSettings:p?await this.getPluginSettings(p):void 0,outOfSyncContentTypes:d,settingsMatch:c==="insert-unsplash-image"?r:void 0})}return n}isPluginInstalled(a){var n,o;let e=(n=this.app.plugins)==null?void 0:n.communityPlugins;if(e&&Array.isArray(e))return e.includes(a);let t=this.app.plugins;return!!((o=t==null?void 0:t.plugins)!=null&&o[a])}getPluginDisplayName(a){return{"astro-composer":"Astro Composer","insert-unsplash-image":"Image Inserter"}[a]||a}checkObsidianSettings(a){var l;let e=a||((l=this.getContentOrganization)==null?void 0:l.call(this))||"file-based",t=this.app.vault.config,n=e==="file-based"?"subfolder":"same-folder",o="attachments",s=!1,p=(t.attachmentFolderPath||"").trim().replace(/\/+$/,"");return n==="subfolder"?s=p===`./${o}`||p===`${o}`||p.endsWith(`/${o}`)||p===`.${o}`||p===`${o}/`||p===`./${o}/`:s=p==="./"||p===""||p==="."||p===void 0||p===null,{name:"Attachment settings",installed:s,enabled:!1,configurable:!0,currentSettings:void 0}}async checkAstroComposerSettings(a,e){var o;let n=(e||((o=this.getContentOrganization)==null?void 0:o.call(this))||"file-based")==="file-based"?"file":"folder";try{let s=a.settings;if(!s)return null;let c=[];if(Array.isArray(s.contentTypes)){let p=["posts","pages","projects","docs"];for(let l of p){let i=s.contentTypes.find(d=>d&&d.folder&&d.folder.toLowerCase()===l);i&&i.enabled!==!1&&i.creationMode!==n&&c.push(l)}}else if(s.creationMode&&typeof s.creationMode=="string"?s.creationMode!==n&&c.push("posts"):c.push("posts"),s.pagesCreationMode?s.pagesCreationMode!==n&&c.push("pages"):c.push("pages"),Array.isArray(s.customContentTypes))for(let p of["projects","docs"]){let l=s.customContentTypes.find(i=>i&&i.folder&&i.folder.toLowerCase()===p);l&&l.creationMode?l.creationMode!==n&&c.push(p):c.push(p)}else c.push("projects","docs");return c.length===0?null:{outOfSyncContentTypes:c}}catch(s){return console.error("Failed to check Astro Composer settings:",s),null}}checkImageInserterSettings(a,e){var o,s;let n=(e||((o=this.getContentOrganization)==null?void 0:o.call(this))||"file-based")==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]";try{let c=a.settings;return c?((s=c.frontmatter)==null?void 0:s.valueFormat)===n:!1}catch(c){return console.error("Failed to check Image Inserter settings:",c),!1}}isPluginConfigurable(a){return["astro-composer","insert-unsplash-image"].includes(a)}async getPluginSettings(a){return{}}async configurePlugins(a){let e=0,t=0;try{return t++,await this.configureObsidianSettings(a.obsidianSettings),e++,t++,await this.configureAstroComposerSettings(a.astroComposerSettings),e++,t++,await this.configureImageInserterSettings(a.imageInserterSettings),e++,e>0}catch(n){return console.error("Plugin configuration failed:",n),!1}}async configureObsidianSettings(a){try{let e=this.app,t=a.attachmentLocation==="subfolder"?`./${a.subfolderName}`:"./";if(e.setting&&typeof e.setting.set=="function")await e.setting.set("attachmentFolderPath",t),await e.setting.set("newLinkFormat","relative"),typeof e.setting.save=="function"&&await e.setting.save();else{let n=this.app.vault.config;n.newLinkFormat="relative",n.attachmentFolderPath=t,await this.app.vault.saveConfig()}}catch(e){throw console.error("Failed to configure Obsidian settings:",e),e}}async configureAstroComposerSettings(a){var e;try{let t=this.app.plugins,n=(e=t==null?void 0:t.plugins)==null?void 0:e["astro-composer"];if(!n){console.warn("Astro Composer plugin not found");return}if(!n.settings){console.warn("Astro Composer plugin settings not available");return}let o=n.settings,s=a.creationMode;if(Array.isArray(o.contentTypes)){let c=["posts","pages","projects","docs"];for(let p of o.contentTypes)if(p&&typeof p=="object"){let l=(p.folder||"").toLowerCase();c.includes(l)&&(p.creationMode=s)}}else if(o.creationMode=s,o.pagesCreationMode=s,Array.isArray(o.customContentTypes)){for(let c of o.customContentTypes)if(c&&typeof c=="object"){let p=(c.folder||"").toLowerCase();(p==="projects"||p==="docs")&&(c.creationMode=s)}}o.indexFileName=a.indexFileName,typeof n.saveSettings=="function"&&await n.saveSettings()}catch(t){throw console.error("Failed to configure Astro Composer:",t),t}}async configureImageInserterSettings(a){var e;try{let t=this.app.plugins,n=(e=t==null?void 0:t.plugins)==null?void 0:e["insert-unsplash-image"];n&&n.settings&&(n.settings.frontmatter&&(n.settings.frontmatter.valueFormat=a.valueFormat),await n.saveSettings())}catch(t){console.error("Failed to configure Image Inserter:",t)}}async getManualConfigurationInstructions(a){let e=`## Obsidian Settings
`;return e+=`1. Go to **Settings \u2192 Files & Links**
`,e+="2. Set **Default location for new attachments** to: ",e+=a.obsidianSettings.attachmentLocation==="subfolder"?`**"In subfolder under current folder"**
`:`**"Same folder as current file"**
`,a.obsidianSettings.attachmentLocation==="subfolder"&&(e+=`3. Set **Subfolder name** to: **"${a.obsidianSettings.subfolderName}"**
`),e+=`## Astro Composer Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Astro Composer**
`,e+=`2. Set **Creation mode** to: "${a.astroComposerSettings.creationMode==="file"?"File-based":"Folder-based"}"
`,e+=`3. Ensure **Creation mode** is set to "${a.astroComposerSettings.creationMode==="file"?"File-based":"Folder-based"}" for all content types:
`,e+=`   - Posts
`,e+=`   - Pages
`,e+=`   - Projects
`,e+=`   - Docs
`,a.astroComposerSettings.creationMode==="folder"&&(e+=`4. Set **Index file name** to: "${a.astroComposerSettings.indexFileName}"
`),e+=`## Image Inserter Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Image Inserter**
`,e+=`2. Set **Frontmatter \u2192 Value Format** to: "${a.imageInserterSettings.valueFormat}"
`,e+=`**Note**: After making these changes, you should see them reflected in Obsidian's settings interface. If the automatic configuration worked, these settings should already be applied.
`,e}};var rt=class extends Tt.Plugin{async onload(){await this.loadSettings(),this.configManager=new st(this.app),this.pluginManager=new it(this.app,()=>this.settings.contentOrganization),ft(this),this.settingsTab=new Qe(this.app,this),this.addSettingTab(this.settingsTab),this.settings.removeRibbonIcon||(this.ribbonIcon=this.addRibbonIcon("wand-sparkles","Open Astro Modular wizard",async()=>{await this.loadSettings(),new se(this.app,this).open()}),this.ribbonIcon&&this.ribbonIcon.setAttribute("data-astro-modular-settings-ribbon","true")),this.settings.runWizardOnStartup&&(this.startupTimeoutId=window.setTimeout(async()=>{await this.loadSettings(),this.settings.runWizardOnStartup&&new se(this.app,this).open()},2e3)),this.setupRibbonContextMenuHandling()}onunload(){this.startupTimeoutId&&(window.clearTimeout(this.startupTimeoutId),this.startupTimeoutId=void 0),this.ribbonIcon&&(this.ribbonIcon.remove(),this.ribbonIcon=void 0),this.ribbonContextMenuObserver&&(this.ribbonContextMenuObserver.disconnect(),this.ribbonContextMenuObserver=void 0),this.ribbonContextMenuStyleEl&&(this.ribbonContextMenuStyleEl.remove(),this.ribbonContextMenuStyleEl=void 0)}async loadSettings(){this.settings=Object.assign({},be,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}openSettings(){this.app.setting.open(),this.app.setting.openTabById(this.manifest.id)}async triggerSettingsRefresh(){await this.loadSettings(),this.settingsTab&&this.settingsTab.render()}async updateRibbonIcon(){await this.loadSettings(),this.ribbonIcon&&(this.ribbonIcon.parentElement&&document.body.contains(this.ribbonIcon)&&this.ribbonIcon.remove(),this.ribbonIcon=void 0);let e=document.querySelector('[data-astro-modular-settings-ribbon="true"]');e&&e.remove();let t=document.querySelector(".sidebar-left");if(t){let n=t.querySelectorAll(".clickable-icon, .sidebar-toggle-button");for(let o of Array.from(n)){let s=o.querySelector("svg");if(s&&((s.getAttribute("data-lucide")||s.getAttribute("xmlns:lucide"))==="wand-sparkles"||s.classList.contains("lucide-wand-sparkles"))&&o.closest(".sidebar-left-content, .workspace-ribbon")){o.remove();break}}}if(this.updateRibbonContextMenuCSS(),this.setupRibbonContextMenuObserver(),this.settings.removeRibbonIcon){let n=document.querySelectorAll(".menu");for(let o of Array.from(n))this.removeRibbonIconFromContextMenu(o)}this.settings.removeRibbonIcon||(this.ribbonIcon=this.addRibbonIcon("wand-sparkles","Open Astro Modular wizard",async()=>{await this.loadSettings(),new se(this.app,this).open()}),this.ribbonIcon&&this.ribbonIcon.setAttribute("data-astro-modular-settings-ribbon","true"))}setupRibbonContextMenuHandling(){this.updateRibbonContextMenuCSS(),this.setupRibbonContextMenuObserver()}updateRibbonContextMenuCSS(){this.ribbonContextMenuStyleEl&&this.ribbonContextMenuStyleEl.remove(),this.settings.removeRibbonIcon&&(this.ribbonContextMenuStyleEl=document.createElement("style"),this.ribbonContextMenuStyleEl.id="astro-modular-settings-hide-ribbon-context-menu",this.ribbonContextMenuStyleEl.textContent=`
				/* Hide our ribbon icon from context menu when removed */
				.menu-item:has(svg[data-lucide="wand-sparkles"]),
				.menu-item:has(.lucide-wand-sparkles),
				.menu-item .menu-item-icon:has(svg[data-lucide="wand-sparkles"]),
				.menu-item .menu-item-icon:has(.lucide-wand-sparkles) {
					display: none !important;
				}
			`,document.head.appendChild(this.ribbonContextMenuStyleEl))}setupRibbonContextMenuObserver(){this.ribbonContextMenuObserver&&this.ribbonContextMenuObserver.disconnect(),this.settings.removeRibbonIcon&&(this.ribbonContextMenuObserver=new MutationObserver(e=>{for(let t of e)if(t.addedNodes.length>0)for(let n of Array.from(t.addedNodes))n instanceof HTMLElement&&(n.classList.contains("menu")||n.querySelector(".menu"))&&this.removeRibbonIconFromContextMenu(n)}),this.ribbonContextMenuObserver.observe(document.body,{childList:!0,subtree:!0}))}removeRibbonIconFromContextMenu(e){var n;let t=e.querySelectorAll(".menu-item");for(let o of Array.from(t)){let s=o.querySelector("svg");if(s&&(s.getAttribute("data-lucide")||s.getAttribute("xmlns:lucide")||(s.classList.contains("lucide-wand-sparkles")?"wand-sparkles":null))==="wand-sparkles"){let p=((n=o.textContent)==null?void 0:n.toLowerCase())||"";(p.includes("wizard")||p.includes("astro modular"))&&o.remove()}}}};
