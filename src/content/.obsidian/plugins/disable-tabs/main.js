/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var m=(s,e)=>{for(var t in e)c(s,t,{get:e[t],enumerable:!0})},g=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of d(e))!T.call(s,a)&&a!==t&&c(s,a,{get:()=>e[a],enumerable:!(i=h(e,a))||i.enumerable});return s};var S=s=>g(c({},"__esModule",{value:!0}),s);var f={};m(f,{default:()=>b});module.exports=S(f);var p=require("obsidian");var r={enabled:!0,hideMobileNewTabIcon:!1};var o=class{constructor(e){this.app=e}enforceSingleTab(){let e=[];if(this.app.workspace.iterateRootLeaves(t=>{e.push(t)}),e.length>1){let t=this.app.workspace.getMostRecentLeaf();t&&e.includes(t)?e.forEach(i=>{i!==t&&i.detach()}):e.slice(1).forEach(i=>i.detach())}}};var l=require("obsidian"),n=class extends l.PluginSettingTab{constructor(t,i){super(t,i);this.plugin=i,this.settings=i.settings}display(){let{containerEl:t}=this;t.empty(),new l.Setting(t).setName("Hide mobile tabs icon").setDesc("Hide the tabs icon on mobile devices").addToggle(i=>i.setValue(this.settings.hideMobileNewTabIcon).onChange(async a=>{this.settings.hideMobileNewTabIcon=a,await this.plugin.saveSettings(),this.plugin.updateMobileTabIconCSS()}))}};var b=class extends p.Plugin{async onload(){this.settings=Object.assign({},r,await this.loadData()),this.tabEnforcer=new o(this.app),this.updateMobileTabIconCSS(),this.registerEvent(this.app.workspace.on("layout-change",()=>{this.tabEnforcer.enforceSingleTab()})),this.app.workspace.onLayoutReady(()=>{this.tabEnforcer.enforceSingleTab()}),this.addSettingTab(new n(this.app,this))}updateMobileTabIconCSS(){this.mobileTabIconStyleEl&&(this.mobileTabIconStyleEl.remove(),this.mobileTabIconStyleEl=void 0),this.settings.hideMobileNewTabIcon&&(this.mobileTabIconStyleEl=document.createElement("style"),this.mobileTabIconStyleEl.id="disable-tabs-mobile-icon-css",this.mobileTabIconStyleEl.textContent=`
.mobile-navbar-action-tabs {
  display: none;
}
      `.trim(),document.head.appendChild(this.mobileTabIconStyleEl))}async saveSettings(){await this.saveData(this.settings)}onunload(){this.mobileTabIconStyleEl&&this.mobileTabIconStyleEl.remove()}};
